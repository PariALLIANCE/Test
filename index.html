<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>KING PRONOS</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="manifest" href="manifest.json">
    <!-- Icône pour iOS -->
<link rel="apple-touch-icon" href="/iconios-192.png">

<!-- Web App installable (Standalone) -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<meta name="apple-mobile-web-app-title" content="King Pronos">
    <style>
        :root {
            /* Thème par défaut (bleu) */
            --primary-color: #5D5CDE;
            --text-color: #000000;
            --bg-color: #ffffff;
            --border-color: #dddfe2;
            --secondary-color: #f0f2f5;
            --card-bg: #ffffff;
            --card-border: #e0e0e0;
            --inactive-text: #8e8e93;
            --success-color: #4caf50;
            --danger-color: #ff4842;
            --warning-color: #ff9800;
            --shadow: rgba(0, 0, 0, 0.1);
            --chat-sent-bg: #5D5CDE;
            --chat-sent-text: #ffffff;
            --chat-received-bg: #f0f2f5;
            --selection-color: rgba(93, 92, 222, 0.3);
            --action-menu-bg: rgba(0, 0, 0, 0.9);
            --action-menu-text: #ffffff;
            --highlight-color: #FFEB3B;
            --blocked-color: #ff6b6b;
            --reaction-bg: rgba(255, 255, 255, 0.9);
            --reaction-shadow: rgba(0, 0, 0, 0.1);
            --group-icon-bg: #4CAF50;
            --input-bg: #f0f2f5;
            --input-placeholder: #8e8e93;
            --button-text: #000000;
            --link-color: #007aff;
            --admin-badge-bg: #5D5CDE;
            --admin-badge-text: white;
            --log-bg: rgba(0, 0, 0, 0.8);
            --log-text: #ffffff;
            --log-info: #2196F3;
            --log-warning: #FFC107;
            --log-error: #FF5252;
            --log-success: #4CAF50;
            --overlay-bg: rgba(0, 0, 0, 0.7);
            --event-bg: #f1f1f1;
            --event-border: #e0e0e0;
            --restricted-badge-bg: #FFC107;
            --restricted-badge-text: #000000;
            --side-menu-bg: #ffffff;
            --side-menu-active: #f0f2f5;
            --side-menu-hover: #f5f5f5;
            --log-panel-bg: #f8f9fa;
            --log-panel-border: #e0e0e0;
            --link-hover: #0056b3;
            --admin-notif-bg: #f8f9fa;
            --admin-notif-border: #e0e0e0;
            --forecast-win-bg: rgba(76, 175, 80, 0.2);
            --forecast-loss-bg: rgba(244, 67, 54, 0.2);
            --forecast-pending-bg: rgba(255, 193, 7, 0.2);
            --comment-bg: #f5f5f5;
            --comment-border: #ebebeb;
            --social-whatsapp: #25D366;
            --social-telegram: #0088cc;
            --social-youtube: #FF0000;
            --partner-google: #4285F4;
            --partner-firebase: #FFCA28;
            --partner-github: #333333;
            --partner-quora: #B92B27;
            --notification-dot: #FF4842;
            --warning-bg: rgba(255, 152, 0, 0.1);
            --warning-text: #FF9800;
            --image-message-bg: rgba(93, 92, 222, 0.1);
            --image-viewer-bg: rgba(0, 0, 0, 0.9);
            --selected-message-border: rgba(93, 92, 222, 0.7);
            --date-separator-bg: rgba(0, 0, 0, 0.05);
            --date-separator-text: var(--inactive-text);
            --reply-preview-bg: rgba(93, 92, 222, 0.1);
            --reply-preview-border: var(--primary-color);
            --reply-preview-text: var(--text-color);
            --deleted-message-bg: rgba(0, 0, 0, 0.05);
            --deleted-message-text: #888888;
            --action-bar-bg: var(--bg-color);
            --action-bar-text: var(--text-color);
            --action-bar-border: var(--border-color);
            --reply-quote-bg: rgba(93, 92, 222, 0.15);
            --reply-quote-border: var(--primary-color);
            --group-info-bg: var(--bg-color);
            --group-info-border: var(--border-color);
            --download-btn-bg: var(--primary-color);
            --download-btn-text: white;
            --new-badge-bg: var(--primary-color);
            --new-badge-text: white;
            --theme-selector-border: #ddd;
            --user-item-bg: var(--bg-color);
            --unread-badge-bg: #FF4842;
            --unread-badge-text: white;
            --sats-color: #F7931A;
            --plan-active-bg: rgba(93, 92, 222, 0.1);
            --plan-active-border: var(--primary-color);
            --premium-badge-bg: #FFD700;
            --premium-badge-text: #000000;
            --history-date-bg: rgba(93, 92, 222, 0.1);
            --history-date-text: var(--primary-color);
            --card-accent: var(--primary-color);
            --prediction-highlight-bg: rgba(93, 92, 222, 0.1);
            --prediction-highlight-text: var(--primary-color);
            --promo-bg: linear-gradient(135deg, #FFD700, #FFA000);
            --promo-text: #000000;
            --promo-shadow: rgba(255, 215, 0, 0.3);
            --secret-bg: linear-gradient(135deg, #4CAF50, #2E7D32);
            --secret-text: white;
            --secrets-popup-bg: rgba(0, 0, 0, 0.9);
            --secrets-popup-content-bg: var(--bg-color);
            --icegame-bg: linear-gradient(135deg, #2196F3, #1976D2);
            --icegame-text: white;
            --coming-soon-bg: linear-gradient(135deg, #9E9E9E, #757575);
            --coming-soon-text: white;
            --home-team-color: #FF0000;
            --away-team-color: #0066FF;
            --stat-card-bg: var(--secondary-color);
            --stat-card-border: var(--border-color);
            --table-header-bg: var(--primary-color);
            --table-header-text: white;
            --table-row-even: rgba(0, 0, 0, 0.02);
            --match-result-win: #4CAF50;
            --match-result-draw: #FFC107;
            --match-result-loss: #F44336;
            --pending-result: #cccccc;
            --investment-bg: linear-gradient(135deg, #FF6B35, #F7931E);
            --investment-text: white;
            --investment-shadow: rgba(255, 107, 53, 0.3);
        }
        
        /* Thème vert */
        .theme-green {
            --primary-color: #4CAF50;
            --chat-sent-bg: #4CAF50;
            --selection-color: rgba(76, 175, 80, 0.3);
            --admin-badge-bg: #4CAF50;
            --reply-preview-bg: rgba(76, 175, 80, 0.1);
            --reply-preview-border: #4CAF50;
            --reply-quote-bg: rgba(76, 175, 80, 0.15);
            --reply-quote-border: #4CAF50;
            --download-btn-bg: #4CAF50;
            --new-badge-bg: #4CAF50;
            --image-message-bg: rgba(76, 175, 80, 0.1);
            --selected-message-border: rgba(76, 175, 80, 0.7);
            --history-date-bg: rgba(76, 175, 80, 0.1);
            --history-date-text: #4CAF50;
            --card-accent: #4CAF50;
            --prediction-highlight-bg: rgba(76, 175, 80, 0.1);
            --prediction-highlight-text: #4CAF50;
            --table-header-bg: #4CAF50;
        }
        
        /* Thème rouge */
        .theme-red {
            --primary-color: #F44336;
            --chat-sent-bg: #F44336;
            --selection-color: rgba(244, 67, 54, 0.3);
            --admin-badge-bg: #F44336;
            --reply-preview-bg: rgba(244, 67, 54, 0.1);
            --reply-preview-border: #F44336;
            --reply-quote-bg: rgba(244, 67, 54, 0.15);
            --reply-quote-border: #F44336;
            --download-btn-bg: #F44336;
            --new-badge-bg: #F44336;
            --image-message-bg: rgba(244, 67, 54, 0.1);
            --selected-message-border: rgba(244, 67, 54, 0.7);
            --history-date-bg: rgba(244, 67, 54, 0.1);
            --history-date-text: #F44336;
            --card-accent: #F44336;
            --prediction-highlight-bg: rgba(244, 67, 54, 0.1);
            --prediction-highlight-text: #F44336;
            --table-header-bg: #F44336;
        }
        
        /* Thème orange */
        .theme-orange {
            --primary-color: #FF9800;
            --chat-sent-bg: #FF9800;
            --selection-color: rgba(255, 152, 0, 0.3);
            --admin-badge-bg: #FF9800;
            --reply-preview-bg: rgba(255, 152, 0, 0.1);
            --reply-preview-border: #FF9800;
            --reply-quote-bg: rgba(255, 152, 0, 0.15);
            --reply-quote-border: #FF9800;
            --download-btn-bg: #FF9800;
            --new-badge-bg: #FF9800;
            --image-message-bg: rgba(255, 152, 0, 0.1);
            --selected-message-border: rgba(255, 152, 0, 0.7);
            --history-date-bg: rgba(255, 152, 0, 0.1);
            --history-date-text: #FF9800;
            --card-accent: #FF9800;
            --prediction-highlight-bg: rgba(255, 152, 0, 0.1);
            --prediction-highlight-text: #FF9800;
            --table-header-bg: #FF9800;
        }

        .theme-purple {
            --primary-color: #9C27B0;
            --card-accent: #9C27B0;
            --prediction-highlight-bg: rgba(156, 39, 176, 0.1);
            --prediction-highlight-text: #9C27B0;
            --table-header-bg: #9C27B0;
        }

        .theme-teal {
            --primary-color: #009688;
            --card-accent: #009688;
            --prediction-highlight-bg: rgba(0, 150, 136, 0.1);
            --prediction-highlight-text: #009688;
            --table-header-bg: #009688;
        }

        .theme-indigo {
            --primary-color: #3F51B5;
            --card-accent: #3F51B5;
            --prediction-highlight-bg: rgba(63, 81, 181, 0.1);
            --prediction-highlight-text: #3F51B5;
            --table-header-bg: #3F51B5;
        }

        .theme-pink {
            --primary-color: #E91E63;
            --card-accent: #E91E63;
            --prediction-highlight-bg: rgba(233, 30, 99, 0.1);
            --prediction-highlight-text: #E91E63;
            --table-header-bg: #E91E63;
        }

        .theme-cyan {
            --primary-color: #00BCD4;
            --card-accent: #00BCD4;
            --prediction-highlight-bg: rgba(0, 188, 212, 0.1);
            --prediction-highlight-text: #00BCD4;
            --table-header-bg: #00BCD4;
        }

        .theme-lime {
            --primary-color: #CDDC39;
            --card-accent: #CDDC39;
            --prediction-highlight-bg: rgba(205, 220, 57, 0.1);
            --prediction-highlight-text: #CDDC39;
            --table-header-bg: #CDDC39;
        }

        .theme-amber {
            --primary-color: #FFC107;
            --card-accent: #FFC107;
            --prediction-highlight-bg: rgba(255, 193, 7, 0.1);
            --prediction-highlight-text: #FFC107;
            --table-header-bg: #FFC107;
        }

        .theme-deep-orange {
            --primary-color: #FF5722;
            --card-accent: #FF5722;
            --prediction-highlight-bg: rgba(255, 87, 34, 0.1);
            --prediction-highlight-text: #FF5722;
            --table-header-bg: #FF5722;
        }
        
        .dark {
            --bg-color: #181818;
            --text-color: #ffffff;
            --border-color: #3e4042;
            --secondary-color: #2c2c2c;
            --card-bg: #2c2c2c;
            --card-border: #404040;
            --shadow: rgba(0, 0, 0, 0.3);
            --chat-received-bg: #2c2c2c;
            --chat-sent-text: #ffffff;
            --selection-color: rgba(93, 92, 222, 0.4);
            --action-menu-bg: rgba(60, 60, 60, 0.95);
            --highlight-color: #FFEB3B;
            --blocked-color: #ff6b6b;
            --reaction-bg: rgba(40, 40, 40, 0.9);
            --reaction-shadow: rgba(0, 0, 0, 0.3);
            --group-icon-bg: #388E3C;
            --danger-color: #ff6b6b;
            --success-color: #66bb6a;
            --input-bg: #2c2c2c;
            --input-placeholder: #6c6c6c;
            --link-color: #2196F3;
            --admin-badge-text: white;
            --log-bg: rgba(20, 20, 20, 0.9);
            --log-info: #64B5F6;
            --log-warning: #FFD54F;
            --log-error: #FF8A80;
            --log-success: #81C784;
            --overlay-bg: rgba(0, 0, 0, 0.8);
            --event-bg: #2a2a2a;
            --event-border: #3e3e3e;
            --restricted-badge-bg: #FFC107;
            --restricted-badge-text: #000000;
            --side-menu-bg: #222222;
            --side-menu-active: #333333;
            --side-menu-hover: #2a2a2a;
            --log-panel-bg: #222222;
            --log-panel-border: #3e3e3e;
            --link-hover: #64B5F6;
            --admin-notif-bg: #2a2a2a;
            --admin-notif-border: #333333;
            --forecast-win-bg: rgba(76, 175, 80, 0.15);
            --forecast-loss-bg: rgba(244, 67, 54, 0.15);
            --forecast-pending-bg: rgba(255, 193, 7, 0.15);
            --comment-bg: #2a2a2a;
            --comment-border: #333333;
            --notification-dot: #FF4842;
            --warning-bg: rgba(255, 152, 0, 0.15);
            --warning-text: #FFA726;
            --image-message-bg: rgba(93, 92, 222, 0.15);
            --image-viewer-bg: rgba(0, 0, 0, 0.95);
            --selected-message-border: rgba(93, 92, 222, 0.8);
            --date-separator-bg: rgba(255, 255, 255, 0.1);
            --date-separator-text: #aaaaaa;
            --reply-preview-bg: rgba(93, 92, 222, 0.15);
            --reply-preview-text: var(--text-color);
            --deleted-message-bg: rgba(255, 255, 255, 0.05);
            --deleted-message-text: #888888;
            --action-bar-bg: #222222;
            --action-bar-text: #ffffff;
            --action-bar-border: #3e3e3e;
            --reply-quote-bg: rgba(93, 92, 222, 0.2);
            --group-info-bg: #222222;
            --group-info-border: #3e3e3e;
            --download-btn-text: white;
            --theme-selector-border: #444;
            --user-item-bg: #222222;
            --plan-active-bg: rgba(93, 92, 222, 0.15);
            --history-date-bg: rgba(93, 92, 222, 0.15);
            --prediction-highlight-bg: rgba(93, 92, 222, 0.2);
            --secrets-popup-content-bg: #222222;
            --coming-soon-bg: linear-gradient(135deg, #616161, #424242);
            --stat-card-bg: #2a2a2a;
            --stat-card-border: #404040;
            --table-row-even: rgba(255, 255, 255, 0.02);
            --pending-result: #555555;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            -webkit-tap-highlight-color: transparent;
            user-select: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            overflow-x: hidden;
            transition: all 0.3s ease;
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100vh;
            position: fixed;
            font-weight: 500;
            letter-spacing: -0.2px;
            user-select: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            -webkit-touch-callout: none;
            -webkit-user-drag: none;
            -khtml-user-drag: none;
            -moz-user-drag: none;
            -o-user-drag: none;
        }

        /* Header */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 60px;
            background-color: var(--bg-color);
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
            z-index: 100;
            box-shadow: 0 2px 10px var(--shadow);
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .back-btn, .menu-btn {
            width: 40px;
            height: 40px;
            border-radius: 20px;
            background-color: var(--secondary-color);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            color: var(--text-color);
        }

        .back-btn:hover, .menu-btn:hover {
            background-color: var(--primary-color);
            color: white;
        }

        .header-title {
            font-size: 20px;
            font-weight: bold;
            color: var(--primary-color);
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .action-btn {
            width: 40px;
            height: 40px;
            border-radius: 20px;
            background-color: var(--secondary-color);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            color: var(--text-color);
            position: relative;
        }

        .action-btn:hover {
            background-color: var(--primary-color);
            color: white;
        }

        .notification-dot {
            position: absolute;
            top: 2px;
            right: 2px;
            width: 8px;
            height: 8px;
            background-color: var(--notification-dot);
            border-radius: 50%;
            display: none;
        }
        
        .notification-dot.active {
            display: block;
        }

        /* Main Content - Fixed for scrolling */
        .main-content {
            position: fixed;
            top: 60px;
            left: 0;
            right: 0;
            bottom: 60px;
            overflow: hidden;
            background-color: var(--bg-color);
        }

        /* Sections - Fixed for scrolling */
        .section {
            display: none;
            height: 100%;
            overflow: hidden;
        }
        
        .section.active {
            display: flex;
            flex-direction: column;
        }

        /* Secrets Section Styles */
        .secrets-container {
            padding: 20px;
            overflow-y: auto;
            height: 100%;
            -webkit-overflow-scrolling: touch;
        }

        .secret-header {
            text-align: center;
            margin-bottom: 30px;
            padding: 30px 20px;
            background: var(--secret-bg);
            border-radius: 20px;
            color: var(--secret-text);
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2);
        }

        .secret-title {
            font-size: 28px;
            font-weight: bold;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }

        .secret-subtitle {
            font-size: 16px;
            opacity: 0.9;
            line-height: 1.4;
        }

        .promo-code-section {
            background: var(--promo-bg);
            color: var(--promo-text);
            padding: 25px;
            border-radius: 20px;
            text-align: center;
            margin-bottom: 30px;
            box-shadow: 0 8px 25px var(--promo-shadow);
            border: 3px solid #FFB300;
        }

        .promo-code-title {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 15px;
            text-transform: uppercase;
        }

        .promo-code-value {
            font-size: 32px;
            font-weight: bold;
            background: rgba(0, 0, 0, 0.1);
            padding: 15px 25px;
            border-radius: 15px;
            margin: 15px 0;
            letter-spacing: 3px;
            border: 2px dashed #FFB300;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .promo-code-value:hover {
            transform: scale(1.05);
            background: rgba(0, 0, 0, 0.2);
        }

        .promo-code-copy {
            font-size: 14px;
            opacity: 0.8;
            margin-top: 10px;
        }

        .deposit-requirement {
            background: rgba(255, 193, 7, 0.2);
            color: var(--warning-color);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 30px;
            border: 2px solid var(--warning-color);
        }

        .deposit-requirement-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .deposit-requirement-text {
            font-size: 16px;
            line-height: 1.4;
        }

        .benefits-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        .benefit-card {
            background: var(--card-bg);
            border: 2px solid var(--primary-color);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .benefit-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .benefit-icon {
            font-size: 48px;
            color: var(--primary-color);
            margin-bottom: 15px;
        }

        .benefit-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
            color: var(--primary-color);
        }

        .benefit-description {
            font-size: 14px;
            line-height: 1.5;
            color: var(--text-color);
            opacity: 0.8;
        }

        .cta-section {
            background: linear-gradient(135deg, var(--primary-color), #4a49c0);
            color: white;
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            margin-bottom: 20px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }

        .cta-title {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .cta-description {
            font-size: 16px;
            line-height: 1.5;
            margin-bottom: 25px;
            opacity: 0.9;
        }

        .cta-button {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 2px solid white;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            margin: 10px;
        }

        .cta-button:hover {
            background: white;
            color: var(--primary-color);
            transform: translateY(-2px);
        }

        /* Icegame Investment Section */
        .icegame-container {
            padding: 20px;
            overflow-y: auto;
            height: 100%;
            -webkit-overflow-scrolling: touch;
        }

        .icegame-header {
            text-align: center;
            margin-bottom: 30px;
            padding: 30px 20px;
            background: var(--investment-bg);
            border-radius: 20px;
            color: var(--investment-text);
            box-shadow: 0 8px 30px var(--investment-shadow);
        }

        .icegame-title {
            font-size: 28px;
            font-weight: bold;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }

        .icegame-subtitle {
            font-size: 16px;
            opacity: 0.9;
            line-height: 1.4;
        }

        .investment-section {
            background: var(--card-bg);
            border: 2px solid var(--primary-color);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .investment-title {
            font-size: 20px;
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .investment-content {
            font-size: 16px;
            line-height: 1.6;
            color: var(--text-color);
            margin-bottom: 20px;
        }

        .investment-steps {
            background: var(--secondary-color);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 25px;
        }

        .investment-step {
            display: flex;
            align-items: flex-start;
            margin-bottom: 15px;
            padding: 15px;
            background: var(--card-bg);
            border-radius: 10px;
            border-left: 4px solid var(--primary-color);
        }

        .investment-step:last-child {
            margin-bottom: 0;
        }

        .step-number {
            background: var(--primary-color);
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 15px;
            flex-shrink: 0;
        }

        .step-content {
            flex: 1;
        }

        .step-title {
            font-weight: bold;
            margin-bottom: 5px;
            color: var(--primary-color);
        }

        .step-description {
            font-size: 14px;
            line-height: 1.4;
            color: var(--text-color);
            opacity: 0.8;
        }

        .investment-warning {
            background: rgba(255, 152, 0, 0.1);
            border: 2px solid var(--warning-color);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            margin-bottom: 25px;
        }

        .warning-title {
            font-size: 18px;
            font-weight: bold;
            color: var(--warning-color);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .warning-text {
            font-size: 14px;
            line-height: 1.4;
            color: var(--text-color);
        }

        /* Forecast Cards Container - Fixed for scrolling */
        .forecasts-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
            padding: 20px;
            overflow-y: auto;
            height: 100%;
            -webkit-overflow-scrolling: touch;
        }

        .forecast-card {
            background-color: var(--card-bg);
            border: 1px solid var(--card-border);
            border-radius: 15px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 10px var(--shadow);
            flex-shrink: 0;
        }

        .forecast-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px var(--shadow);
        }

        .forecast-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .league-info {
            font-size: 12px;
            color: var(--inactive-text);
            background-color: var(--secondary-color);
            padding: 4px 8px;
            border-radius: 10px;
        }

        .forecast-status {
            font-size: 12px;
            font-weight: bold;
            padding: 4px 10px;
            border-radius: 15px;
        }

        .status-pending {
            background-color: rgba(255, 152, 0, 0.2);
            color: var(--warning-color);
        }

        .status-win {
            background-color: rgba(76, 175, 80, 0.2);
            color: var(--success-color);
        }

        .status-loss {
            background-color: rgba(244, 67, 54, 0.2);
            color: var(--danger-color);
        }

        .teams-container {
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
            margin-bottom: 15px;
            gap: 10px;
        }

        .team {
            display: flex;
            flex-direction: column;
            align-items: center;
            flex: 1;
            min-width: 0;
        }

        .team-logo {
            width: 60px;
            height: 60px;
            background: var(--secondary-color);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 8px;
            border: 3px solid var(--border-color);
            flex-shrink: 0;
            position: relative;
            overflow: hidden;
        }

        .team-logo img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 50%;
        }

        .team-logo i {
            font-size: 28px;
            color: var(--primary-color);
            z-index: 1;
        }

        .team-name {
            font-weight: bold;
            text-align: center;
            font-size: 13px;
            line-height: 1.3;
            max-width: 80px;
            word-wrap: break-word;
            overflow-wrap: break-word;
            hyphens: auto;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .forecast-vs {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 0 15px;
            flex-shrink: 0;
            min-width: 80px;
        }

        .vs-text {
            font-size: 32px;
            color: var(--text-color);
            font-weight: bold;
        }

        .forecast-time {
            font-size: 12px;
            color: var(--inactive-text);
            text-align: center;
        }

        /* Chart styles */
        .chart-container {
            background: var(--card-bg);
            border: 1px solid var(--card-border);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .chart-title {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 15px;
            color: var(--primary-color);
            text-align: center;
        }

        .chart-wrapper {
            position: relative;
            height: 300px;
            width: 100%;
        }

        /* Forecast Detail Page - Restructured */
        .forecast-detail {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--bg-color);
            z-index: 200;
            display: none;
            flex-direction: column;
        }

        .forecast-detail.active {
            display: flex;
        }

        /* Fixed header section with teams */
        .forecast-info-section {
            position: fixed;
            top: 60px;
            left: 0;
            right: 0;
            background-color: var(--bg-color);
            border-bottom: 1px solid var(--border-color);
            padding: 20px;
            z-index: 10;
            height: 200px;
        }

        .detail-teams {
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
            margin: 20px 0;
            gap: 15px;
        }

        .detail-team {
            display: flex;
            flex-direction: column;
            align-items: center;
            flex: 1;
            min-width: 0;
        }

        .detail-team-logo {
            width: 80px;
            height: 80px;
            background: var(--secondary-color);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 10px;
            border: 3px solid var(--border-color);
            flex-shrink: 0;
            position: relative;
            overflow: hidden;
        }

        .detail-team-logo img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 50%;
        }

        .detail-team-logo i {
            font-size: 40px;
            color: var(--primary-color);
            z-index: 1;
        }

        .detail-team-name {
            font-weight: bold;
            font-size: 16px;
            text-align: center;
            max-width: 100px;
            word-wrap: break-word;
            overflow-wrap: break-word;
            hyphens: auto;
            line-height: 1.3;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .detail-prediction {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 0 20px;
            flex-shrink: 0;
            min-width: 100px;
        }

        .detail-prediction-value {
            font-size: 24px;
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 10px;
            text-align: center;
            display: none;
        }

        .detail-forecast-status {
            font-size: 14px;
            font-weight: bold;
            padding: 6px 12px;
            border-radius: 20px;
            margin-bottom: 5px;
        }

        .detail-forecast-time {
            font-size: 12px;
            color: var(--inactive-text);
        }

        /* Scrollable content area */
        .detail-scrollable-content {
            margin-top: 260px;
            flex: 1;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            -webkit-overflow-scrolling: touch;
        }

        /* Tabs - occupent toute la largeur */
        .detail-tabs {
            display: flex;
            background-color: var(--secondary-color);
            margin: 0;
            border-radius: 0;
            padding: 4px 0;
            position: sticky;
            top: 0;
            z-index: 5;
            flex-shrink: 0;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            width: 100%;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .detail-tab {
            flex: 1;
            padding: 12px 8px;
            text-align: center;
            font-weight: bold;
            font-size: 11px;
            border-radius: 0;
            cursor: pointer;
            transition: all 0.3s ease;
            color: var(--inactive-text);
            white-space: nowrap;
            min-width: 80px;
            margin: 0 2px;
        }

        .detail-tab.active {
            background-color: var(--primary-color);
            color: white;
            border-radius: 8px;
        }

        /* Tab Content */
        .tab-content {
            padding: 20px;
            display: none;
            flex: 1;
        }

        .tab-content.active {
            display: block;
        }

        .analysis-section {
            background-color: var(--secondary-color);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .analysis-title {
            font-weight: bold;
            margin-bottom: 10px;
            color: var(--primary-color);
        }

        .analysis-content {
            font-size: 14px;
            line-height: 1.5;
            white-space: pre-line;
        }

        .prediction-highlight {
            background-color: var(--prediction-highlight-bg);
            color: var(--prediction-highlight-text);
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: bold;
        }

        /* Statistics Styles */
        .stats-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .stats-category {
            background: var(--stat-card-bg);
            border: 1px solid var(--stat-card-border);
            border-radius: 12px;
            padding: 15px;
        }

        .stats-category-title {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 15px;
            color: var(--primary-color);
            text-align: center;
        }

        .stats-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid var(--border-color);
        }

        .stats-row:last-child {
            border-bottom: none;
        }

        .stats-home {
            color: var(--home-team-color);
            font-weight: bold;
            width: 60px;
            text-align: center;
        }

        .stats-label {
            flex: 1;
            text-align: center;
            font-size: 13px;
            color: var(--text-color);
        }

        .stats-away {
            color: var(--away-team-color);
            font-weight: bold;
            width: 60px;
            text-align: center;
        }

        .form-display {
            display: flex;
            justify-content: center;
            gap: 3px;
            margin: 5px 0;
        }

        .form-badge {
            width: 20px;
            height: 20px;
            border-radius: 3px;
            color: white;
            font-size: 10px;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .form-badge.W {
            background-color: var(--match-result-win);
        }

        .form-badge.D {
            background-color: var(--match-result-draw);
        }

        .form-badge.L {
            background-color: var(--match-result-loss);
        }

        .form-badge.pending {
            background-color: var(--pending-result);
            color: var(--text-color);
        }

        /* Matches Styles */
        .matches-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .matches-section {
            background: var(--stat-card-bg);
            border: 1px solid var(--stat-card-border);
            border-radius: 12px;
            padding: 15px;
        }

        .matches-section-title {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 15px;
            color: var(--primary-color);
            text-align: center;
        }

        .match-item {
            background: var(--secondary-color);
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 10px;
            font-size: 12px;
        }

        .match-item:last-child {
            margin-bottom: 0;
        }

        .match-date {
            color: var(--inactive-text);
            margin-bottom: 5px;
        }

        .match-teams {
            font-weight: bold;
            margin-bottom: 3px;
        }

        .match-score {
            color: var(--primary-color);
            font-weight: bold;
        }

        /* H2H Styles */
        .h2h-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .h2h-empty {
            text-align: center;
            padding: 40px 20px;
            color: var(--inactive-text);
        }

        .h2h-empty i {
            font-size: 48px;
            margin-bottom: 15px;
            opacity: 0.5;
        }

        /* Classement Styles - Responsive */
        .ranking-container {
            overflow-x: visible;
            -webkit-overflow-scrolling: touch;
        }

        .ranking-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 11px;
            table-layout: fixed;
        }

        .ranking-table th {
            background: var(--table-header-bg);
            color: var(--table-header-text);
            padding: 8px 4px;
            text-align: center;
            font-weight: bold;
            border: 1px solid var(--border-color);
        }

        .ranking-table th:first-child {
            width: 15%;
        }

        .ranking-table th:nth-child(2) {
            width: 60%;
        }

        .ranking-table th:last-child {
            width: 25%;
        }

        .ranking-table td {
            padding: 6px 4px;
            text-align: center;
            border: 1px solid var(--border-color);
            word-wrap: break-word;
            overflow-wrap: break-word;
        }

        .ranking-table tr:nth-child(even) {
            background: var(--table-row-even);
        }

        .ranking-table tr.home-team {
            background-color: rgba(255, 0, 0, 0.1);
            font-weight: bold;
        }

        .ranking-table tr.away-team {
            background-color: rgba(0, 102, 255, 0.1);
            font-weight: bold;
        }

        .team-name-cell {
            text-align: left;
            padding-left: 6px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        /* Loading and Empty States */
        .loading-state {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 60px 20px;
            height: 100%;
        }

        .loading-spinner {
            font-size: 40px;
            color: var(--primary-color);
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: var(--inactive-text);
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .empty-state i {
            font-size: 60px;
            margin-bottom: 20px;
            opacity: 0.5;
        }

        .empty-state h3 {
            font-size: 18px;
            margin-bottom: 10px;
        }

        .empty-state p {
            font-size: 14px;
            line-height: 1.5;
        }

        /* Side menu */
        .side-menu {
            position: fixed;
            top: 0;
            left: -250px;
            height: 100%;
            width: 250px;
            background-color: var(--side-menu-bg);
            z-index: 1000;
            transition: left 0.3s ease;
            box-shadow: 2px 0 10px rgba(0,0,0,0.2);
            display: flex;
            flex-direction: column;
        }
        
        .side-menu.active {
            left: 0;
        }
        
        .side-menu-header {
            display: flex;
            align-items: center;
            padding: 20px 15px;
            border-bottom: none;
        }
        
        .side-menu-title {
            font-size: 20px;
            font-weight: bold;
            color: var(--primary-color);
            margin-left: 15px;
        }
        
        .side-menu-close {
            font-size: 20px;
            color: var(--text-color);
            cursor: pointer;
            padding: 5px;
            border-radius: 50%;
        }
        
        .side-menu-content {
            flex: 1;
            overflow-y: auto;
        }
        
        .side-menu-item {
            padding: 15px 20px;
            display: flex;
            align-items: center;
            cursor: pointer;
            transition: background-color 0.3s ease;
            position: relative;
        }
        
        .side-menu-item:hover {
            background-color: var(--side-menu-hover);
        }
        
        .side-menu-item.active {
            background-color: var(--side-menu-active);
        }
        
        .side-menu-item i {
            font-size: 20px;
            width: 30px;
            color: var(--primary-color);
        }
        
        .side-menu-text {
            margin-left: 15px;
            font-weight: 500;
        }

        .menu-badge {
            background: var(--warning-color);
            color: white;
            font-size: 8px;
            padding: 2px 6px;
            border-radius: 10px;
            font-weight: bold;
            margin-left: auto;
        }
        
        .side-menu-footer {
            margin-top: auto;
            border-top: 1px solid var(--border-color);
            padding-top: 10px;
        }
        
        .side-menu-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0,0,0,0.5);
            z-index: 999;
            display: none;
        }
        
        .side-menu-overlay.active {
            display: block;
        }

        /* Bottom Navigation - Fixed z-index and conditional display */
        .bottom-nav {
            background-color: var(--bg-color);
            border-top: 1px solid var(--border-color);
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: 60px;
            display: flex;
            z-index: 95;
            box-shadow: 0 -2px 10px var(--shadow);
        }

        .bottom-nav.hidden {
            display: none;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            flex: 1;
            color: var(--inactive-text);
            font-size: 10px;
            cursor: pointer;
            height: 100%;
            padding: 8px 0;
            position: relative;
            transition: all 0.3s ease;
        }

        .nav-item.active {
            color: var(--primary-color);
        }

        .nav-icon {
            font-size: 20px;
            margin-bottom: 4px;
            position: relative;
            z-index: 1;
        }

        .nav-badge {
            position: absolute;
            top: 4px;
            right: 15%;
            background: var(--warning-color);
            color: white;
            font-size: 8px;
            padding: 2px 6px;
            border-radius: 10px;
            font-weight: bold;
            z-index: 2;
        }

        /* Page Content Sections */
        .page-content {
            padding: 20px;
            overflow-y: auto;
            height: 100%;
            -webkit-overflow-scrolling: touch;
        }

        .page-header {
            text-align: center;
            margin-bottom: 30px;
            padding: 30px 20px;
            background: var(--primary-color);
            color: white;
            border-radius: 20px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2);
        }

        .page-title {
            font-size: 28px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .page-subtitle {
            font-size: 16px;
            opacity: 0.9;
            line-height: 1.4;
        }

        .content-section {
            background: var(--card-bg);
            border: 1px solid var(--card-border);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
        }

        .content-section h2 {
            color: var(--primary-color);
            font-size: 20px;
            margin-bottom: 15px;
            font-weight: bold;
        }

        .content-section h3 {
            color: var(--text-color);
            font-size: 16px;
            margin: 20px 0 10px;
            font-weight: bold;
        }

        .content-section p {
            line-height: 1.6;
            margin-bottom: 15px;
            color: var(--text-color);
        }

        .content-section ul {
            margin: 15px 0;
            padding-left: 20px;
        }

        .content-section li {
            margin-bottom: 8px;
            line-height: 1.5;
            color: var(--text-color);
        }

        /* Auth screen styles */
        .auth-screen {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--bg-color);
            z-index: 1000;
            display: flex;
            flex-direction: column;
            overflow-y: auto;
        }
        
        .auth-header {
            padding: 40px 0 20px;
            text-align: center;
        }
        
        .auth-logo {
            font-size: 50px;
            color: var(--primary-color);
            margin-bottom: 15px;
            animation: float 3s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        .auth-title {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 10px;
            color: var(--primary-color);
        }
        
        .auth-subtitle {
            font-size: 16px;
            color: var(--text-color);
            opacity: 0.8;
            margin-bottom: 20px;
            padding: 0 20px;
            text-align: center;
        }
        
        .auth-tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: none;
        }
        
        .auth-tab {
            flex: 1;
            text-align: center;
            padding: 15px 0;
            font-weight: bold;
            cursor: pointer;
            position: relative;
            color: var(--inactive-text);
            transition: color 0.3s, background-color 0.2s ease;
            text-decoration: none;
            border-bottom: none;
        }
        
        .auth-tab.active {
            color: var(--primary-color);
        }
        
        .auth-tab.active::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 25%;
            width: 50%;
            height: 3px;
            background-color: var(--primary-color);
            border-radius: 3px 3px 0 0;
            animation: slideIn 0.3s ease;
        }
        
        @keyframes slideIn {
            from { transform: scaleX(0); }
            to { transform: scaleX(1); }
        }
        
        .auth-form {
            padding: 20px;
            display: none;
            animation: fadeUp 0.5s ease;
        }
        
        @keyframes fadeUp {
            from { 
                opacity: 0;
                transform: translateY(20px);
            }
            to { 
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .auth-form.active {
            display: block;
        }
        
        .form-group {
            margin-bottom: 20px;
            position: relative;
        }
        
        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            font-size: 14px;
        }
        
        .form-input {
            width: 100%;
            padding: 15px;
            border-radius: 10px;
            border: 1px solid var(--border-color);
            background-color: var(--input-bg);
            font-size: 16px;
            color: var(--text-color);
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
            outline: none;
        }
        
        .form-input:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(93, 92, 222, 0.25);
        }
        
        .form-input::placeholder {
            color: var(--input-placeholder);
        }
        
        .form-error {
            color: var(--danger-color);
            font-size: 13px;
            margin-top: 6px;
            display: none;
            animation: shakeX 0.75s ease;
        }
        
        @keyframes shakeX {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-4px); }
            20%, 40%, 60%, 80% { transform: translateX(4px); }
        }
        
        .form-footer {
            margin-top: 30px;
            text-align: center;
        }
        
        .form-footer-text {
            margin-top: 15px;
            font-size: 14px;
            color: var(--text-color);
            opacity: 0.8;
        }
        
        .form-link {
            color: var(--link-color);
            text-decoration: none;
            font-weight: bold;
            transition: color 0.2s;
        }
        
        .form-link:hover {
            text-decoration: underline;
        }

        .button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 10px;
            padding: 12px;
            font-size: 16px;
            font-weight: bold;
            width: 100%;
            margin-top: 20px;
            cursor: pointer;
            transition: transform 0.15s ease, opacity 0.2s ease, background-color 0.2s ease;
            position: relative;
            overflow: hidden;
        }
        
        .button:active {
            transform: scale(0.98);
            opacity: 0.9;
        }
        
        .button:hover {
            background-color: #4a49c0;
        }

        .button:disabled {
            background-color: var(--border-color);
            color: var(--inactive-text);
            cursor: not-allowed;
        }
        
        .button.danger {
            background-color: var(--danger-color);
            color: white;
        }
        
        .button.danger:hover {
            background-color: #e53935;
        }

        .log-message {
            margin-top: 15px;
            padding: 12px;
            font-weight: bold;
            border-radius: 6px;
            white-space: pre-line;
            text-align: center;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
          
        .log-message.info {
            background: #d1ecf1;
            color: #0c5460;
        }
          
        .log-message.success {
            background: #d4edda;
            color: #155724;
        }
          
        .log-message.error {
            background: #f8d7da;
            color: #721c24;
        }

        .btn-loader {
            display: inline-block;
            width: 20px;
            height: 20px;
            margin-right: 8px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 0.8s linear infinite;
            vertical-align: middle;
        }
        
        .button.loading {
            pointer-events: none;
            opacity: 0.8;
        }
        
        .button.loading .btn-text {
            visibility: hidden;
        }
        
        .button.loading .btn-loader {
            position: absolute;
            top: 50%;
            left: 50%;
            margin-top: -10px;
            margin-left: -10px;
            visibility: visible;
        }

        .loading {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--bg-color);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 999;
        }
        
        .loading-spinner-main {
            font-size: 60px;
            color: var(--primary-color);
            animation: pulse 2s infinite, bounce 1.5s infinite;
            margin-bottom: 20px;
            text-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-20px); }
            60% { transform: translateY(-10px); }
        }

        .notification {
            position: fixed;
            bottom: 80px;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            opacity: 0;
            background-color: var(--bg-color);
            color: var(--text-color);
            padding: 12px 20px;
            border-radius: 15px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            font-weight: 500;
            z-index: 1000;
            max-width: 90%;
            text-align: center;
            line-height: 1.4;
            transition: opacity 0.3s ease, transform 0.3s ease;
            pointer-events: none;
        }

        .notification.show {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
            pointer-events: auto;
        }

        .notification.success {
            background-color: var(--bg-color);
            color: var(--success-color);
        }

        .notification.error {
            background-color: var(--bg-color);
            color: var(--danger-color);
        }

        .notification.info {
            background-color: var(--bg-color);
            color: var(--primary-color);
        }

        /* Admin styles needed */
        .admin-badge {
            display: inline-block;
            background-color: var(--admin-badge-bg);
            color: var(--admin-badge-text);
            font-size: 10px;
            padding: 2px 6px;
            border-radius: 10px;
            margin-left: 6px;
            font-weight: bold;
            text-transform: uppercase;
        }

        .profile-header {
            display: flex;
            align-items: flex-start;
            padding: 20px;
            border-bottom: none;
        }
        
        .profile-pic {
            width: 80px;
            height: 80px;
            background-color: var(--secondary-color);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 20px;
            position: relative;
            overflow: hidden;
            flex-shrink: 0;
            cursor: pointer;
            border: 3px solid var(--primary-color);
            transition: all 0.3s ease;
        }

        .profile-pic:hover {
            transform: scale(1.05);
        }
        
        .profile-pic img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            pointer-events: none;
        }
        
        .profile-pic i {
            font-size: 32px;
            color: var(--primary-color);
        }
        
        .profile-info {
            display: flex;
            flex-direction: column;
            flex: 1;
        }
        
        .profile-name {
            font-weight: bold;
            font-size: 20px;
            margin-bottom: 5px;
            display: flex;
            align-items: center;
        }
        
        .profile-email {
            color: #6b7280;
            font-size: 16px;
            margin-bottom: 5px;
        }
        
        .profile-status {
            color: #6b7280;
        }

        .settings-container {
            padding: 15px;
            overflow-y: auto;
            height: calc(100% - 140px);
        }

        .social-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
            padding: 0 15px;
            gap: 15px;
        }
        
        .social-button {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px 10px;
            border-radius: 15px;
            text-align: center;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            cursor: pointer;
            color: white;
            font-weight: bold;
            font-size: 16px;
            text-decoration: none;
        }
        
        .social-button:active {
            transform: scale(0.98);
        }
        
        .social-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
        }
        
        .social-button.whatsapp {
            background-color: var(--social-whatsapp);
        }
        
        .social-button.telegram {
            background-color: var(--social-telegram);
        }
        
        .social-button.youtube {
            background-color: var(--social-youtube);
        }

        .social-button .social-icon {
            font-size: 24px;
            margin-bottom: 8px;
        }

        .section-title {
            font-weight: bold;
            font-size: 18px;
            margin-bottom: 10px;
            text-decoration: none;
            border-bottom: none;
            padding: 0 16px; 
            margin: 15px 0;
        }

        /* Avatar Viewer Modal */
        .avatar-viewer-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--image-viewer-bg);
            z-index: 300;
            display: none;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }

        .avatar-viewer-modal.active {
            display: flex;
        }

        .avatar-viewer-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            max-width: 90%;
            max-height: 90%;
        }

        .avatar-viewer-image {
            width: 250px;
            height: 250px;
            border-radius: 50%;
            object-fit: cover;
            border: 4px solid var(--primary-color);
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .avatar-viewer-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
        }

        .avatar-viewer-btn {
            padding: 12px 24px;
            border-radius: 25px;
            font-weight: bold;
            cursor: pointer;
            border: none;
            font-size: 16px;
            transition: all 0.3s ease;
            min-width: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .avatar-viewer-btn:hover {
            transform: translateY(-2px);
        }

        .avatar-viewer-btn.edit {
            background-color: var(--primary-color);
            color: white;
        }

        .avatar-viewer-btn.edit:hover {
            background-color: #4a49c0;
        }

        .avatar-viewer-btn.close {
            background-color: rgba(255, 255, 255, 0.2);
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .avatar-viewer-btn.close:hover {
            background-color: rgba(255, 255, 255, 0.3);
        }

        /* Avatar Selector Modal */
        .avatar-selector-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 350;
            display: none;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .avatar-selector-modal.active {
            display: flex;
        }

        .avatar-modal-content {
            background-color: var(--bg-color);
            border-radius: 20px;
            padding: 30px;
            max-width: 400px;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
        }

        .avatar-modal-header {
            text-align: center;
            margin-bottom: 25px;
        }

        .avatar-modal-title {
            font-size: 22px;
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 10px;
        }

        .avatar-modal-subtitle {
            font-size: 14px;
            color: var(--inactive-text);
            line-height: 1.4;
        }

        .avatar-modal-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 25px;
        }

        .avatar-modal-option {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            cursor: pointer;
            position: relative;
            border: 3px solid var(--border-color);
            overflow: hidden;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: var(--secondary-color);
            justify-self: center;
        }

        .avatar-modal-option img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .avatar-modal-option:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .avatar-modal-option.active {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(var(--primary-color), 0.3);
            transform: scale(1.15);
        }

        .avatar-modal-option.active:after {
            content: '\f00c';
            font-family: 'Font Awesome 5 Free';
            font-weight: 900;
            position: absolute;
            bottom: -5px;
            right: -5px;
            background-color: var(--primary-color);
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            z-index: 3;
            border: 2px solid var(--bg-color);
        }

        .avatar-modal-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
        }

        .avatar-modal-button {
            padding: 12px 25px;
            border-radius: 10px;
            font-weight: bold;
            cursor: pointer;
            border: none;
            font-size: 14px;
            transition: all 0.3s ease;
            min-width: 100px;
        }

        .avatar-modal-cancel {
            background-color: var(--secondary-color);
            color: var(--text-color);
        }

        .avatar-modal-cancel:hover {
            background-color: var(--border-color);
        }

        .avatar-modal-save {
            background-color: var(--primary-color);
            color: white;
        }

        .avatar-modal-save:hover {
            background-color: #4a49c0;
        }

        .avatar-modal-save:disabled {
            background-color: var(--border-color);
            color: var(--inactive-text);
            cursor: not-allowed;
        }

        .avatar-loading {
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--inactive-text);
        }

        .avatar-loading i {
            font-size: 24px;
            animation: spin 1s linear infinite;
        }

        /* Other required styles but adapt to new layout */
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 90;
            display: none;
        }
        
        .overlay.active {
            display: block;
        }

        .confirmation-dialog {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: var(--bg-color);
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            width: 85%;
            max-width: 300px;
            padding: 20px;
            z-index: 150;
            display: none;
        }
        
        .confirmation-dialog.active {
            display: block;
        }
        
        .confirmation-title {
            font-weight: bold;
            font-size: 18px;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .confirmation-text {
            margin-bottom: 20px;
            text-align: center;
            line-height: 1.4;
        }
        
        .confirmation-buttons {
            display: flex;
            justify-content: space-between;
            gap: 10px;
        }
        
        .confirmation-button {
            padding: 10px 15px;
            border-radius: 6px;
            font-weight: bold;
            cursor: pointer;
            flex: 1;
            text-align: center;
        }
        
        .confirmation-cancel {
            background-color: var(--secondary-color);
            color: var(--text-color);
        }
        
        .confirmation-confirm {
            background-color: var(--primary-color);
            color: white;
        }
        
        .confirmation-delete {
            background-color: var(--danger-color);
            color: white;
        }

        /* Admin notification styles */
        .admin-notification {
            background-color: var(--bg-color);
            border-radius: 15px;
            margin: 10px 15px 20px;
            padding: 15px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            position: relative;
        }
        
        .admin-notification-header {
            color: var(--text-color);
            padding: 0 0 10px;
            font-weight: bold;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: none;
            margin-bottom: 10px;
        }
        
        .admin-notification-title {
            display: flex;
            align-items: center;
        }
        
        .admin-notification-title i {
            margin-right: 8px;
            color: var(--primary-color);
        }
        
        .admin-notification-content {
            padding: 5px 0;
            line-height: 1.4;
        }
        
        .admin-notification-footer {
            padding: 5px 0 0;
            font-size: 12px;
            color: var(--inactive-text);
            text-align: right;
            border-top: none;
            margin-top: 10px;
            padding-top: 8px;
        }

        .interface-sections {
            display: flex;
            flex-direction: column;
            gap: 20px;
            padding: 20px;
            overflow-y: auto;
            height: 100%;
        }

        .interface-section {
            background: linear-gradient(135deg, var(--secondary-color), rgba(var(--primary-color), 0.05));
            border-radius: 15px;
            padding: 20px;
            border: 1px solid rgba(var(--primary-color), 0.1);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease;
        }

        .interface-section:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.12);
        }
        
        .interface-title {
            font-weight: bold;
            margin-bottom: 15px;
            font-size: 18px;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .interface-title i {
            font-size: 20px;
        }

        .interface-subtitle {
            font-size: 13px;
            color: var(--inactive-text);
            margin-bottom: 15px;
            line-height: 1.4;
        }
        
        .theme-selector {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 12px;
            margin: 15px 0;
        }
        
        .theme-option {
            width: 100%;
            height: 70px;
            border-radius: 12px;
            cursor: pointer;
            position: relative;
            border: 2px solid var(--theme-selector-border);
            overflow: hidden;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        .theme-option:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        
        .theme-option.active {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(var(--primary-color), 0.3);
            transform: scale(1.1);
        }
        
        .theme-option.active:before {
            content: '\f00c';
            font-family: 'Font Awesome 5 Free';
            font-weight: 900;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 18px;
            text-shadow: 0 0 5px rgba(0,0,0,0.7);
            z-index: 3;
        }
        
        .theme-option.theme-blue {
            background: linear-gradient(135deg, #5D5CDE, #4a49c0);
        }
        
        .theme-option.theme-green {
            background: linear-gradient(135deg, #4CAF50, #388E3C);
        }
        
        .theme-option.theme-red {
            background: linear-gradient(135deg, #F44336, #d32f2f);
        }
        
        .theme-option.theme-orange {
            background: linear-gradient(135deg, #FF9800, #f57c00);
        }

        .theme-option.theme-purple {
            background: linear-gradient(135deg, #9C27B0, #7B1FA2);
        }

        .theme-option.theme-teal {
            background: linear-gradient(135deg, #009688, #00695C);
        }

        .theme-option.theme-indigo {
            background: linear-gradient(135deg, #3F51B5, #303F9F);
        }

        .theme-option.theme-pink {
            background: linear-gradient(135deg, #E91E63, #C2185B);
        }

        .theme-option.theme-cyan {
            background: linear-gradient(135deg, #00BCD4, #0097A7);
        }

        .theme-option.theme-lime {
            background: linear-gradient(135deg, #CDDC39, #AFB42B);
        }

        .theme-option.theme-amber {
            background: linear-gradient(135deg, #FFC107, #FF8F00);
        }

        .theme-option.theme-deep-orange {
            background: linear-gradient(135deg, #FF5722, #D84315);
        }
        
        .theme-label {
            margin-top: 8px;
            font-size: 10px;
            text-align: center;
            font-weight: 600;
            line-height: 1.2;
            color: var(--text-color);
            opacity: 0.8;
        }

        .setting-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: none;
            cursor: pointer;
        }
        
        .setting-icon {
            width: 36px;
            height: 36px;
            background-color: var(--secondary-color);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
        }
        
        .setting-row {
            display: flex;
            align-items: center;
            flex: 1;
        }
        
        .setting-label {
            font-weight: 500;
        }

        .switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 26px;
        }
        
        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 34px;
        }
        
        .slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        
        input:checked + .slider {
            background-color: var(--primary-color);
        }
        
        input:checked + .slider:before {
            transform: translateX(24px);
        }

        /* History styles */
        .history-date-header {
            background-color: var(--history-date-bg);
            color: var(--history-date-text);
            padding: 12px 20px;
            margin: 0 15px 15px;
            border-radius: 10px;
            font-weight: bold;
            text-align: center;
            font-size: 16px;
        }

        .history-category-section {
            margin-bottom: 25px;
        }

        .history-category-title {
            background-color: var(--secondary-color);
            padding: 10px 20px;
            margin: 0 15px 10px;
            border-radius: 8px;
            font-weight: bold;
            color: var(--primary-color);
            font-size: 14px;
            text-transform: uppercase;
        }

        .history-forecasts-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
            padding: 0 15px;
        }

        .history-forecast-item {
            background-color: var(--secondary-color);
            border-radius: 10px;
            padding: 15px;
            border-left: 4px solid var(--primary-color);
            opacity: 0.9;
            transform: scale(0.98);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .history-forecast-item:hover {
            transform: scale(1);
            opacity: 1;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .history-forecast-item .forecast-status.win {
            background-color: var(--forecast-win-bg);
            color: var(--success-color);
        }

        .history-forecast-item .forecast-status.loss {
            background-color: var(--forecast-loss-bg);
            color: var(--danger-color);
        }

        .history-forecast-item .forecast-status.pending {
            background-color: var(--forecast-pending-bg);
            color: var(--text-color);
        }

        /* Responsive - main content padding adjustment for menu sections */
        .main-content.menu-section {
            bottom: 0;
        }

        /* Responsive */
        @media (max-width: 480px) {
            .header {
                padding: 0 15px;
            }

            .teams-container {
                margin-bottom: 10px;
                gap: 8px;
            }

            .team-name, .detail-team-name {
                font-size: 12px;
            }

            .detail-scrollable-content {
                margin-top: 240px;
            }

            .forecast-info-section {
                height: 180px;
            }

            .detail-team-logo {
                width: 70px;
                height: 70px;
            }

            .team-logo {
                width: 50px;
                height: 50px;
            }

            .nav-icon {
                font-size: 18px;
            }

            .avatar-modal-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .avatar-viewer-image {
                width: 200px;
                height: 200px;
            }

            .avatar-viewer-buttons {
                flex-direction: column;
                width: 100%;
                max-width: 200px;
            }

            .benefits-grid {
                grid-template-columns: 1fr;
            }

            .secret-title {
                font-size: 24px;
            }

            .promo-code-value {
                font-size: 24px;
                letter-spacing: 2px;
            }

            .icegame-title {
                font-size: 24px;
            }

            .detail-tabs {
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
                margin: 0;
                padding: 4px 0;
            }

            .detail-tab {
                min-width: 60px;
                font-size: 10px;
                padding: 10px 6px;
            }

            .ranking-table {
                font-size: 10px;
            }

            .ranking-table th,
            .ranking-table td {
                padding: 4px 2px;
            }

            .stats-container {
                gap: 15px;
            }

            .stats-category {
                padding: 12px;
            }

            .matches-section {
                padding: 12px;
            }

            .match-item {
                padding: 10px;
                font-size: 11px;
            }

            .chart-wrapper {
                height: 250px;
            }
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading" class="loading" style="display: none;">
        <i class="fas fa-futbol loading-spinner-main"></i>
        <div style="font-weight: bold; font-size: 24px; color: var(--primary-color);">KING PRONOS</div>
        <div style="margin-top: 10px; color: #6b7280;">Chargement...</div>
    </div>

    <!-- Auth Screen -->
    <div id="auth-screen" class="auth-screen" style="display: none;">
        <div class="auth-header">
            <div class="auth-logo">
                <i class="fas fa-futbol"></i>
            </div>
            <h1 class="auth-title">KING PRONOS</h1>
            <p class="auth-subtitle">Pronostics sportifs avancés</p>
        </div>
        
        <div class="auth-tabs">
            <div class="auth-tab active" id="login-tab">Connexion</div>
            <div class="auth-tab" id="register-tab">Inscription</div>
        </div>
        
        <div id="login-form" class="auth-form active">
            <div class="form-group">
                <label class="form-label">Email</label>
                <input type="email" class="form-input" id="login-email" placeholder="Votre email">
                <div id="login-email-error" class="form-error">Veuillez entrer un email valide</div>
            </div>
            
            <div class="form-group">
                <label class="form-label">Mot de passe</label>
                <input type="password" class="form-input" id="login-password" placeholder="Votre mot de passe">
                <div id="login-password-error" class="form-error">Le mot de passe est obligatoire</div>
            </div>
            
            <div id="login-log" class="log-message" style="display:none;"></div>

            <div class="form-footer">
                <button class="button" id="loginBtn">
                    <span class="btn-loader" style="display:none;"></span>
                    <span class="btn-text">Se connecter</span>
                </button>
                <p class="form-footer-text">
                    Vous n'avez pas de compte ? <a href="#" class="form-link" id="goto-register">S'inscrire</a>
                </p>
            </div>
        </div>
        
        <div id="register-form" class="auth-form">
            <div class="form-group">
                <label class="form-label">Email</label>
                <input type="email" class="form-input" id="register-email" placeholder="Votre adresse email">
                <div id="register-email-error" class="form-error">Veuillez entrer un email valide</div>
            </div>
            
            <div class="form-group">
                <label class="form-label">Mot de passe</label>
                <input type="password" class="form-input" id="register-password" placeholder="Créez un mot de passe sécurisé">
                <div id="register-password-error" class="form-error">Le mot de passe doit contenir au moins 6 caractères</div>
            </div>
            
            <div class="form-group">
                <label class="form-label">Confirmer le mot de passe</label>
                <input type="password" class="form-input" id="register-confirm-password" placeholder="Confirmez votre mot de passe">
                <div id="register-confirm-password-error" class="form-error">Les mots de passe ne correspondent pas</div>
            </div>
            
            <div id="register-log" class="log-message" style="display:none;"></div>

            <div class="form-footer">
                <button class="button" id="registerBtn">
                    <span class="btn-loader" style="display:none;"></span>
                    <span class="btn-text">S'inscrire</span>
                </button>
                <p class="form-footer-text">
                    Vous avez déjà un compte ? <a href="#" class="form-link" id="goto-login">Se connecter</a>
                </p>
            </div>
        </div>
    </div>

    <!-- Side Menu -->
    <div class="side-menu" id="side-menu">
        <div class="side-menu-header">
            <div class="side-menu-close" id="side-menu-close">
                <i class="fas fa-times"></i>
            </div>
            <div class="side-menu-title">KING PRONOS</div>
        </div>
        <div class="side-menu-content">
            <div class="side-menu-item" id="menu-install">
                <i class="fas fa-download"></i>
                <div class="side-menu-text">Installer l'app</div>
            </div>
            <div class="side-menu-item" id="menu-secrets">
                <i class="fas fa-lock"></i>
                <div class="side-menu-text">Secrets</div>
            </div>
            <div class="side-menu-item" id="menu-icebet">
                <i class="fas fa-snowflake"></i>
                <div class="side-menu-text">ICEBET</div>
                <div class="menu-badge">Bientôt</div>
            </div>
            <div class="side-menu-item" id="menu-history">
                <i class="fas fa-history"></i>
                <div class="side-menu-text">Historique</div>
            </div>
            <div class="side-menu-item" id="menu-interface">
                <i class="fas fa-palette"></i>
                <div class="side-menu-text">Interface</div>
            </div>
        </div>
        <div class="side-menu-footer">
            <div class="side-menu-item" id="menu-terms">
                <i class="fas fa-file-alt"></i>
                <div class="side-menu-text">Conditions d'utilisation</div>
            </div>
            <div class="side-menu-item" id="menu-about">
                <i class="fas fa-info-circle"></i>
                <div class="side-menu-text">À propos</div>
            </div>
        </div>
    </div>
    
    <div class="side-menu-overlay" id="side-menu-overlay"></div>

    <!-- Avatar Viewer Modal -->
    <div class="avatar-viewer-modal" id="avatar-viewer-modal">
        <div class="avatar-viewer-content">
            <img class="avatar-viewer-image" id="avatar-viewer-image" src="" alt="Avatar">
            <div class="avatar-viewer-buttons">
                <button class="avatar-viewer-btn edit" id="avatar-edit-btn">
                    <i class="fas fa-edit"></i>
                    Modifier
                </button>
                <button class="avatar-viewer-btn close" id="avatar-viewer-close">
                    <i class="fas fa-times"></i>
                    Fermer
                </button>
            </div>
        </div>
    </div>

    <!-- Avatar Selector Modal -->
    <div class="avatar-selector-modal" id="avatar-selector-modal">
        <div class="avatar-modal-content">
            <div class="avatar-modal-header">
                <div class="avatar-modal-title">Choisissez votre avatar</div>
                <div class="avatar-modal-subtitle">Sélectionnez l'avatar qui vous représente le mieux</div>
            </div>
            <div class="avatar-modal-grid" id="avatar-modal-grid">
                <!-- Avatar options will be loaded here -->
            </div>
            <div class="avatar-modal-buttons">
                <button class="avatar-modal-button avatar-modal-cancel" id="avatar-modal-cancel">Annuler</button>
                <button class="avatar-modal-button avatar-modal-save" id="avatar-modal-save" disabled>Sauvegarder</button>
            </div>
        </div>
    </div>

    <!-- Header -->
    <div class="header">
        <div class="header-left">
            <button class="back-btn" id="back-btn" style="display: none;">
                <i class="fas fa-arrow-left"></i>
            </button>
            <button class="menu-btn" id="menu-btn">
                <i class="fas fa-bars"></i>
            </button>
            <div class="header-title" id="header-title">Pronostics</div>
        </div>
        <div class="header-actions">
            <button class="action-btn" id="events-btn">
                <i class="fas fa-bell"></i>
                <div class="notification-dot" id="events-notification-dot"></div>
            </button>
        </div>
    </div>

    <!-- Main Content -->
    <div class="main-content" id="main-content">
        <!-- Forecasts Section (unified pronostics) -->
        <div id="forecasts-section" class="section active">
            <div class="forecasts-container" id="forecasts-container">
                <!-- Loading state -->
                <div class="loading-state" id="loading-state">
                    <i class="fas fa-futbol loading-spinner"></i>
                    <h3>Chargement...</h3>
                    <p>Veuillez patienter</p>
                </div>
            </div>
        </div>

        <!-- Icegame Section -->
        <div id="icegame-section" class="section">
            <div class="icegame-container" id="icegame-container">
                <div class="icegame-header">
                    <div class="icegame-title">
                        <i class="fas fa-chart-line"></i>
                        ICEGAME
                        <i class="fas fa-coins"></i>
                    </div>
                    <div class="icegame-subtitle">
                        Stratégie d'investissement sportif quotidien
                    </div>
                </div>

                <div class="investment-section">
                    <div class="investment-title">
                        <i class="fas fa-lightbulb"></i>
                        Qu'est-ce que ICEGAME ?
                    </div>
                    <div class="investment-content">
                        ICEGAME est une stratégie d'investissement sportif innovante qui consiste à parier quotidiennement sur le match avec la plus forte probabilité de réussite, sélectionné par notre intelligence artificielle avancée.
                        <br><br>
                        Contrairement aux paris classiques, ICEGAME suit une approche disciplinée et méthodique pour maximiser vos gains sur le long terme.
                    </div>
                </div>

                <div class="investment-section">
                    <div class="investment-title">
                        <i class="fas fa-cogs"></i>
                        Comment ça fonctionne ?
                    </div>
                    <div class="investment-steps">
                        <div class="investment-step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <div class="step-title">Sélection IA</div>
                                <div class="step-description">Chaque jour, notre IA analyse des milliers de données pour identifier le match avec le meilleur potentiel de gain</div>
                            </div>
                        </div>
                        <div class="investment-step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <div class="step-title">Mise fixe</div>
                                <div class="step-description">Vous investissez toujours le même montant (ex: 1000 FCFA) sur le match sélectionné</div>
                            </div>
                        </div>
                        <div class="investment-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <div class="step-title">Croissance progressive</div>
                                <div class="step-description">Vos gains s'accumulent jour après jour grâce à la constance et la qualité des prédictions</div>
                            </div>
                        </div>
                        <div class="investment-step">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <div class="step-title">Réinvestissement</div>
                                <div class="step-description">Réinvestissez une partie de vos gains pour accélérer la croissance de votre capital</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="investment-section">
                    <div class="investment-title">
                        <i class="fas fa-chart-line"></i>
                        Avantages d'ICEGAME
                    </div>
                    <div class="benefits-grid">
                        <div class="benefit-card">
                            <div class="benefit-icon">
                                <i class="fas fa-robot"></i>
                            </div>
                            <div class="benefit-title">IA Performante</div>
                            <div class="benefit-description">
                                Notre intelligence artificielle analyse + de 500 critères par match pour garantir la meilleure sélection
                            </div>
                        </div>

                        <div class="benefit-card">
                            <div class="benefit-icon">
                                <i class="fas fa-target"></i>
                            </div>
                            <div class="benefit-title">Un Match/Jour</div>
                            <div class="benefit-description">
                                Stratégie simple et disciplinée : un seul match par jour pour éviter les pertes impulsives
                            </div>
                        </div>

                        <div class="benefit-card">
                            <div class="benefit-icon">
                                <i class="fas fa-shield-alt"></i>
                            </div>
                            <div class="benefit-title">Risque Contrôlé</div>
                            <div class="benefit-description">
                                Mise fixe quotidienne qui protège votre capital et assure une croissance progressive
                            </div>
                        </div>

                        <div class="benefit-card">
                            <div class="benefit-icon">
                                <i class="fas fa-calendar-day"></i>
                            </div>
                            <div class="benefit-title">Constance</div>
                            <div class="benefit-description">
                                Stratégie à long terme qui fonctionne grâce à la régularité et la patience
                            </div>
                        </div>
                    </div>
                </div>

                <div class="investment-warning">
                    <div class="warning-title">
                        <i class="fas fa-exclamation-triangle"></i>
                        Investissement Responsable
                    </div>
                    <div class="warning-text">
                        ICEGAME est une stratégie d'investissement qui nécessite de la discipline et de la patience. 
                        Ne jamais parier plus que ce que vous pouvez vous permettre de perdre. 
                        Les performances passées ne garantissent pas les résultats futurs.
                    </div>
                </div>

                <div id="icegame-daily-pick" style="margin-top: 30px;">
                    <!-- Le match du jour sera inséré ici -->
                </div>
            </div>
        </div>

        <!-- Secrets Section -->
        <div id="secrets-section" class="section">
            <div class="secrets-container">
                <div class="secret-header">
                    <div class="secret-title">
                        <i class="fas fa-crown"></i>
                        SECRETS EXCLUSIFS
                        <i class="fas fa-gem"></i>
                    </div>
                    <div class="secret-subtitle">
                        Découvrez les avantages secrets de 1XBET et AFROPARI avec notre code promo exclusif !
                    </div>
                </div>

                <div class="promo-code-section">
                    <div class="promo-code-title">🎯 Code Promo Exclusif</div>
                    <div class="promo-code-value" id="promo-code-display">ICEGAME</div>
                    <div class="promo-code-copy">👆 Cliquez pour copier le code</div>
                </div>

                <div class="deposit-requirement">
                    <div class="deposit-requirement-title">
                        <i class="fas fa-exclamation-triangle"></i>
                        Condition d'Activation
                    </div>
                    <div class="deposit-requirement-text">
                        Pour activer tous ces avantages exclusifs, un dépôt minimum de <strong>1000 FCFA</strong> est requis lors de votre inscription.
                    </div>
                </div>

                <div class="benefits-grid">
                    <div class="benefit-card">
                        <div class="benefit-icon">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <div class="benefit-title">Cotes Augmentées</div>
                        <div class="benefit-description">
                            Bénéficiez de cotes majorées jusqu'à +15% sur vos paris avec notre code exclusif
                        </div>
                    </div>

                    <div class="benefit-card">
                        <div class="benefit-icon">
                            <i class="fas fa-rocket"></i>
                        </div>
                        <div class="benefit-title">Retraits Ultra-Rapides</div>
                        <div class="benefit-description">
                            Retraits instantanés en moins de 15 minutes, 24h/24 et 7j/7
                        </div>
                    </div>

                    <div class="benefit-card">
                        <div class="benefit-icon">
                            <i class="fas fa-gift"></i>
                        </div>
                        <div class="benefit-title">Bonus de Bienvenue</div>
                        <div class="benefit-description">
                            Jusqu'à 200€ de bonus sur votre premier dépôt + paris gratuits
                        </div>
                    </div>

                    <div class="benefit-card">
                        <div class="benefit-icon">
                            <i class="fas fa-crown"></i>
                        </div>
                        <div class="benefit-title">Statut VIP</div>
                        <div class="benefit-description">
                            Accès prioritaire au service client VIP et promotions exclusives
                        </div>
                    </div>

                    <div class="benefit-card">
                        <div class="benefit-icon">
                            <i class="fas fa-percentage"></i>
                        </div>
                        <div class="benefit-title">Cashback Hebdomadaire</div>
                        <div class="benefit-description">
                            Récupérez jusqu'à 10% de vos pertes chaque semaine automatiquement
                        </div>
                    </div>
                </div>

                <div class="cta-section">
                    <div class="cta-title">🎰 Prêt à Doubler Vos Gains ?</div>
                    <div class="cta-description">
                        Rejoignez plus de 400 000 parieurs qui utilisent déjà ces plateformes pour maximiser leurs profits. 
                        Inscription en 2 minutes, premier bonus immédiat !
                    </div>
                    <a href="https://reffpa.com/L?tag=d_4544971m_1599c_&site=4544971&ad=1599" target="_blank" class="cta-button">
                        🚀 1XBET - S'INSCRIRE
                    </a>
                    <a href="https://afropari.com/?reg=af45789" target="_blank" class="cta-button">
                        🌟 AFROPARI - S'INSCRIRE
                    </a>
                </div>

                <div style="background: var(--secondary-color); padding: 20px; border-radius: 15px; text-align: center; margin-top: 20px;">
                    <div style="font-size: 14px; color: var(--inactive-text); margin-bottom: 10px;">
                        💡 <strong>Conseil Pro :</strong> Utilisez le code <strong>ICEGAME</strong> lors de votre inscription pour débloquer tous les avantages secrets
                    </div>
                    <div style="font-size: 12px; color: var(--inactive-text);">
                        ⚠️ Offre limitée dans le temps • Réservée aux nouveaux membres
                    </div>
                </div>
            </div>
        </div>

        <!-- Profile Section -->
        <div id="profile-section" class="section">
            <div style="height: 100%; overflow-y: auto;">
                <div class="profile-header">
                    <div class="profile-pic" id="profile-pic">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="profile-info">
                        <div class="profile-name" id="profile-name">
                            <span id="profile-name-text">Utilisateur</span>
                            <span class="admin-badge" id="admin-badge" style="display: none;">Admin</span>
                        </div>
                        <div class="profile-email" id="profile-email">user@example.com</div>
                        <div class="profile-status">En ligne</div>
                    </div>
                </div>
                
                <div class="section-title">Paramètres</div>
                
                <div class="settings-container">
                    <div class="section-title">Nous rejoindre</div>
                    
                    <div class="social-buttons">
                        <a href="https://whatsapp.com/channel/0029Vb6eoNkATRSqdUT76Y3Y" target="_blank" rel="noopener noreferrer" class="social-button whatsapp">
                            <i class="fab fa-whatsapp social-icon"></i>
                            WhatsApp
                        </a>
                        <a href="https://t.me/parialliance" target="_blank" rel="noopener noreferrer" class="social-button telegram">
                            <i class="fab fa-telegram social-icon"></i>
                            Telegram
                        </a>
                        <a href="https://youtube.com/@parialliance?si=MMQ8MwI-XZNK7SiG" target="_blank" rel="noopener noreferrer" class="social-button youtube">
                            <i class="fab fa-youtube social-icon"></i>
                            YouTube
                        </a>
                    </div>
                    
                    <button id="logout-btn" class="button">Se déconnecter</button>
                    <button id="delete-account-btn" class="button danger" style="margin-top: 15px;">Supprimer mon compte</button>
                </div>
            </div>
        </div>

        <!-- Events Section -->
        <div id="events-section" class="section">
            <div id="events-list" style="height: 100%; overflow-y: auto; padding: 10px;">
                <div class="empty-state">
                    <i class="fas fa-bell"></i>
                    <div class="empty-state-title">Aucun événement</div>
                    <div class="empty-state-text">Les événements apparaîtront ici</div>
                </div>
            </div>
        </div>

        <!-- Interface Section -->
        <div id="interface-section" class="section">
            <div class="interface-sections">
                <div class="interface-section">
                    <div class="interface-title">
                        <i class="fas fa-palette"></i>
                        Thème de couleur
                    </div>
                    <div class="interface-subtitle">
                        Personnalisez l'apparence de l'application avec une large gamme de couleurs
                    </div>
                    <div class="theme-selector">
                        <div class="theme-option theme-blue active" data-theme="default">
                            <div class="theme-label">Bleu</div>
                        </div>
                        <div class="theme-option theme-green" data-theme="green">
                            <div class="theme-label">Vert</div>
                        </div>
                        <div class="theme-option theme-red" data-theme="red">
                            <div class="theme-label">Rouge</div>
                        </div>
                        <div class="theme-option theme-orange" data-theme="orange">
                            <div class="theme-label">Orange</div>
                        </div>
                        <div class="theme-option theme-purple" data-theme="purple">
                            <div class="theme-label">Violet</div>
                        </div>
                        <div class="theme-option theme-teal" data-theme="teal">
                            <div class="theme-label">Turquoise</div>
                        </div>
                        <div class="theme-option theme-indigo" data-theme="indigo">
                            <div class="theme-label">Indigo</div>
                        </div>
                        <div class="theme-option theme-pink" data-theme="pink">
                            <div class="theme-label">Rose</div>
                        </div>
                        <div class="theme-option theme-cyan" data-theme="cyan">
                            <div class="theme-label">Cyan</div>
                        </div>
                        <div class="theme-option theme-lime" data-theme="lime">
                            <div class="theme-label">Lime</div>
                        </div>
                        <div class="theme-option theme-amber" data-theme="amber">
                            <div class="theme-label">Ambre</div>
                        </div>
                        <div class="theme-option theme-deep-orange" data-theme="deep-orange">
                            <div class="theme-label">Orange Foncé</div>
                        </div>
                    </div>
                </div>
                
                <div class="interface-section">
                    <div class="interface-title">
                        <i class="fas fa-moon"></i>
                        Mode d'affichage
                    </div>
                    <div class="interface-subtitle">
                        Basculer entre le mode clair et sombre selon vos préférences
                    </div>
                    <div class="setting-item">
                        <div class="setting-row">
                            <div class="setting-icon">
                                <i class="fas fa-moon" style="color: var(--primary-color);"></i>
                            </div>
                            <div class="setting-label">Mode sombre</div>
                        </div>
                        <label class="switch">
                            <input type="checkbox" id="dark-toggle">
                            <span class="slider"></span>
                        </label>
                    </div>
                </div>
            </div>
        </div>

        <!-- History Section -->
        <div id="history-section" class="section">
            <div style="height: 100%; overflow-y: auto; padding: 10px 0;">
                <div id="history-content">
                    <!-- History content will be loaded here -->
                </div>
            </div>
        </div>

        <!-- Terms Section -->
        <div id="terms-section" class="section">
            <div class="page-content">
                <div class="page-header">
                    <div class="page-title">Conditions d'utilisation</div>
                    <div class="page-subtitle">Veuillez lire attentivement ces conditions avant d'utiliser KING PRONOS</div>
                </div>

                <div class="content-section">
                    <h2>1. Acceptation des conditions</h2>
                    <p>En utilisant KING PRONOS, vous acceptez pleinement et sans réserve les présentes conditions d'utilisation. Si vous n'acceptez pas ces conditions, veuillez ne pas utiliser notre application.</p>
                </div>

                <div class="content-section">
                    <h2>2. Description du service</h2>
                    <p>KING PRONOS est une application de pronostics sportifs qui fournit des analyses et des prédictions basées sur des données statistiques et des algorithmes d'intelligence artificielle.</p>
                    <h3>Services proposés :</h3>
                    <ul>
                        <li>Pronostics sportifs quotidiens</li>
                        <li>Analyses statistiques détaillées</li>
                        <li>Historique des matchs et confrontations</li>
                        <li>Classements et données de performance</li>
                        <li>Analyses IA avancées</li>
                        <li>Stratégie d'investissement ICEGAME</li>
                    </ul>
                </div>

                <div class="content-section">
                    <h2>3. Utilisation responsable</h2>
                    <h3>Avertissement important :</h3>
                    <ul>
                        <li>Les pronostics fournis sont à des fins de divertissement et d'information uniquement</li>
                        <li>Nous ne garantissons aucun résultat financier ou gain</li>
                        <li>Les paris sportifs peuvent être addictifs et entraîner des pertes financières</li>
                        <li>Pariez uniquement ce que vous pouvez vous permettre de perdre</li>
                        <li>Il est interdit aux mineurs (moins de 18 ans) d'utiliser nos services</li>
                        <li>ICEGAME est une stratégie d'investissement qui nécessite discipline et patience</li>
                    </ul>
                </div>

                <div class="content-section">
                    <h2>4. Responsabilités et limitations</h2>
                    <h3>Limitation de responsabilité :</h3>
                    <ul>
                        <li>KING PRONOS décline toute responsabilité en cas de pertes financières</li>
                        <li>L'utilisateur est seul responsable de ses décisions de paris</li>
                        <li>Nous ne sommes pas responsables des erreurs ou omissions dans les données</li>
                        <li>L'exactitude des pronostics n'est pas garantie</li>
                        <li>Les stratégies d'investissement proposées ne garantissent pas de gains</li>
                    </ul>
                </div>

                <div class="content-section">
                    <h2>5. Utilisation du compte</h2>
                    <h3>Règles d'utilisation :</h3>
                    <ul>
                        <li>Un seul compte par utilisateur est autorisé</li>
                        <li>Il est interdit de partager votre compte avec des tiers</li>
                        <li>Vous êtes responsable de la sécurité de votre mot de passe</li>
                        <li>Toute activité suspecte peut entraîner la suspension du compte</li>
                    </ul>
                </div>

                <div class="content-section">
                    <h2>6. Propriété intellectuelle</h2>
                    <p>Tous les contenus de l'application (textes, images, logos, analyses, algorithmes) sont protégés par les droits d'auteur et appartiennent à KING PRONOS.</p>
                    <h3>Interdictions :</h3>
                    <ul>
                        <li>Reproduction non autorisée du contenu</li>
                        <li>Distribution commerciale des pronostics</li>
                        <li>Ingénierie inverse des algorithmes</li>
                        <li>Utilisation des données à des fins commerciales</li>
                    </ul>
                </div>

                <div class="content-section">
                    <h2>7. Protection des données</h2>
                    <p>Nous nous engageons à protéger vos données personnelles conformément aux réglementations en vigueur.</p>
                    <h3>Données collectées :</h3>
                    <ul>
                        <li>Adresse email pour l'authentification</li>
                        <li>Préférences d'utilisation</li>
                        <li>Statistiques d'usage anonymisées</li>
                    </ul>
                </div>

                <div class="content-section">
                    <h2>8. Modifications des conditions</h2>
                    <p>Nous nous réservons le droit de modifier ces conditions d'utilisation à tout moment. Les utilisateurs seront informés des changements majeurs par notification dans l'application.</p>
                </div>

                <div class="content-section">
                    <h2>9. Résiliation</h2>
                    <p>Nous nous réservons le droit de suspendre ou de résilier l'accès à nos services en cas de violation de ces conditions d'utilisation.</p>
                </div>

                <div class="content-section">
                    <h2>10. Contact</h2>
                    <p>Pour toute question concernant ces conditions d'utilisation, vous pouvez nous contacter via nos canaux officiels (WhatsApp, Telegram, YouTube).</p>
                    <p><strong>Dernière mise à jour :</strong> Janvier 2025</p>
                </div>
            </div>
        </div>

        <!-- About Section -->
        <div id="about-section" class="section">
            <div class="page-content">
                <div class="page-header">
                    <div class="page-title">À propos de KING PRONOS</div>
                    <div class="page-subtitle">Découvrez notre mission, nos fonctionnalités et notre technologie</div>
                </div>

                <div class="content-section">
                    <h2>Notre Mission</h2>
                    <p>KING PRONOS a pour mission de démocratiser l'accès aux analyses sportives avancées en fournissant aux passionnés de sport des prédictions fiables basées sur l'intelligence artificielle et des données statistiques approfondies.</p>
                    <p>Nous croyons que chaque amateur de sport mérite d'avoir accès à des outils d'analyse professionnels pour mieux comprendre et apprécier les performances sportives.</p>
                </div>

                <div class="content-section">
                    <h2>Fonctionnalités Principales</h2>
                    <h3>🎯 Pronostics Avancés</h3>
                    <ul>
                        <li>Prédictions quotidiennes basées sur l'IA</li>
                        <li>Analyses multi-critères (forme, statistiques, contexte)</li>
                        <li>Recommandations personnalisées</li>
                    </ul>

                    <h3>📊 Analyses Statistiques</h3>
                    <ul>
                        <li>Statistiques détaillées des équipes</li>
                        <li>Graphiques interactifs de performance</li>
                        <li>Comparaisons historiques</li>
                        <li>Analyse de la forme récente</li>
                    </ul>

                    <h3>🏆 Données Complètes</h3>
                    <ul>
                        <li>Historique complet des matchs</li>
                        <li>Confrontations directes (H2H)</li>
                        <li>Classements en temps réel</li>
                        <li>Contexte des compétitions</li>
                    </ul>

                    <h3>🤖 Intelligence Artificielle</h3>
                    <ul>
                        <li>Algorithmes d'apprentissage automatique</li>
                        <li>Analyses prédictives avancées</li>
                        <li>Mise à jour continue des modèles</li>
                        <li>Intégration de multiples sources de données</li>
                    </ul>

                    <h3>💰 ICEGAME - Stratégie d'Investissement</h3>
                    <ul>
                        <li>Sélection IA quotidienne du meilleur match</li>
                        <li>Stratégie de mise fixe disciplinée</li>
                        <li>Approche d'investissement à long terme</li>
                        <li>Gestion des risques optimisée</li>
                    </ul>

                    <h3>📱 Interface Moderne</h3>
                    <ul>
                        <li>Design responsive et intuitif</li>
                        <li>Thèmes personnalisables</li>
                        <li>Mode sombre/clair adaptatif</li>
                        <li>Navigation fluide et rapide</li>
                    </ul>
                </div>

                <div class="content-section">
                    <h2>Technologie et Innovation</h2>
                    <h3>Architecture Technique</h3>
                    <p>KING PRONOS utilise une architecture moderne basée sur :</p>
                    <ul>
                        <li><strong>Frontend :</strong> HTML5, CSS3, JavaScript ES6+</li>
                        <li><strong>UI Framework :</strong> Design responsive adaptatif</li>
                        <li><strong>Backend :</strong> Firebase (authentification, base de données)</li>
                        <li><strong>IA :</strong> Algorithmes propriétaires d'analyse prédictive</li>
                        <li><strong>Données :</strong> APIs sportives multiples et bases de données spécialisées</li>
                    </ul>

                    <h3>Sources de Données</h3>
                    <ul>
                        <li>Statistiques officielles des ligues</li>
                        <li>Données de performance en temps réel</li>
                        <li>Historiques de matchs étendus</li>
                        <li>Informations contextuelles (météo, blessures, etc.)</li>
                    </ul>
                </div>

                <div class="content-section">
                    <h2>Fonctionnalités à Venir</h2>
                    <h3>❄️ ICEBET</h3>
                    <p>Un système de recommandations avancé intégrant des partenariats avec des plateformes de paris légales et régulées.</p>

                    <h3>📈 Analyses Avancées</h3>
                    <ul>
                        <li>Prédictions à long terme</li>
                        <li>Analyses de marchés spécialisés</li>
                        <li>Alertes personnalisées</li>
                        <li>Rapports détaillés exportables</li>
                    </ul>

                    <h3>💼 Outils d'Investissement</h3>
                    <ul>
                        <li>Calculateur de bankroll</li>
                        <li>Suivi de performance personnalisé</li>
                        <li>Stratégies de mise avancées</li>
                        <li>Analyses de rentabilité</li>
                    </ul>
                </div>

                <div class="content-section">
                    <h2>Équipe et Valeurs</h2>
                    <h3>Notre Équipe</h3>
                    <p>KING PRONOS est développé par une équipe passionnée de développeurs, data scientists et experts sportifs dédiés à l'innovation dans l'analyse sportive.</p>

                    <h3>Nos Valeurs</h3>
                    <ul>
                        <li><strong>Transparence :</strong> Clarté dans nos méthodes et résultats</li>
                        <li><strong>Innovation :</strong> Utilisation des dernières technologies</li>
                        <li><strong>Responsabilité :</strong> Promotion du jeu responsable</li>
                        <li><strong>Qualité :</strong> Excellence dans l'expérience utilisateur</li>
                        <li><strong>Communauté :</strong> Construction d'une communauté engagée</li>
                    </ul>
                </div>

                <div class="content-section">
                    <h2>Communauté et Support</h2>
                    <h3>Rejoignez notre communauté</h3>
                    <p>Connectez-vous avec d'autres passionnés de sport et accédez à des contenus exclusifs :</p>
                    <ul>
                        <li><strong>WhatsApp :</strong> Analyses quotidiennes et discussions</li>
                        <li><strong>Telegram :</strong> Notifications instantanées</li>
                        <li><strong>YouTube :</strong> Analyses vidéo détaillées</li>
                    </ul>

                    <h3>Support Technique</h3>
                    <p>Notre équipe de support est disponible pour vous aider via nos canaux communautaires. Nous nous efforçons de répondre rapidement à toutes les questions et suggestions.</p>
                </div>

                <div class="content-section">
                    <h2>Informations Techniques</h2>
                    <ul>
                        <li><strong>Version Actuelle :</strong> 3.8.1</li>
                        <li><strong>Dernière Mise à Jour :</strong> Janvier 2025</li>
                        <li><strong>Compatibilité :</strong> Tous navigateurs modernes</li>
                        <li><strong>Installation :</strong> Progressive Web App (PWA)</li>
                        <li><strong>Stockage :</strong> Cloud sécurisé Firebase</li>
                    </ul>
                    
                    <p><strong>© 2025 KING PRONOS</strong> - Tous droits réservés. Application développée avec passion pour la communauté sportive francophone.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Forecast Detail Page - Restructured and Fixed -->
    <div class="forecast-detail" id="forecast-detail">
        <div class="header">
            <div class="header-left">
                <button class="back-btn" id="detail-back-btn">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <div class="header-title" id="detail-header-title">Détails du pronostic</div>
            </div>
            <div class="header-actions">
                <button class="action-btn" id="favorite-btn">
                    <i class="fas fa-star"></i>
                </button>
            </div>
        </div>

        <!-- Fixed header section with teams -->
        <div class="forecast-info-section">
            <div class="league-info" id="detail-league">Ligue 1 • Journée 16</div>
            
            <div class="detail-teams">
                <div class="detail-team">
                    <div class="detail-team-logo" id="detail-home-logo">
                        <i class="fas fa-futbol"></i>
                    </div>
                    <div class="detail-team-name" id="detail-home-team">Équipe Domicile</div>
                </div>
                
                <div class="detail-prediction">
                    <div class="detail-prediction-value" id="detail-prediction" style="display: none;">1X</div>
                    <div class="detail-forecast-status status-pending" id="detail-status">À venir</div>
                    <div class="detail-forecast-time" id="detail-time">29.06.2025 10:30</div>
                </div>
                
                <div class="detail-team">
                    <div class="detail-team-logo" id="detail-away-logo">
                        <i class="fas fa-futbol"></i>
                    </div>
                    <div class="detail-team-name" id="detail-away-team">Équipe Extérieur</div>
                </div>
            </div>
        </div>

        <!-- Scrollable content area -->
        <div class="detail-scrollable-content">
            <!-- Tabs -->
            <div class="detail-tabs">
                <div class="detail-tab active" data-tab="prediction">Prédiction</div>
                <div class="detail-tab" data-tab="statistics">Statistiques</div>
                <div class="detail-tab" data-tab="matches">Matchs</div>
                <div class="detail-tab" data-tab="h2h">H2H</div>
                <div class="detail-tab" data-tab="analysis">Analyse IA</div>
                <div class="detail-tab" data-tab="ranking">Classement</div>
            </div>

            <!-- Tab Contents -->
            <div class="tab-content active" id="prediction-content">
                <div class="analysis-section">
                    <div class="analysis-title">Prédiction recommandée</div>
                    <div class="analysis-content" id="prediction-analysis">
                        Cette prédiction est basée sur une analyse approfondie des données historiques, 
                        de la forme récente des équipes et des statistiques avancées.
                    </div>
                </div>
            </div>

            <div class="tab-content" id="statistics-content">
                <div class="stats-container">
                    <!-- Stats will be populated here -->
                </div>
            </div>

            <div class="tab-content" id="matches-content">
                <div class="matches-container">
                    <!-- Matches will be populated here -->
                </div>
            </div>

            <div class="tab-content" id="h2h-content">
                <div class="h2h-container">
                    <!-- H2H will be populated here -->
                </div>
            </div>

            <div class="tab-content" id="analysis-content">
                <div class="analysis-section">
                    <div class="analysis-title">Analyse de l'IA</div>
                    <div class="analysis-content" id="ai-analysis-content">
                        Analyse en cours de chargement...
                    </div>
                </div>
            </div>

            <div class="tab-content" id="ranking-content">
                <div class="ranking-container">
                    <!-- Ranking table will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Bottom Navigation -->
    <div class="bottom-nav" id="bottom-nav">
        <div class="nav-item active" data-section="forecasts">
            <i class="nav-icon fas fa-futbol"></i>
            <span>Pronostics</span>
        </div>
        <div class="nav-item" data-section="icegame">
            <i class="nav-icon fas fa-chart-line"></i>
            <span>Icegame</span>
        </div>
        <div class="nav-item" data-section="profile">
            <i class="nav-icon fas fa-user"></i>
            <span>Profil</span>
        </div>
    </div>

    <!-- Confirmation Dialogs -->
    <div id="logout-confirmation" class="confirmation-dialog">
        <div class="confirmation-title">Se déconnecter ?</div>
        <div class="confirmation-text">Voulez-vous vraiment vous déconnecter de KING PRONOS ?</div>
        <div class="confirmation-buttons">
            <div class="confirmation-button confirmation-cancel" id="logout-cancel">Annuler</div>
            <div class="confirmation-button confirmation-confirm" id="logout-confirm">Déconnecter</div>
        </div>
    </div>

    <div id="delete-account-confirmation" class="confirmation-dialog">
        <div class="confirmation-title">Supprimer votre compte ?</div>
        <div class="confirmation-text">ATTENTION : Cette action est définitive et irréversible. Toutes vos données seront supprimées.</div>
        <div class="confirmation-buttons">
            <div class="confirmation-button confirmation-cancel" id="delete-account-cancel">Annuler</div>
            <div class="confirmation-button confirmation-delete" id="delete-account-confirm">Supprimer</div>
        </div>
    </div>

    <div id="overlay" class="overlay"></div>
    <div class="notification" id="notification"></div>

    <!-- Service Worker Script -->
    <script>
        // Service Worker
        const SW_VERSION = '3.8.1';
        const CACHE_NAME = `kingpronos-v${SW_VERSION}`;
        const urlsToCache = [
            '/',
            '/manifest.json',
            'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css',
            'https://cdn.jsdelivr.net/npm/chart.js',
            'https://www.gstatic.com/firebasejs/11.7.3/firebase-app.js',
            'https://www.gstatic.com/firebasejs/11.7.3/firebase-auth.js',
            'https://www.gstatic.com/firebasejs/11.7.3/firebase-firestore.js'
        ];

        // Enregistrer le service worker
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                const swCode = `
                    const CACHE_NAME = '${CACHE_NAME}';
                    const urlsToCache = ${JSON.stringify(urlsToCache)};

                    self.addEventListener('install', (event) => {
                        event.waitUntil(
                            caches.open(CACHE_NAME)
                                .then((cache) => {
                                    return cache.addAll(urlsToCache);
                                })
                        );
                    });

                    self.addEventListener('fetch', (event) => {
                        event.respondWith(
                            caches.match(event.request)
                                .then((response) => {
                                    if (response) {
                                        return response;
                                    }
                                    return fetch(event.request);
                                }
                            )
                        );
                    });

                    self.addEventListener('activate', (event) => {
                        event.waitUntil(
                            caches.keys().then((cacheNames) => {
                                return Promise.all(
                                    cacheNames.map((cacheName) => {
                                        if (cacheName !== CACHE_NAME) {
                                            return caches.delete(cacheName);
                                        }
                                    })
                                );
                            })
                        );
                    });
                `;

                const blob = new Blob([swCode], { type: 'application/javascript' });
                const swUrl = URL.createObjectURL(blob);

                navigator.serviceWorker.register(swUrl)
                    .then((registration) => {
                        console.log('Service Worker enregistré avec succès :', registration.scope);
                    })
                    .catch((error) => {
                        console.log('Échec de l\'enregistrement du Service Worker :', error);
                    });
            });
        }
    </script>

    <script type="module">
        // Import Firebase modules
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.7.3/firebase-app.js";
        import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut, onAuthStateChanged, deleteUser } from "https://www.gstatic.com/firebasejs/11.7.3/firebase-auth.js";
        import { getFirestore, collection, doc, setDoc, getDoc, getDocs, query, orderBy, addDoc, onSnapshot, where, deleteDoc, serverTimestamp, updateDoc, arrayUnion, arrayRemove, limit, Timestamp } from "https://www.gstatic.com/firebasejs/11.7.3/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyDTPLxUiA8lj82kqc6CyCPLQDITc0CtLUE",
            authDomain: "ichat-betai.firebaseapp.com",
            databaseURL: "https://ichat-betai-default-rtdb.firebaseio.com",
            projectId: "ichat-betai",
            storageBucket: "ichat-betai.appspot.com",
            messagingSenderId: "168337722600",
            appId: "1:168337722600:web:beb331f83cc4778c5b4d5d",
            measurementId: "G-STXPSZN7X8"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        // Admin configuration
        const ADMIN_EMAILS = ['billionsjonnhy@gmail.com', 'louiskbn05@gmail.com'];

        // Avatar configuration
        const GITHUB_REPO_URL = 'https://raw.githubusercontent.com/PariALLIANCE/Test/main/';
        const AVATAR_OPTIONS = [
            { id: 'king1', name: 'King 1', url: GITHUB_REPO_URL + 'king1.png' },
            { id: 'king2', name: 'King 2', url: GITHUB_REPO_URL + 'King2.png' },
            { id: 'king3', name: 'King 3', url: GITHUB_REPO_URL + 'king3.png' },
            { id: 'king4', name: 'King 4', url: GITHUB_REPO_URL + 'king4.png' },
            { id: 'king5', name: 'King 5', url: GITHUB_REPO_URL + 'king5.png' },
            { id: 'king6', name: 'King 6', url: GITHUB_REPO_URL + 'king6.png' },
            { id: 'king7', name: 'King 7', url: GITHUB_REPO_URL + 'king7.png' }
        ];

        // Global variables
        let isLoggedIn = false;
        let currentUser = null;
        let currentUserData = null;
        let isAdmin = false;
        let currentSection = 'forecasts';
        let forecastsCache = {};
        let selectedForecast = null;
        let hasNewEvents = false;
        let lastViewedEventTimestamp = null;
        let eventsUnsubscribe = null;
        let selectedTheme = localStorage.getItem('kingPronosTheme') || 'default';
        let selectedAvatar = null;
        let tempSelectedAvatar = null;

        // PWA Installation variables
        let deferredInstallPrompt = null;
        let isAppInstalled = false;

        // Protection contre la copie
        document.addEventListener('contextmenu', function(e) {
            e.preventDefault();
        });

        document.addEventListener('selectstart', function(e) {
            e.preventDefault();
        });

        document.addEventListener('dragstart', function(e) {
            e.preventDefault();
        });

        document.addEventListener('copy', function(e) {
            e.preventDefault();
        });

        document.addEventListener('cut', function(e) {
            e.preventDefault();
        });

        document.addEventListener('paste', function(e) {
            e.preventDefault();
        });

        // Protection contre F12, Ctrl+Shift+I, etc.
        document.addEventListener('keydown', function(e) {
            if (e.key === 'F12' || 
                (e.ctrlKey && e.shiftKey && e.key === 'I') ||
                (e.ctrlKey && e.shiftKey && e.key === 'C') ||
                (e.ctrlKey && e.shiftKey && e.key === 'J') ||
                (e.ctrlKey && e.key === 'U') ||
                (e.ctrlKey && e.key === 'S') ||
                (e.ctrlKey && e.key === 'A') ||
                (e.ctrlKey && e.key === 'C') ||
                (e.ctrlKey && e.key === 'X') ||
                (e.ctrlKey && e.key === 'V')) {
                e.preventDefault();
                return false;
            }
        });

        function copyPromoCode(code) {
            if (navigator.clipboard && navigator.clipboard.writeText) {
                navigator.clipboard.writeText(code).then(() => {
                    showNotification(`Code ${code} copié !`, 'success');
                }).catch(() => {
                    fallbackCopyTextToClipboard(code);
                });
            } else {
                fallbackCopyTextToClipboard(code);
            }
        }

        function fallbackCopyTextToClipboard(text) {
            const textArea = document.createElement("textarea");
            textArea.value = text;
            textArea.style.top = "0";
            textArea.style.left = "0";
            textArea.style.position = "fixed";
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
                document.execCommand('copy');
                showNotification(`Code ${text} copié !`, 'success');
            } catch (err) {
                showNotification('Impossible de copier le code', 'error');
            }
            
            document.body.removeChild(textArea);
        }

        // PWA Installation functions
        function initializePWA() {
            if (window.matchMedia('(display-mode: standalone)').matches) {
                isAppInstalled = true;
                return;
            }

            if (window.navigator.standalone === true) {
                isAppInstalled = true;
                return;
            }

            window.addEventListener('beforeinstallprompt', (event) => {
                event.preventDefault();
                deferredInstallPrompt = event;
            });

            window.addEventListener('appinstalled', () => {
                console.log('PWA was installed');
                isAppInstalled = true;
                deferredInstallPrompt = null;
                showNotification('Application installée avec succès !', 'success');
            });
        }

        async function installApp() {
            if (isAppInstalled || window.matchMedia('(display-mode: standalone)').matches || window.navigator.standalone === true) {
                showNotification('L\'application est déjà installée', 'info');
                return;
            }

            if (!deferredInstallPrompt) {
                const isChrome = /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor);
                const isEdge = /Edg/.test(navigator.userAgent);
                const isOpera = /OPR/.test(navigator.userAgent);
                
                if (!isChrome && !isEdge && !isOpera) {
                    showNotification('Veuillez utiliser Chrome comme navigateur pour installer l\'application', 'error');
                } else {
                    showNotification('Installation non disponible pour le moment', 'info');
                }
                return;
            }

            try {
                const result = await deferredInstallPrompt.prompt();
                console.log('User response to install prompt:', result);
                
                if (result.outcome === 'accepted') {
                    console.log('User accepted the install prompt');
                } else {
                    console.log('User dismissed the install prompt');
                    showNotification('Installation annulée', 'info');
                }
                
                deferredInstallPrompt = null;
                
            } catch (error) {
                console.error('Error during installation:', error);
                showNotification('Veuillez utiliser Chrome comme navigateur pour installer l\'application', 'error');
            }
        }

        // Initialize dark mode detection
        function initializeDarkMode() {
            const savedPreference = localStorage.getItem('kingPronosDarkMode');
            
            if (savedPreference === 'true') {
                document.documentElement.classList.add('dark');
            } else if (savedPreference === 'false') {
                document.documentElement.classList.remove('dark');
            } else {
                if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                    document.documentElement.classList.add('dark');
                } else {
                    document.documentElement.classList.remove('dark');
                }
            }
        }

        initializeDarkMode();

        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
            if (localStorage.getItem('kingPronosDarkMode') === null) {
                if (event.matches) {
                    document.documentElement.classList.add('dark');
                } else {
                    document.documentElement.classList.remove('dark');
                }
            }
        });

        // Utility functions
        function showNotification(message, type = 'info') {
            const notification = document.getElementById('notification');
            if (!notification) return;
            
            notification.classList.remove('show');
            
            setTimeout(() => {
                notification.textContent = message;
                notification.className = 'notification ' + type;
                notification.classList.add('show');
                
                setTimeout(() => {
                    notification.classList.remove('show');
                    
                    setTimeout(() => {
                        notification.className = 'notification';
                        notification.textContent = '';
                    }, 300);
                }, 3000);
            }, 100);
        }

        // Avatar functions
        function openAvatarViewer() {
            const modal = document.getElementById('avatar-viewer-modal');
            const viewerImage = document.getElementById('avatar-viewer-image');
            
            if (selectedAvatar) {
                const avatarData = AVATAR_OPTIONS.find(avatar => avatar.id === selectedAvatar);
                if (avatarData) {
                    viewerImage.src = avatarData.url;
                } else {
                    viewerImage.src = '';
                }
            } else {
                viewerImage.src = '';
            }
            
            modal.classList.add('active');
        }

        function closeAvatarViewer() {
            document.getElementById('avatar-viewer-modal').classList.remove('active');
        }

        function openAvatarSelector() {
            const modal = document.getElementById('avatar-selector-modal');
            const modalGrid = document.getElementById('avatar-modal-grid');
            
            modalGrid.innerHTML = '';
            tempSelectedAvatar = selectedAvatar;

            AVATAR_OPTIONS.forEach(avatar => {
                const avatarElement = document.createElement('div');
                avatarElement.className = 'avatar-modal-option';
                avatarElement.dataset.avatarId = avatar.id;
                
                if (selectedAvatar === avatar.id) {
                    avatarElement.classList.add('active');
                }

                const img = document.createElement('img');
                img.src = avatar.url;
                img.alt = avatar.name;
                img.onerror = function() {
                    avatarElement.innerHTML = '<div class="avatar-loading"><i class="fas fa-user"></i></div>';
                };

                avatarElement.appendChild(img);
                avatarElement.addEventListener('click', () => selectTempAvatar(avatar.id));
                modalGrid.appendChild(avatarElement);
            });

            modal.classList.add('active');
            updateSaveButton();
        }

        function selectTempAvatar(avatarId) {
            tempSelectedAvatar = avatarId;
            
            document.querySelectorAll('.avatar-modal-option').forEach(option => {
                option.classList.remove('active');
            });
            
            const selectedOption = document.querySelector(`.avatar-modal-option[data-avatar-id="${avatarId}"]`);
            if (selectedOption) {
                selectedOption.classList.add('active');
            }
            
            updateSaveButton();
        }

        function updateSaveButton() {
            const saveButton = document.getElementById('avatar-modal-save');
            saveButton.disabled = !tempSelectedAvatar || tempSelectedAvatar === selectedAvatar;
        }

        async function saveSelectedAvatar() {
            if (!tempSelectedAvatar || !currentUser) return;

            try {
                await updateDoc(doc(db, "Users", currentUser.uid), {
                    avatar: tempSelectedAvatar,
                    updatedAt: serverTimestamp()
                });

                selectedAvatar = tempSelectedAvatar;
                currentUserData.avatar = tempSelectedAvatar;

                updateProfileAvatar();
                closeAvatarSelector();
                closeAvatarViewer();

                showNotification("Avatar mis à jour avec succès!", "success");

            } catch (error) {
                console.error('Erreur lors de la sauvegarde de l\'avatar:', error);
                showNotification("Erreur lors de la sauvegarde de l'avatar", "error");
            }
        }

        function closeAvatarSelector() {
            document.getElementById('avatar-selector-modal').classList.remove('active');
            tempSelectedAvatar = null;
        }

        function updateProfileAvatar() {
            const profilePic = document.getElementById('profile-pic');
            
            if (selectedAvatar) {
                const avatarData = AVATAR_OPTIONS.find(avatar => avatar.id === selectedAvatar);
                if (avatarData) {
                    profilePic.innerHTML = '';
                    const img = document.createElement('img');
                    img.src = avatarData.url;
                    img.alt = avatarData.name;
                    img.onerror = function() {
                        profilePic.innerHTML = '<i class="fas fa-user"></i>';
                    };
                    profilePic.appendChild(img);
                }
            } else {
                profilePic.innerHTML = '<i class="fas fa-user"></i>';
            }
        }

        // Setup theme functions
        function setupTheme() {
            const themeClasses = ['theme-green', 'theme-red', 'theme-orange', 'theme-purple', 'theme-teal', 'theme-indigo', 'theme-pink', 'theme-cyan', 'theme-lime', 'theme-amber', 'theme-deep-orange'];
            
            document.documentElement.classList.remove(...themeClasses);
            
            if (selectedTheme !== 'default') {
                document.documentElement.classList.add(`theme-${selectedTheme}`);
            }
            
            document.querySelectorAll('.theme-option').forEach(option => {
                option.classList.remove('active');
            });
            
            const activeThemeOption = document.querySelector(`.theme-option[data-theme="${selectedTheme}"]`);
            if (activeThemeOption) {
                activeThemeOption.classList.add('active');
            }
        }

        function setupDarkMode() {
            const savedPreference = localStorage.getItem('kingPronosDarkMode');
            
            if (savedPreference === 'true') {
                document.documentElement.classList.add('dark');
                document.getElementById('dark-toggle').checked = true;
            } else if (savedPreference === 'false') {
                document.documentElement.classList.remove('dark');
                document.getElementById('dark-toggle').checked = false;
            } else {
                if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                    document.documentElement.classList.add('dark');
                    document.getElementById('dark-toggle').checked = true;
                } else {
                    document.documentElement.classList.remove('dark');
                    document.getElementById('dark-toggle').checked = false;
                }
            }
        }

        // Function to get current date in YYYY-MM-DD format
        function getCurrentDateString() {
            return new Date().toISOString().slice(0, 10);
        }

        // Function to get previous date string
        function getDateString(daysAgo = 0) {
            const date = new Date();
            date.setDate(date.getDate() - daysAgo);
            return date.toISOString().slice(0, 10);
        }

        // Function to get forecast file URL for a specific date
        function getForecastFileUrl(dateString) {
            return `https://raw.githubusercontent.com/Jonnhy2255/Pronosoftbot/main/prédiction-${dateString}-analyse-ia.json`;
        }

        // Function to fetch forecasts from GitHub for a specific date
        async function fetchForecastsFromGitHub(dateString) {
            const fileUrl = getForecastFileUrl(dateString);
            
            try {
                console.log(`Récupération des pronostics pour ${dateString}: ${fileUrl}`);
                
                const response = await fetch(fileUrl);
                
                if (!response.ok) {
                    if (response.status === 404) {
                        console.log(`Fichier de pronostics non trouvé pour ${dateString}`);
                        return null;
                    }
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const data = await response.json();
                console.log(`Pronostics récupérés avec succès pour ${dateString}`);
                
                return data;
            } catch (error) {
                console.error(`Erreur lors de la récupération des pronostics pour ${dateString}: ${error.message}`);
                return null;
            }
        }

        // Function to process and categorize forecasts - updated for new structure
        function processForecastData(data) {
            const processed = {
                'pronostics': []
            };

            if (!data || !data.statistiques_brutes_avec_ia || !Array.isArray(data.statistiques_brutes_avec_ia.details)) {
                return processed;
            }

            // Traiter tous les pronostics depuis la nouvelle structure
            data.statistiques_brutes_avec_ia.details.forEach(forecast => {
                processed.pronostics.push({
                    id: forecast.id,
                    HomeTeam: forecast.HomeTeam,
                    AwayTeam: forecast.AwayTeam,
                    date: forecast.date,
                    league: forecast.league,
                    country_fr: forecast.country_fr,
                    type: forecast.type,
                    stats_home: forecast.stats_home,
                    stats_away: forecast.stats_away,
                    last_matches_home: forecast.last_matches_home,
                    last_matches_away: forecast.last_matches_away,
                    classement: forecast.classement,
                    classement_complet: forecast.classement_complet,
                    confrontations_saison_derniere: forecast.confrontations_saison_derniere || [],
                    logo_home: forecast.logo_home,
                    logo_away: forecast.logo_away,
                    analyse_ia: forecast.analyse_ia
                });
            });

            return processed;
        }

        // Function to parse French date format
        function parseFrenchDate(dateStr) {
            if (!dateStr) return null;
            
            try {
                const frenchMonths = {
                    'janvier': '01', 'février': '02', 'mars': '03', 'avril': '04',
                    'mai': '05', 'juin': '06', 'juillet': '07', 'août': '08',
                    'septembre': '09', 'octobre': '10', 'novembre': '11', 'décembre': '12'
                };
                
                const parts = dateStr.split(' à ');
                const datePart = parts[0];
                const timePart = parts[1] || '00:00:00';
                
                const dateComponents = datePart.split(' ');
                if (dateComponents.length >= 3) {
                    const day = dateComponents[0].padStart(2, '0');
                    const monthName = dateComponents[1].toLowerCase();
                    const year = dateComponents[2];
                    const month = frenchMonths[monthName] || '01';
                    
                    const time = timePart.replace(' UTC', '');
                    
                    const isoString = `${year}-${month}-${day}T${time}Z`;
                    return new Date(isoString);
                }
            } catch (error) {
                console.error('Error parsing French date:', dateStr, error);
            }
            
            return new Date(dateStr);
        }

        // Function to get team icons (fallback)
        function getTeamIcon(teamName) {
            const icons = ['fas fa-futbol', 'fas fa-shield-alt', 'fas fa-star', 'fas fa-trophy', 'fas fa-fire'];
            const hash = teamName ? teamName.split('').reduce((a, b) => (a + b.charCodeAt(0)) % icons.length, 0) : 0;
            return icons[hash];
        }

        // Function to create team logo element
        function createTeamLogoElement(logoUrl, teamName, isDetail = false) {
            const logoContainer = document.createElement('div');
            logoContainer.className = isDetail ? 'detail-team-logo' : 'team-logo';

            if (logoUrl) {
                const img = document.createElement('img');
                img.src = logoUrl;
                img.alt = teamName || 'Team Logo';
                img.onerror = function() {
                    logoContainer.innerHTML = `<i class="${getTeamIcon(teamName)}"></i>`;
                };
                logoContainer.appendChild(img);
            } else {
                logoContainer.innerHTML = `<i class="${getTeamIcon(teamName)}"></i>`;
            }

            return logoContainer;
        }

        // Function to create forecast card
        function createForecastCard(forecastData) {
            const card = document.createElement('div');
            card.className = 'forecast-card';
            card.addEventListener('click', () => openForecastDetail(forecastData));

            let statusClass = 'pending';
            let statusText = 'À venir';
            
            if (forecastData.status === 'win') {
                statusClass = 'win';
                statusText = 'Gagné';
            } else if (forecastData.status === 'loss') {
                statusClass = 'loss';
                statusText = 'Perdu';
            }

            let formattedDate = 'Aujourd\'hui';
            try {
                if (forecastData.date) {
                    const matchDate = parseFrenchDate(forecastData.date);
                    if (matchDate && !isNaN(matchDate.getTime())) {
                        const today = new Date();
                        const diffTime = matchDate.getTime() - today.getTime();
                        const diffDays = Math.round(diffTime / (1000 * 60 * 60 * 24));
                        
                        if (diffDays === 0) {
                            formattedDate = 'Aujourd\'hui';
                        } else if (diffDays === 1) {
                            formattedDate = 'Demain';
                        } else if (diffDays === -1) {
                            formattedDate = 'Hier';
                        } else {
                            formattedDate = matchDate.toLocaleDateString('fr-FR', {
                                day: 'numeric',
                                month: 'short'
                            });
                        }
                    }
                }
            } catch (e) {
                formattedDate = 'Date inconnue';
            }

            card.innerHTML = `
                <div class="forecast-header">
                    <div class="league-info">${forecastData.league || 'Compétition'}</div>
                    <div class="forecast-status status-${statusClass}">${statusText}</div>
                </div>
                
                <div class="teams-container">
                    <div class="team">
                        <div class="team-logo-container"></div>
                        <div class="team-name">${forecastData.HomeTeam || 'Équipe 1'}</div>
                    </div>
                    
                    <div class="forecast-vs">
                        <div class="vs-text">-</div>
                    </div>
                    
                    <div class="team">
                        <div class="team-logo-container-away"></div>
                        <div class="team-name">${forecastData.AwayTeam || 'Équipe 2'}</div>
                    </div>
                </div>
                
                <div class="forecast-time">${formattedDate}</div>
            `;

            setTimeout(() => {
                const homeLogoContainer = card.querySelector('.team-logo-container');
                const awayLogoContainer = card.querySelector('.team-logo-container-away');
                
                if (homeLogoContainer) {
                    const homeLogo = createTeamLogoElement(forecastData.logo_home, forecastData.HomeTeam);
                    homeLogoContainer.replaceWith(homeLogo);
                }
                
                if (awayLogoContainer) {
                    const awayLogo = createTeamLogoElement(forecastData.logo_away, forecastData.AwayTeam);
                    awayLogoContainer.replaceWith(awayLogo);
                }
            }, 0);

            return card;
        }

        // Function to open forecast detail with new sections
        function openForecastDetail(forecastData) {
            selectedForecast = forecastData;
            
            document.getElementById('detail-league').textContent = forecastData.league || 'Compétition';
            
            document.getElementById('detail-home-team').textContent = forecastData.HomeTeam || 'Équipe 1';
            document.getElementById('detail-away-team').textContent = forecastData.AwayTeam || 'Équipe 2';
            document.getElementById('detail-prediction').style.display = 'none';
            
            // Update logos
            const detailHomeLogo = document.getElementById('detail-home-logo');
            const detailAwayLogo = document.getElementById('detail-away-logo');
            
            detailHomeLogo.innerHTML = '';
            if (forecastData.logo_home) {
                const homeImg = document.createElement('img');
                homeImg.src = forecastData.logo_home;
                homeImg.alt = forecastData.HomeTeam || 'Home Team';
                homeImg.style.width = '100%';
                homeImg.style.height = '100%';
                homeImg.style.objectFit = 'cover';
                homeImg.style.borderRadius = '50%';
                homeImg.onerror = function() {
                    detailHomeLogo.innerHTML = `<i class="${getTeamIcon(forecastData.HomeTeam)}"></i>`;
                };
                detailHomeLogo.appendChild(homeImg);
            } else {
                detailHomeLogo.innerHTML = `<i class="${getTeamIcon(forecastData.HomeTeam)}"></i>`;
            }
            
            detailAwayLogo.innerHTML = '';
            if (forecastData.logo_away) {
                const awayImg = document.createElement('img');
                awayImg.src = forecastData.logo_away;
                awayImg.alt = forecastData.AwayTeam || 'Away Team';
                awayImg.style.width = '100%';
                awayImg.style.height = '100%';
                awayImg.style.objectFit = 'cover';
                awayImg.style.borderRadius = '50%';
                awayImg.onerror = function() {
                    detailAwayLogo.innerHTML = `<i class="${getTeamIcon(forecastData.AwayTeam)}"></i>`;
                };
                detailAwayLogo.appendChild(awayImg);
            } else {
                detailAwayLogo.innerHTML = `<i class="${getTeamIcon(forecastData.AwayTeam)}"></i>`;
            }
            
            let statusClass = 'pending';
            let statusText = 'À venir';
            
            if (forecastData.status === 'win') {
                statusClass = 'win';
                statusText = 'Gagné';
            } else if (forecastData.status === 'loss') {
                statusClass = 'loss';
                statusText = 'Perdu';
            }
            
            document.getElementById('detail-status').textContent = statusText;
            document.getElementById('detail-status').className = `detail-forecast-status status-${statusClass}`;
            
            let formattedDateTime = 'Aujourd\'hui';
            try {
                if (forecastData.date) {
                    const matchDate = parseFrenchDate(forecastData.date);
                    if (matchDate && !isNaN(matchDate.getTime())) {
                        formattedDateTime = matchDate.toLocaleDateString('fr-FR', {
                            day: 'numeric',
                            month: 'short',
                            year: 'numeric',
                            hour: '2-digit',
                            minute: '2-digit'
                        });
                    }
                }
            } catch (e) {
                formattedDateTime = 'Date inconnue';
            }
            
            document.getElementById('detail-time').textContent = formattedDateTime;

            // Update prediction analysis - extract prediction from IA analysis
            let predictionText = 'N/A';
            if (forecastData.analyse_ia) {
                const predictionMatch = forecastData.analyse_ia.match(/\*\*Prédiction\s*:\s*([^*]+)\*\*/);
                if (predictionMatch) {
                    predictionText = predictionMatch[1].trim();
                }
            }

            document.getElementById('prediction-analysis').innerHTML = `
                <strong>Prédiction recommandée:</strong> <span class="prediction-highlight">${predictionText}</span><br><br>
                Cette prédiction est basée sur l'analyse des performances récentes, des statistiques historiques 
                et des facteurs contextuels des équipes ${forecastData.HomeTeam || 'Équipe 1'} et ${forecastData.AwayTeam || 'Équipe 2'}.
            `;

            // Update AI analysis
            const aiAnalysisContent = document.getElementById('ai-analysis-content');
            if (forecastData.analyse_ia) {
                aiAnalysisContent.innerHTML = forecastData.analyse_ia;
            } else {
                aiAnalysisContent.innerHTML = `
                    <div style="text-align: center; padding: 40px 20px; color: var(--inactive-text);">
                        <i class="fas fa-robot" style="font-size: 48px; margin-bottom: 20px; opacity: 0.5;"></i>
                        <h3 style="margin-bottom: 10px;">Analyse IA</h3>
                        <p>Analyse non disponible pour ce pronostic</p>
                    </div>
                `;
            }

            // Update statistics with charts
            updateStatisticsTab(forecastData);

            // Update matches
            updateMatchesTab(forecastData);

            // Update H2H
            updateH2HTab(forecastData);

            // Update ranking
            updateRankingTab(forecastData);

            // Show detail view
            document.getElementById('forecast-detail').classList.add('active');
        }

        // Function to update statistics tab with charts
        function updateStatisticsTab(forecastData) {
            const statsContainer = document.querySelector('#statistics-content .stats-container');
            
            if (!forecastData.stats_home || !forecastData.stats_away) {
                statsContainer.innerHTML = `
                    <div style="text-align: center; padding: 40px 20px; color: var(--inactive-text);">
                        <i class="fas fa-chart-bar" style="font-size: 48px; margin-bottom: 20px; opacity: 0.5;"></i>
                        <h3 style="margin-bottom: 10px;">Statistiques</h3>
                        <p>Données statistiques non disponibles</p>
                    </div>
                `;
                return;
            }

            const statsHome = forecastData.stats_home;
            const statsAway = forecastData.stats_away;

            // Create form display helper - form le plus récent en premier avec le point d'interrogation pour le match actuel
            const createFormDisplay = (form, isHome) => {
                if (!form || !Array.isArray(form)) return '';
                
                // Ajouter un point d'interrogation gris pour le match actuel en premier
                const currentMatchBadge = '<span class="form-badge pending">?</span>';
                
                // Inverser l'ordre pour avoir le plus récent en premier, puis ajouter le point d'interrogation
                const formBadges = form.slice().reverse().map(result => `<span class="form-badge ${result}">${result}</span>`).join('');
                
                return currentMatchBadge + formBadges;
            };

            statsContainer.innerHTML = `
                <!-- Charts Section -->
                <div class="chart-container">
                    <div class="chart-title">Comparaison Offensive et Défensive</div>
                    <div class="chart-wrapper">
                        <canvas id="goalsChart"></canvas>
                    </div>
                </div>

                <div class="chart-container">
                    <div class="chart-title">Forme Récente (6 derniers matchs)</div>
                    <div class="chart-wrapper">
                        <canvas id="formChart"></canvas>
                    </div>
                </div>

                <div class="chart-container">
                    <div class="chart-title">Performances Domicile vs Extérieur</div>
                    <div class="chart-wrapper">
                        <canvas id="homeAwayChart"></canvas>
                    </div>
                </div>

                <!-- Text Statistics -->
                <div class="stats-category">
                    <div class="stats-category-title">Statistiques Générales</div>
                    <div class="stats-row">
                        <div class="stats-home">${statsHome.moyenne_marques?.toFixed(1) || '0.0'}</div>
                        <div class="stats-label">Buts marqués/match</div>
                        <div class="stats-away">${statsAway.moyenne_marques?.toFixed(1) || '0.0'}</div>
                    </div>
                    <div class="stats-row">
                        <div class="stats-home">${statsHome.moyenne_encaisses?.toFixed(1) || '0.0'}</div>
                        <div class="stats-label">Buts encaissés/match</div>
                        <div class="stats-away">${statsAway.moyenne_encaisses?.toFixed(1) || '0.0'}</div>
                    </div>
                    <div class="stats-row">
                        <div class="stats-home">${statsHome.total_marques || 0}</div>
                        <div class="stats-label">Total buts marqués</div>
                        <div class="stats-away">${statsAway.total_marques || 0}</div>
                    </div>
                    <div class="stats-row">
                        <div class="stats-home">${statsHome.total_encaisses || 0}</div>
                        <div class="stats-label">Total buts encaissés</div>
                        <div class="stats-away">${statsAway.total_encaisses || 0}</div>
                    </div>
                </div>

                <div class="stats-category">
                    <div class="stats-category-title">Forme Récente (6 matchs + match actuel)</div>
                    <div class="stats-row">
                        <div class="stats-home">
                            <div class="form-display">${createFormDisplay(statsHome.form_6, true)}</div>
                        </div>
                        <div class="stats-label">Forme</div>
                        <div class="stats-away">
                            <div class="form-display">${createFormDisplay(statsAway.form_6, false)}</div>
                        </div>
                    </div>
                    <div class="stats-row">
                        <div class="stats-home">${statsHome.total_points_6 || 0}</div>
                        <div class="stats-label">Points obtenus</div>
                        <div class="stats-away">${statsAway.total_points_6 || 0}</div>
                    </div>
                </div>

                <div class="stats-category">
                    <div class="stats-category-title">Domicile vs Extérieur</div>
                    <div class="stats-row">
                        <div class="stats-home">${statsHome.buts_dom_marques || 0}</div>
                        <div class="stats-label">Buts marqués à domicile</div>
                        <div class="stats-away">${statsAway.buts_ext_marques || 0}</div>
                    </div>
                    <div class="stats-row">
                        <div class="stats-home">${statsHome.buts_dom_encaisses || 0}</div>
                        <div class="stats-label">Buts encaissés à domicile</div>
                        <div class="stats-away">${statsAway.buts_ext_encaisses || 0}</div>
                    </div>
                    <div class="stats-row">
                        <div class="stats-home">
                            <div class="form-display">${createFormDisplay(statsHome.serie_domicile, true)}</div>
                        </div>
                        <div class="stats-label">Série</div>
                        <div class="stats-away">
                            <div class="form-display">${createFormDisplay(statsAway.serie_exterieur, false)}</div>
                        </div>
                    </div>
                </div>
            `;

            // Create charts after DOM is updated
            setTimeout(() => {
                createGoalsChart(statsHome, statsAway, forecastData.HomeTeam, forecastData.AwayTeam);
                createFormChart(statsHome, statsAway, forecastData.HomeTeam, forecastData.AwayTeam);
                createHomeAwayChart(statsHome, statsAway, forecastData.HomeTeam, forecastData.AwayTeam);
            }, 100);
        }

        // Chart creation functions
        function createGoalsChart(statsHome, statsAway, homeTeam, awayTeam) {
            const ctx = document.getElementById('goalsChart');
            if (!ctx) return;

            const isDark = document.documentElement.classList.contains('dark');
            const textColor = isDark ? '#ffffff' : '#000000';
            const gridColor = isDark ? '#404040' : '#e0e0e0';

            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Buts marqués/match', 'Buts encaissés/match', 'Total marqués', 'Total encaissés'],
                    datasets: [{
                        label: homeTeam || 'Domicile',
                        data: [
                            statsHome.moyenne_marques || 0,
                            statsHome.moyenne_encaisses || 0,
                            statsHome.total_marques || 0,
                            statsHome.total_encaisses || 0
                        ],
                        backgroundColor: 'rgba(255, 0, 0, 0.6)',
                        borderColor: '#FF0000',
                        borderWidth: 1
                    }, {
                        label: awayTeam || 'Extérieur',
                        data: [
                            statsAway.moyenne_marques || 0,
                            statsAway.moyenne_encaisses || 0,
                            statsAway.total_marques || 0,
                            statsAway.total_encaisses || 0
                        ],
                        backgroundColor: 'rgba(0, 102, 255, 0.6)',
                        borderColor: '#0066FF',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: {
                                color: textColor
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                color: textColor
                            },
                            grid: {
                                color: gridColor
                            }
                        },
                        x: {
                            ticks: {
                                color: textColor
                            },
                            grid: {
                                color: gridColor
                            }
                        }
                    }
                }
            });
        }

        function createFormChart(statsHome, statsAway, homeTeam, awayTeam) {
            const ctx = document.getElementById('formChart');
            if (!ctx) return;

            const isDark = document.documentElement.classList.contains('dark');
            const textColor = isDark ? '#ffffff' : '#000000';

            // Count form results
            const countResults = (form) => {
                if (!form || !Array.isArray(form)) return { W: 0, D: 0, L: 0 };
                return form.reduce((acc, result) => {
                    acc[result] = (acc[result] || 0) + 1;
                    return acc;
                }, { W: 0, D: 0, L: 0 });
            };

            const homeForm = countResults(statsHome.form_6);
            const awayForm = countResults(statsAway.form_6);

            new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Victoires', 'Nuls', 'Défaites'],
                    datasets: [{
                        label: homeTeam || 'Domicile',
                        data: [homeForm.W, homeForm.D, homeForm.L],
                        backgroundColor: [
                            'rgba(76, 175, 80, 0.8)',
                            'rgba(255, 193, 7, 0.8)',
                            'rgba(244, 67, 54, 0.8)'
                        ],
                        borderWidth: 2
                    }, {
                        label: awayTeam || 'Extérieur',
                        data: [awayForm.W, awayForm.D, awayForm.L],
                        backgroundColor: [
                            'rgba(76, 175, 80, 0.5)',
                            'rgba(255, 193, 7, 0.5)',
                            'rgba(244, 67, 54, 0.5)'
                        ],
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                color: textColor
                            }
                        }
                    }
                }
            });
        }

        function createHomeAwayChart(statsHome, statsAway, homeTeam, awayTeam) {
            const ctx = document.getElementById('homeAwayChart');
            if (!ctx) return;

            const isDark = document.documentElement.classList.contains('dark');
            const textColor = isDark ? '#ffffff' : '#000000';
            const gridColor = isDark ? '#404040' : '#e0e0e0';

            new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: ['Buts marqués', 'Buts encaissés', 'Série (points)'],
                    datasets: [{
                        label: `${homeTeam} (Domicile)`,
                        data: [
                            statsHome.buts_dom_marques || 0,
                            statsHome.buts_dom_encaisses || 0,
                            statsHome.total_points_6 || 0
                        ],
                        borderColor: '#FF0000',
                        backgroundColor: 'rgba(255, 0, 0, 0.2)',
                        pointBackgroundColor: '#FF0000'
                    }, {
                        label: `${awayTeam} (Extérieur)`,
                        data: [
                            statsAway.buts_ext_marques || 0,
                            statsAway.buts_ext_encaisses || 0,
                            statsAway.total_points_6 || 0
                        ],
                        borderColor: '#0066FF',
                        backgroundColor: 'rgba(0, 102, 255, 0.2)',
                        pointBackgroundColor: '#0066FF'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: {
                                color: textColor
                            }
                        }
                    },
                    scales: {
                        r: {
                            beginAtZero: true,
                            ticks: {
                                color: textColor
                            },
                            grid: {
                                color: gridColor
                            },
                            pointLabels: {
                                color: textColor
                            }
                        }
                    }
                }
            });
        }

        // Function to update matches tab
        function updateMatchesTab(forecastData) {
            const matchesContainer = document.querySelector('#matches-content .matches-container');
            
            const homeMatches = forecastData.last_matches_home || [];
            const awayMatches = forecastData.last_matches_away || [];

            if (homeMatches.length === 0 && awayMatches.length === 0) {
                matchesContainer.innerHTML = `
                    <div style="text-align: center; padding: 40px 20px; color: var(--inactive-text);">
                        <i class="fas fa-calendar-alt" style="font-size: 48px; margin-bottom: 20px; opacity: 0.5;"></i>
                        <h3 style="margin-bottom: 10px;">Matchs Récents</h3>
                        <p>Aucun match récent disponible</p>
                    </div>
                `;
                return;
            }

            let content = '';

            if (homeMatches.length > 0) {
                content += `
                    <div class="matches-section">
                        <div class="matches-section-title">${forecastData.HomeTeam} - Matchs Récents</div>
                `;
                
                homeMatches.forEach(match => {
                    if (Array.isArray(match) && match.length >= 6) {
                        content += `
                            <div class="match-item">
                                <div class="match-date">${match[0]}</div>
                                <div class="match-teams">${match[1]} vs ${match[2]}</div>
                                <div class="match-score">${match[4]} (${match[5]})</div>
                            </div>
                        `;
                    }
                });
                
                content += '</div>';
            }

            if (awayMatches.length > 0) {
                content += `
                    <div class="matches-section">
                        <div class="matches-section-title">${forecastData.AwayTeam} - Matchs Récents</div>
                `;
                
                awayMatches.forEach(match => {
                    if (Array.isArray(match) && match.length >= 6) {
                        content += `
                            <div class="match-item">
                                <div class="match-date">${match[0]}</div>
                                <div class="match-teams">${match[1]} vs ${match[2]}</div>
                                <div class="match-score">${match[4]} (${match[5]})</div>
                            </div>
                        `;
                    }
                });
                
                content += '</div>';
            }

            matchesContainer.innerHTML = content;
        }

        // Function to update H2H tab - NEW FORMAT
        function updateH2HTab(forecastData) {
            const h2hContainer = document.querySelector('#h2h-content .h2h-container');
            
            const h2hMatches = forecastData.confrontations_saison_derniere || [];

            if (h2hMatches.length === 0) {
                h2hContainer.innerHTML = `
                    <div class="h2h-empty">
                        <i class="fas fa-handshake"></i>
                        <h3>Aucune confrontation</h3>
                        <p>Pas de confrontations directes récentes entre ces équipes</p>
                    </div>
                `;
                return;
            }

            let content = `
                <div class="matches-section">
                    <div class="matches-section-title">Confrontations Directes</div>
            `;
            
            h2hMatches.forEach(match => {
                if (match && typeof match === 'object') {
                    content += `
                        <div class="match-item">
                            <div class="match-date">${match.date || 'Date inconnue'}</div>
                            <div class="match-teams">${match.team1 || 'Équipe 1'} vs ${match.team2 || 'Équipe 2'}</div>
                            <div class="match-score">${match.score || 'Score non disponible'}</div>
                        </div>
                    `;
                }
            });
            
            content += '</div>';

            h2hContainer.innerHTML = content;
        }

        // Function to update ranking tab - RESPONSIVE
        function updateRankingTab(forecastData) {
            const rankingContainer = document.querySelector('#ranking-content .ranking-container');
            
            const classement = forecastData.classement_complet || [];

            if (classement.length === 0) {
                rankingContainer.innerHTML = `
                    <div style="text-align: center; padding: 40px 20px; color: var(--inactive-text);">
                        <i class="fas fa-trophy" style="font-size: 48px; margin-bottom: 20px; opacity: 0.5;"></i>
                        <h3 style="margin-bottom: 10px;">Classement</h3>
                        <p>Classement non disponible</p>
                    </div>
                `;
                return;
            }

            let tableContent = `
                <table class="ranking-table">
                    <thead>
                        <tr>
                            <th>Pos.</th>
                            <th>Équipe</th>
                            <th>Pts</th>
                        </tr>
                    </thead>
                    <tbody>
            `;

            classement.forEach(team => {
                let rowClass = '';
                if (team.team === forecastData.HomeTeam) {
                    rowClass = 'home-team';
                } else if (team.team === forecastData.AwayTeam) {
                    rowClass = 'away-team';
                }

                tableContent += `
                    <tr class="${rowClass}">
                        <td>${team.position}</td>
                        <td class="team-name-cell">${team.team}</td>
                        <td>${team.points}</td>
                    </tr>
                `;
            });

            tableContent += `
                    </tbody>
                </table>
            `;

            rankingContainer.innerHTML = tableContent;
        }

        // Function to close forecast detail
        function closeForecastDetail() {
            document.getElementById('forecast-detail').classList.remove('active');
            selectedForecast = null;
        }

        // Function to switch tabs in detail view
        function switchDetailTab(tabId) {
            // Update tab buttons
            document.querySelectorAll('.detail-tab').forEach(tab => {
                if (tab.dataset.tab === tabId) {
                    tab.classList.add('active');
                } else {
                    tab.classList.remove('active');
                }
            });

            // Update tab content
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(`${tabId}-content`).classList.add('active');
        }

        // Function to load forecasts data
        async function loadForecastsData() {
            const listElement = document.getElementById('forecasts-container');
            
            if (!listElement) return;
            
            listElement.innerHTML = `
                <div class="loading-state">
                    <i class="fas fa-futbol loading-spinner"></i>
                    <h3>Chargement...</h3>
                    <p>Veuillez patienter</p>
                </div>
            `;
            
            try {
                const githubData = await fetchForecastsFromGitHub(getCurrentDateString());
                
                if (!githubData) {
                    listElement.innerHTML = `
                        <div class="empty-state">
                            <i class="fas fa-calendar-day"></i>
                            <h3>Aucune prédiction fiable</h3>
                            <p>Aucun pronostic disponible pour aujourd'hui</p>
                        </div>
                    `;
                    return;
                }
                
                const processedData = processForecastData(githubData);
                
                forecastsCache['pronostics'] = processedData.pronostics;
                
                displayForecastsFromCache();
                
            } catch (error) {
                console.error(`Erreur chargement pronostics: ${error.message}`);
                listElement.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-exclamation-circle"></i>
                        <h3>Erreur de chargement</h3>
                        <p>Impossible de charger les pronostics</p>
                    </div>
                `;
            }
        }

        // Function to display forecasts from cache
        function displayForecastsFromCache() {
            const listElement = document.getElementById('forecasts-container');
            
            if (!listElement || !forecastsCache['pronostics']) return;
            
            listElement.innerHTML = '';
            
            const forecasts = forecastsCache['pronostics'];
            
            if (forecasts.length === 0) {
                listElement.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-futbol"></i>
                        <h3>Aucune prédiction fiable</h3>
                        <p>Aucun pronostic disponible pour le moment</p>
                    </div>
                `;
                return;
            }
            
            const fragment = document.createDocumentFragment();
            
            forecasts.forEach((forecastData) => {
                const forecastElement = createForecastCard(forecastData);
                fragment.appendChild(forecastElement);
            });
            
            listElement.appendChild(fragment);
        }

        // Function to load ICEGAME - Show daily investment pick
        async function loadIcegameData() {
            const icegameContainer = document.getElementById('icegame-container');
            const dailyPickElement = document.getElementById('icegame-daily-pick');
            
            try {
                const githubData = await fetchForecastsFromGitHub(getCurrentDateString());
                
                if (!githubData) {
                    dailyPickElement.innerHTML = `
                        <div style="background: var(--secondary-color); padding: 25px; border-radius: 20px; text-align: center; border: 2px solid var(--primary-color);">
                            <div style="font-size: 20px; font-weight: bold; color: var(--primary-color); margin-bottom: 15px;">
                                🎯 Sélection IA du Jour
                            </div>
                            <div style="font-size: 16px; color: var(--text-color); margin-bottom: 15px;">
                                Aucun match analysé aujourd'hui
                            </div>
                            <div style="font-size: 14px; color: var(--inactive-text);">
                                Revenez demain pour découvrir la prochaine opportunité d'investissement sélectionnée par notre IA
                            </div>
                        </div>
                    `;
                    return;
                }
                
                const processedData = processForecastData(githubData);
                
                if (processedData.pronostics && processedData.pronostics.length > 0) {
                    // Prendre le premier match comme le plus probable pour ICEGAME
                    const investmentPick = processedData.pronostics[0];
                    
                    dailyPickElement.innerHTML = `
                        <div style="background: var(--investment-bg); color: var(--investment-text); padding: 25px; border-radius: 20px; text-align: center; margin-bottom: 20px; box-shadow: 0 8px 25px var(--investment-shadow);">
                            <div style="font-size: 20px; font-weight: bold; margin-bottom: 15px;">
                                🎯 SÉLECTION IA DU JOUR
                            </div>
                            <div style="font-size: 16px; margin-bottom: 15px; opacity: 0.9;">
                                Le match avec la plus forte probabilité de réussite pour votre investissement quotidien
                            </div>
                            <div style="background: rgba(255, 255, 255, 0.15); padding: 15px; border-radius: 15px; margin-bottom: 15px;">
                                <div style="font-size: 18px; font-weight: bold; margin-bottom: 8px;">
                                    ${investmentPick.HomeTeam} vs ${investmentPick.AwayTeam}
                                </div>
                                <div style="font-size: 14px; opacity: 0.9;">
                                    ${investmentPick.league} • ${investmentPick.country_fr}
                                </div>
                            </div>
                            <div id="icegame-forecast-card" style="cursor: pointer; margin: 20px 0;">
                                <!-- Le forecast card sera inséré ici -->
                            </div>
                        </div>

                        <div class="investment-section">
                            <div class="investment-title">
                                <i class="fas fa-info-circle"></i>
                                Pourquoi ce match ?
                            </div>
                            <div class="investment-content">
                                Ce match a été sélectionné par notre système d'IA après analyse de :
                                <br><br>
                                ✅ <strong>Forme récente des équipes</strong><br>
                                ✅ <strong>Statistiques historiques</strong><br>
                                ✅ <strong>Confrontations directes</strong><br>
                                ✅ <strong>Contexte de la compétition</strong><br>
                                ✅ <strong>Plus de 500 autres critères</strong>
                            </div>
                        </div>

                        <div style="background: var(--warning-bg); border: 2px solid var(--warning-color); border-radius: 15px; padding: 20px; text-align: center;">
                            <div style="font-size: 16px; font-weight: bold; color: var(--warning-color); margin-bottom: 10px;">
                                💡 Conseil ICEGAME
                            </div>
                            <div style="font-size: 14px; color: var(--text-color); line-height: 1.5;">
                                Utilisez toujours une mise fixe (exemple: 1000 FCFA) et ne jamais dépasser 2-5% de votre bankroll totale. 
                                La discipline est la clé du succès à long terme.
                            </div>
                        </div>
                    `;
                    
                    // Créer et insérer la carte du match
                    const forecastCard = createForecastCard(investmentPick);
                    const icegameCardContainer = document.getElementById('icegame-forecast-card');
                    if (icegameCardContainer) {
                        icegameCardContainer.appendChild(forecastCard);
                    }
                    
                } else {
                    dailyPickElement.innerHTML = `
                        <div style="background: var(--secondary-color); padding: 25px; border-radius: 20px; text-align: center; border: 2px solid var(--primary-color);">
                            <div style="font-size: 20px; font-weight: bold; color: var(--primary-color); margin-bottom: 15px;">
                                🎯 Sélection IA du Jour
                            </div>
                            <div style="font-size: 16px; color: var(--text-color); margin-bottom: 15px;">
                                Aucun match analysé aujourd'hui
                            </div>
                            <div style="font-size: 14px; color: var(--inactive-text);">
                                Notre IA n'a trouvé aucun match répondant aux critères stricts d'ICEGAME aujourd'hui
                            </div>
                        </div>
                    `;
                }
                
            } catch (error) {
                console.error(`Erreur chargement ICEGAME: ${error.message}`);
                dailyPickElement.innerHTML = `
                    <div style="background: var(--secondary-color); padding: 25px; border-radius: 20px; text-align: center; border: 2px solid var(--danger-color);">
                        <div style="font-size: 20px; font-weight: bold; color: var(--danger-color); margin-bottom: 15px;">
                            ⚠️ Erreur de Chargement
                        </div>
                        <div style="font-size: 16px; color: var(--text-color);">
                            Impossible de charger la sélection du jour
                        </div>
                    </div>
                `;
            }
        }

        // Navigation functions
        function showSection(sectionId) {
            currentSection = sectionId;
            
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            
            document.getElementById(sectionId + '-section').classList.add('active');
            
            document.querySelectorAll('.nav-item').forEach(item => {
                if (item.dataset.section === sectionId) {
                    item.classList.add('active');
                } else {
                    item.classList.remove('active');
                }
            });
            
            updateHeaderForSection(sectionId);
            updateBottomNavVisibility(sectionId);
            
            if (sectionId === 'forecasts') {
                loadForecastsData();
            } else if (sectionId === 'icegame') {
                loadIcegameData();
            } else if (sectionId === 'events') {
                loadEvents();
            } else if (sectionId === 'history') {
                loadHistoryData();
            } else if (sectionId === 'interface') {
                setupTheme();
                setupDarkMode();
            }
        }

        function updateHeaderForSection(sectionId) {
            const backBtn = document.getElementById('back-btn');
            const menuBtn = document.getElementById('menu-btn');
            const headerTitle = document.getElementById('header-title');
            const headerActions = document.querySelector('.header-actions');
            
            backBtn.style.display = 'none';
            menuBtn.style.display = 'block';
            
            if (sectionId === 'forecasts') {
                headerTitle.textContent = 'Pronostics';
                headerActions.innerHTML = `
                    <button class="action-btn" id="events-btn">
                        <i class="fas fa-bell"></i>
                        <div class="notification-dot" id="events-notification-dot"></div>
                    </button>
                `;
            } else if (sectionId === 'icegame') {
                headerTitle.textContent = 'Icegame';
                headerActions.innerHTML = `
                    <button class="action-btn" id="events-btn">
                        <i class="fas fa-bell"></i>
                        <div class="notification-dot" id="events-notification-dot"></div>
                    </button>
                `;
            } else if (sectionId === 'profile') {
                headerTitle.textContent = 'Profil';
                headerActions.innerHTML = `
                    <button class="action-btn" id="events-btn">
                        <i class="fas fa-bell"></i>
                        <div class="notification-dot" id="events-notification-dot"></div>
                    </button>
                `;
            } else if (sectionId === 'events') {
                headerTitle.textContent = 'Événements';
                headerActions.innerHTML = '';
                backBtn.style.display = 'block';
                menuBtn.style.display = 'none';
            } else if (sectionId === 'history') {
                headerTitle.textContent = 'Historique';
                headerActions.innerHTML = '';
                backBtn.style.display = 'block';
                menuBtn.style.display = 'none';
            } else if (sectionId === 'interface') {
                headerTitle.textContent = 'Interface';
                headerActions.innerHTML = '';
                backBtn.style.display = 'block';
                menuBtn.style.display = 'none';
            } else if (sectionId === 'secrets') {
                headerTitle.textContent = 'Secrets';
                headerActions.innerHTML = '';
                backBtn.style.display = 'block';
                menuBtn.style.display = 'none';
            } else if (sectionId === 'terms') {
                headerTitle.textContent = 'Conditions';
                headerActions.innerHTML = '';
                backBtn.style.display = 'block';
                menuBtn.style.display = 'none';
            } else if (sectionId === 'about') {
                headerTitle.textContent = 'À propos';
                headerActions.innerHTML = '';
                backBtn.style.display = 'block';
                menuBtn.style.display = 'none';
            }
            
            const eventsBtn = document.getElementById('events-btn');
            
            if (eventsBtn) {
                eventsBtn.addEventListener('click', () => {
                    showSection('events');
                    updateLastViewedEventTimestamp();
                    hideEventNotificationDot();
                });
            }
            
            if (hasNewEvents) {
                const dot = document.getElementById('events-notification-dot');
                if (dot) dot.classList.add('active');
            }
        }

        // Function to update bottom nav visibility
        function updateBottomNavVisibility(sectionId) {
            const bottomNav = document.getElementById('bottom-nav');
            const mainContent = document.getElementById('main-content');
            
            // Hide bottom nav for menu sections
            const menuSections = ['secrets', 'history', 'interface', 'terms', 'about', 'events'];
            
            if (menuSections.includes(sectionId)) {
                bottomNav.classList.add('hidden');
                mainContent.classList.add('menu-section');
            } else {
                bottomNav.classList.remove('hidden');
                mainContent.classList.remove('menu-section');
            }
        }

        // Events functions
        function showEventNotificationDot() {
            hasNewEvents = true;
            const dots = document.querySelectorAll('#events-notification-dot');
            dots.forEach(dot => {
                if (dot) dot.classList.add('active');
            });
        }
        
        function hideEventNotificationDot() {
            hasNewEvents = false;
            const dots = document.querySelectorAll('#events-notification-dot');
            dots.forEach(dot => {
                if (dot) dot.classList.remove('active');
            });
        }
        
        function updateLastViewedEventTimestamp() {
            lastViewedEventTimestamp = new Date();
            localStorage.setItem('kingPronosLastViewedEvent', lastViewedEventTimestamp.toISOString());
        }

        async function loadEvents() {
            const eventsList = document.getElementById('events-list');
            
            try {
                const eventsQuery = query(
                    collection(db, "Events"),
                    orderBy("timestamp", "desc"),
                    limit(50)
                );
                
                const eventsSnapshot = await getDocs(eventsQuery);
                
                eventsList.innerHTML = '';
                
                if (eventsSnapshot.empty) {
                    eventsList.innerHTML = `
                        <div class="empty-state">
                            <i class="fas fa-bell"></i>
                            <div class="empty-state-title">Aucun événement</div>
                            <div class="empty-state-text">Les événements apparaîtront ici</div>
                        </div>
                    `;
                    return;
                }
                
                const eventElements = [];
                
                eventsSnapshot.docs.forEach(doc => {
                    const eventData = doc.data();
                    const eventElement = createEventElement(doc.id, eventData);
                    eventElements.push(eventElement);
                });
                
                eventElements.forEach(element => {
                    eventsList.appendChild(element);
                });
                
                console.log(`${eventsSnapshot.size} événements chargés`);
                
            } catch (error) {
                console.error('Erreur chargement événements:', error);
                eventsList.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-exclamation-circle"></i>
                        <div class="empty-state-title">Erreur de chargement</div>
                        <div class="empty-state-text">Impossible de charger les événements</div>
                    </div>
                `;
            }
        }

        function createEventElement(eventId, eventData) {
            const eventElement = document.createElement('div');
            eventElement.className = 'admin-notification';
            
            let iconClass = 'fas fa-info-circle';
            if (eventData.type === 'alert') {
                iconClass = 'fas fa-exclamation-triangle';
            } else if (eventData.type === 'update') {
                iconClass = 'fas fa-sync-alt';
            }
            
            let timestamp = '';
            if (eventData.timestamp) {
                const eventDate = eventData.timestamp.toDate ? eventData.timestamp.toDate() : new Date(eventData.timestamp);
                timestamp = eventDate.toLocaleDateString('fr-FR', {
                    day: 'numeric',
                    month: 'short',
                    hour: '2-digit',
                    minute: '2-digit'
                });
            }
            
            eventElement.innerHTML = `
                <div class="admin-notification-header">
                    <div class="admin-notification-title">
                        <i class="${iconClass}"></i>
                        ${eventData.title || 'Notification'}
                    </div>
                </div>
                <div class="admin-notification-content">${eventData.content || ''}</div>
                <div class="admin-notification-footer">
                    ${timestamp}
                    ${eventData.senderName ? ' • ' + eventData.senderName : ''}
                </div>
            `;
            
            return eventElement;
        }

        async function loadHistoryData() {
            const historyContent = document.getElementById('history-content');
            
            historyContent.innerHTML = `
                <div style="display: flex; flex-direction: column; align-items: center; justify-content: center; height: 200px;">
                    <i class="fas fa-spinner fa-spin" style="font-size: 30px; color: var(--primary-color);"></i>
                    <div style="margin-top: 10px; font-weight: bold;">Chargement...</div>
                </div>
            `;

            try {
                const yesterday = getDateString(1);
                const dayBeforeYesterday = getDateString(2);
                
                const [yesterdayData, dayBeforeYesterdayData] = await Promise.all([
                    fetchForecastsFromGitHub(yesterday),
                    fetchForecastsFromGitHub(dayBeforeYesterday)
                ]);

                const yesterdayProcessed = processForecastData(yesterdayData);
                const dayBeforeYesterdayProcessed = processForecastData(dayBeforeYesterdayData);

                displayHistoryData(yesterdayProcessed, dayBeforeYesterdayProcessed);

            } catch (error) {
                console.error(`Erreur chargement historique: ${error.message}`);
                historyContent.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-exclamation-circle"></i>
                        <div class="empty-state-title">Erreur de chargement</div>
                        <div class="empty-state-text">Impossible de charger l'historique des pronostics</div>
                    </div>
                `;
            }
        }

        function displayHistoryData(yesterdayData, dayBeforeYesterdayData) {
            const historyContent = document.getElementById('history-content');
            historyContent.innerHTML = '';

            const yesterday = new Date();
            yesterday.setDate(yesterday.getDate() - 1);
            
            const dayBeforeYesterday = new Date();
            dayBeforeYesterday.setDate(dayBeforeYesterday.getDate() - 2);

            if (yesterdayData && yesterdayData.pronostics && yesterdayData.pronostics.length > 0) {
                historyContent.appendChild(createHistoryDateSection(yesterday, yesterdayData));
            }

            if (dayBeforeYesterdayData && dayBeforeYesterdayData.pronostics && dayBeforeYesterdayData.pronostics.length > 0) {
                historyContent.appendChild(createHistoryDateSection(dayBeforeYesterday, dayBeforeYesterdayData));
            }

            if (historyContent.children.length === 0) {
                historyContent.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-history"></i>
                        <div class="empty-state-title">Aucun historique</div>
                        <div class="empty-state-text">L'historique des pronostics des 2 derniers jours apparaîtra ici</div>
                    </div>
                `;
            }
        }

        function createHistoryDateSection(date, data) {
            const section = document.createElement('div');
            
            const dateHeader = document.createElement('div');
            dateHeader.className = 'history-date-header';
            dateHeader.textContent = date.toLocaleDateString('fr-FR', { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            });
            section.appendChild(dateHeader);

            if (data.pronostics && data.pronostics.length > 0) {
                const categorySection = document.createElement('div');
                categorySection.className = 'history-category-section';

                const categoryTitle = document.createElement('div');
                categoryTitle.className = 'history-category-title';
                categoryTitle.textContent = `Pronostics du jour (${data.pronostics.length})`;
                categorySection.appendChild(categoryTitle);

                const forecastsList = document.createElement('div');
                forecastsList.className = 'history-forecasts-list';

                data.pronostics.forEach(forecast => {
                    const historyItem = createHistoryForecastElement(forecast);
                    forecastsList.appendChild(historyItem);
                });

                categorySection.appendChild(forecastsList);
                section.appendChild(categorySection);
            }

            return section;
        }

        function createHistoryForecastElement(forecastData) {
            const element = document.createElement('div');
            element.className = 'history-forecast-item';

            element.addEventListener('click', () => {
                openForecastDetail(forecastData);
            });

            const content = `
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                    <div style="font-weight: bold;">${forecastData.HomeTeam || 'Équipe 1'} vs ${forecastData.AwayTeam || 'Équipe 2'}</div>
                    <div class="forecast-status pending">À venir</div>
                </div>
                <div style="font-size: 11px; margin-top: 4px; opacity: 0.6;">
                    ${forecastData.league || 'Compétition'} • ${forecastData.country_fr || 'Pays'}
                </div>
            `;

            element.innerHTML = content;
            return element;
        }

        // Auth functions
        function setupAuth() {
            const loginBtn = document.getElementById('loginBtn');
            const registerBtn = document.getElementById('registerBtn');
            const loginTab = document.getElementById('login-tab');
            const registerTab = document.getElementById('register-tab');
            const gotoRegister = document.getElementById('goto-register');
            const gotoLogin = document.getElementById('goto-login');
            
            loginBtn.addEventListener('click', loginUser);
            registerBtn.addEventListener('click', registerUser);
            
            loginTab.addEventListener('click', () => switchAuthTab('login'));
            registerTab.addEventListener('click', () => switchAuthTab('login'));
            gotoRegister.addEventListener('click', (e) => {
                e.preventDefault();
                switchAuthTab('register');
            });
            gotoLogin.addEventListener('click', (e) => {
                e.preventDefault();
                switchAuthTab('login');
            });
            
            onAuthStateChanged(auth, async (user) => {
                if (user) {
                    currentUser = user;
                    isLoggedIn = true;
                    
                    try {
                        await loadUserData();
                        showMainApp();
                        
                        console.log(`Utilisateur connecté: ${user.email}`);
                        
                    } catch (error) {
                        console.error(`Erreur initialisation: ${error.message}`);
                        showNotification("Erreur lors de l'initialisation", "error");
                    }
                } else {
                    isLoggedIn = false;
                    currentUser = null;
                    currentUserData = null;
                    isAdmin = false;
                    showAuthScreen();
                }
                
                hideLoading();
            });
        }

        function switchAuthTab(tab) {
            const loginForm = document.getElementById('login-form');
            const registerForm = document.getElementById('register-form');
            const loginTab = document.getElementById('login-tab');
            const registerTab = document.getElementById('register-tab');
            
            if (tab === 'register') {
                loginForm.classList.remove('active');
                registerForm.classList.add('active');
                loginTab.classList.remove('active');
                registerTab.classList.add('active');
            } else {
                registerForm.classList.remove('active');
                loginForm.classList.add('active');
                registerTab.classList.remove('active');
                loginTab.classList.add('active');
            }
            
            clearAuthErrors();
        }

        function clearAuthErrors() {
            document.querySelectorAll('.form-error').forEach(error => {
                error.style.display = 'none';
            });
            document.querySelectorAll('.log-message').forEach(log => {
                log.style.display = 'none';
            });
        }

        async function loginUser() {
            const email = document.getElementById('login-email').value.trim();
            const password = document.getElementById('login-password').value;
            const button = document.getElementById('loginBtn');
            const logElement = document.getElementById('login-log');
            
            clearAuthErrors();
            
            let hasError = false;
            
            if (!email || !email.includes('@')) {
                document.getElementById('login-email-error').style.display = 'block';
                hasError = true;
            }
            
            if (!password) {
                document.getElementById('login-password-error').style.display = 'block';
                hasError = true;
            }
            
            if (hasError) return;
            
            button.classList.add('loading');
            
            try {
                await signInWithEmailAndPassword(auth, email, password);
                
                console.log(`Connexion réussie pour ${email}`);
                logElement.textContent = 'Connexion réussie !';
                logElement.className = 'log-message success';
                logElement.style.display = 'block';
                
            } catch (error) {
                console.error(`Erreur connexion: ${error.message}`);
                
                let errorMessage = 'Erreur de connexion';
                if (error.code === 'auth/user-not-found') {
                    errorMessage = 'Aucun compte trouvé avec cet email';
                } else if (error.code === 'auth/wrong-password') {
                    errorMessage = 'Mot de passe incorrect';
                } else if (error.code === 'auth/invalid-email') {
                    errorMessage = 'Adresse email invalide';
                } else if (error.code === 'auth/too-many-requests') {
                    errorMessage = 'Trop de tentatives. Réessayez plus tard';
                }
                
                logElement.textContent = errorMessage;
                logElement.className = 'log-message error';
                logElement.style.display = 'block';
            }
            
            button.classList.remove('loading');
        }

        async function registerUser() {
            const email = document.getElementById('register-email').value.trim();
            const password = document.getElementById('register-password').value;
            const confirmPassword = document.getElementById('register-confirm-password').value;
            const button = document.getElementById('registerBtn');
            const logElement = document.getElementById('register-log');
            
            clearAuthErrors();
            
            let hasError = false;
            
            if (!email || !email.includes('@')) {
                document.getElementById('register-email-error').style.display = 'block';
                hasError = true;
            }
            
            if (password.length < 6) {
                document.getElementById('register-password-error').style.display = 'block';
                hasError = true;
            }
            
            if (password !== confirmPassword) {
                document.getElementById('register-confirm-password-error').style.display = 'block';
                hasError = true;
            }
            
            if (hasError) return;
            
            button.classList.add('loading');
            
            try {
                const userCredential = await createUserWithEmailAndPassword(auth, email, password);
                const user = userCredential.user;
                
                const userData = {
                    email: user.email,
                    displayName: user.displayName || 'Utilisateur',
                    avatar: 'king1',
                    createdAt: serverTimestamp(),
                    updatedAt: serverTimestamp(),
                    uid: user.uid
                };
                
                await setDoc(doc(db, "Users", user.uid), userData);
                
                console.log(`Inscription réussie pour ${email}`);
                logElement.textContent = 'Compte créé avec succès !';
                logElement.className = 'log-message success';
                logElement.style.display = 'block';
                
            } catch (error) {
                console.error(`Erreur inscription: ${error.message}`);
                
                let errorMessage = 'Erreur lors de la création du compte';
                if (error.code === 'auth/email-already-in-use') {
                    errorMessage = 'Un compte existe déjà avec cet email';
                } else if (error.code === 'auth/invalid-email') {
                    errorMessage = 'Adresse email invalide';
                } else if (error.code === 'auth/weak-password') {
                    errorMessage = 'Le mot de passe est trop faible';
                }
                
                logElement.textContent = errorMessage;
                logElement.className = 'log-message error';
                logElement.style.display = 'block';
            }
            
            button.classList.remove('loading');
        }

        async function loadUserData() {
            if (!currentUser) return;
            
            try {
                const userDoc = await getDoc(doc(db, "Users", currentUser.uid));
                
                if (userDoc.exists()) {
                    currentUserData = userDoc.data();
                    selectedAvatar = currentUserData.avatar || 'king1';
                } else {
                    const userData = {
                        email: currentUser.email,
                        displayName: currentUser.displayName || 'Utilisateur',
                        avatar: 'king1',
                        createdAt: serverTimestamp(),
                        updatedAt: serverTimestamp(),
                        uid: currentUser.uid
                    };
                    
                    await setDoc(doc(db, "Users", currentUser.uid), userData);
                    currentUserData = userData;
                    selectedAvatar = 'king1';
                }
                
                updateProfileDisplay();
                console.log('Données utilisateur chargées');
                
            } catch (error) {
                console.error('Erreur chargement données utilisateur:', error);
            }
        }

        function updateProfileDisplay() {
            if (!currentUserData) return;
            
            const profileNameText = document.getElementById('profile-name-text');
            const profileEmail = document.getElementById('profile-email');
            
            if (profileNameText) {
                profileNameText.textContent = currentUserData.displayName || 'Utilisateur';
            }
            
            if (profileEmail) {
                profileEmail.textContent = currentUser.email;
            }

            if (ADMIN_EMAILS.includes(currentUser.email)) {
                isAdmin = true;
                document.getElementById('admin-badge').style.display = 'inline-block';
            }

            updateProfileAvatar();
        }

        function showAuthScreen() {
            document.getElementById('auth-screen').style.display = 'flex';
            document.getElementById('loading').style.display = 'none';
            hideMainApp();
        }

        function showMainApp() {
            document.getElementById('auth-screen').style.display = 'none';
            document.getElementById('loading').style.display = 'none';
            
            document.querySelector('.header').style.display = 'flex';
            document.querySelector('.main-content').style.display = 'block';
            document.querySelector('.bottom-nav').style.display = 'flex';
            
            showSection('forecasts');
        }

        function hideMainApp() {
            document.querySelector('.header').style.display = 'none';
            document.querySelector('.main-content').style.display = 'none';
            document.querySelector('.bottom-nav').style.display = 'none';
        }

        function showLoading() {
            document.getElementById('loading').style.display = 'flex';
        }

        function hideLoading() {
            document.getElementById('loading').style.display = 'none';
        }

        async function logoutUser() {
            try {
                await signOut(auth);
                console.log('Utilisateur déconnecté avec succès');
                hideConfirmation('logout-confirmation');
                showNotification("Déconnecté avec succès", "success");
                
                isLoggedIn = false;
                currentUser = null;
                currentUserData = null;
                isAdmin = false;
                selectedAvatar = null;
                
                showAuthScreen();
                
            } catch (error) {
                console.error(`Erreur déconnexion: ${error.message}`);
                showNotification("Erreur lors de la déconnexion", "error");
            }
        }

        function showConfirmation(dialogId) {
            document.getElementById(dialogId).classList.add('active');
            document.getElementById('overlay').classList.add('active');
        }

        function hideConfirmation(dialogId) {
            document.getElementById(dialogId).classList.remove('active');
            document.getElementById('overlay').classList.remove('active');
        }

        // Event listeners setup
        function setupEventListeners() {
            // Menu
            document.getElementById('menu-btn').addEventListener('click', function() {
                document.getElementById('side-menu').classList.add('active');
                document.getElementById('side-menu-overlay').classList.add('active');
            });
            
            document.getElementById('side-menu-close').addEventListener('click', function() {
                document.getElementById('side-menu').classList.remove('active');
                document.getElementById('side-menu-overlay').classList.remove('active');
            });
            
            document.getElementById('side-menu-overlay').addEventListener('click', function() {
                document.getElementById('side-menu').classList.remove('active');
                document.getElementById('side-menu-overlay').classList.remove('active');
            });

            // Menu items
            document.getElementById('menu-install').addEventListener('click', function() {
                document.getElementById('side-menu').classList.remove('active');
                document.getElementById('side-menu-overlay').classList.remove('active');
                installApp();
            });

            document.getElementById('menu-secrets').addEventListener('click', function() {
                document.getElementById('side-menu').classList.remove('active');
                document.getElementById('side-menu-overlay').classList.remove('active');
                showSection('secrets');
            });

            document.getElementById('menu-icebet').addEventListener('click', function() {
                document.getElementById('side-menu').classList.remove('active');
                document.getElementById('side-menu-overlay').classList.remove('active');
                showNotification('ICEBET sera bientôt disponible !', 'info');
            });

            document.getElementById('menu-history').addEventListener('click', function() {
                document.getElementById('side-menu').classList.remove('active');
                document.getElementById('side-menu-overlay').classList.remove('active');
                showSection('history');
            });
            
            document.getElementById('menu-interface').addEventListener('click', function() {
                document.getElementById('side-menu').classList.remove('active');
                document.getElementById('side-menu-overlay').classList.remove('active');
                showSection('interface');
            });

            document.getElementById('menu-terms').addEventListener('click', function() {
                document.getElementById('side-menu').classList.remove('active');
                document.getElementById('side-menu-overlay').classList.remove('active');
                showSection('terms');
            });

            document.getElementById('menu-about').addEventListener('click', function() {
                document.getElementById('side-menu').classList.remove('active');
                document.getElementById('side-menu-overlay').classList.remove('active');
                showSection('about');
            });

            // Secrets section - promo code copy
            document.getElementById('promo-code-display').addEventListener('click', function() {
                copyPromoCode('ICEGAME');
            });

            // Back button
            document.getElementById('back-btn').addEventListener('click', function() {
                showSection('forecasts');
            });

            // Bottom navigation
            document.querySelectorAll('.nav-item').forEach(item => {
                item.addEventListener('click', function() {
                    const section = this.dataset.section;
                    showSection(section);
                });
            });

            // Detail view
            document.getElementById('detail-back-btn').addEventListener('click', closeForecastDetail);

            // Detail tabs
            document.querySelectorAll('.detail-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabId = this.dataset.tab;
                    switchDetailTab(tabId);
                });
            });

            // Profile picture click
            document.getElementById('profile-pic').addEventListener('click', openAvatarViewer);

            // Avatar viewer buttons
            document.getElementById('avatar-viewer-close').addEventListener('click', closeAvatarViewer);
            document.getElementById('avatar-edit-btn').addEventListener('click', function() {
                closeAvatarViewer();
                openAvatarSelector();
            });

            // Avatar selector modal
            document.getElementById('avatar-modal-cancel').addEventListener('click', closeAvatarSelector);
            document.getElementById('avatar-modal-save').addEventListener('click', saveSelectedAvatar);

            // Theme selector
            document.querySelectorAll('.theme-option').forEach(option => {
                option.addEventListener('click', function() {
                    const theme = this.getAttribute('data-theme');
                    selectedTheme = theme;
                    
                    const themeClasses = ['theme-green', 'theme-red', 'theme-orange', 'theme-purple', 'theme-teal', 'theme-indigo', 'theme-pink', 'theme-cyan', 'theme-lime', 'theme-amber', 'theme-deep-orange'];
                    document.documentElement.classList.remove(...themeClasses);
                    
                    if (theme !== 'default') {
                        document.documentElement.classList.add(`theme-${theme}`);
                    }
                    
                    document.querySelectorAll('.theme-option').forEach(opt => {
                        opt.classList.remove('active');
                    });
                    this.classList.add('active');
                    
                    localStorage.setItem('kingPronosTheme', theme);
                    
                    const themeNames = {
                        'default': 'Bleu',
                        'green': 'Vert',
                        'red': 'Rouge',
                        'orange': 'Orange',
                        'purple': 'Violet',
                        'teal': 'Turquoise',
                        'indigo': 'Indigo',
                        'pink': 'Rose',
                        'cyan': 'Cyan',
                        'lime': 'Lime',
                        'amber': 'Ambre',
                        'deep-orange': 'Orange Foncé'
                    };
                    
                    showNotification(`Thème ${themeNames[theme]} appliqué`, 'success');
                });
            });

            // Dark mode toggle
            document.getElementById('dark-toggle').addEventListener('change', function() {
                if (this.checked) {
                    document.documentElement.classList.add('dark');
                } else {
                    document.documentElement.classList.remove('dark');
                }
                
                localStorage.setItem('kingPronosDarkMode', this.checked ? 'true' : 'false');
            });

            // Logout
            document.getElementById('logout-btn').addEventListener('click', () => showConfirmation('logout-confirmation'));
            document.getElementById('logout-cancel').addEventListener('click', () => hideConfirmation('logout-confirmation'));
            document.getElementById('logout-confirm').addEventListener('click', logoutUser);

            // Delete account
            document.getElementById('delete-account-btn').addEventListener('click', () => showConfirmation('delete-account-confirmation'));
            document.getElementById('delete-account-cancel').addEventListener('click', () => hideConfirmation('delete-account-confirmation'));
        }

        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            showLoading();
            setupEventListeners();
            setupAuth();
            setupTheme();
            setupDarkMode();
            initializePWA();
            
            console.log('Application KING PRONOS initialisée');
            
            setTimeout(() => {
                if (!isLoggedIn) {
                    hideLoading();
                }
            }, 3000);
        });
    </script>
</body>
</html>
