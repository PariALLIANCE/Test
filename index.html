<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Pari Alliance</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
    <link rel="manifest" href="manifest.json">
    <style>
        :root {
            /* Thème par défaut (bleu) */
            --primary-color: #5D5CDE;
            --text-color: #000000;
            --bg-color: #ffffff;
            --border-color: #dddfe2;
            --secondary-color: #f0f2f5;
            --chat-sent-bg: #5D5CDE;
            --chat-sent-text: #ffffff;
            --chat-received-bg: #f0f2f5;
            --selection-color: rgba(93, 92, 222, 0.3);
            --action-menu-bg: rgba(0, 0, 0, 0.9);
            --action-menu-text: #ffffff;
            --highlight-color: #FFEB3B;
            --blocked-color: #ff6b6b;
            --reaction-bg: rgba(255, 255, 255, 0.9);
            --reaction-shadow: rgba(0, 0, 0, 0.1);
            --group-icon-bg: #4CAF50;
            --danger-color: #ff4842;
            --success-color: #4caf50;
            --input-bg: #f0f2f5;
            --input-placeholder: #8e8e93;
            --button-text: #000000;
            --inactive-text: #8e8e93;
            --link-color: #007aff;
            --admin-badge-bg: #5D5CDE;
            --admin-badge-text: white;
            --log-bg: rgba(0, 0, 0, 0.8);
            --log-text: #ffffff;
            --log-info: #2196F3;
            --log-warning: #FFC107;
            --log-error: #FF5252;
            --log-success: #4CAF50;
            --overlay-bg: rgba(0, 0, 0, 0.7);
            --event-bg: #f1f1f1;
            --event-border: #e0e0e0;
            --restricted-badge-bg: #FFC107;
            --restricted-badge-text: #000000;
            --side-menu-bg: #ffffff;
            --side-menu-active: #f0f2f5;
            --side-menu-hover: #f5f5f5;
            --log-panel-bg: #f8f9fa;
            --log-panel-border: #e0e0e0;
            --link-hover: #0056b3;
            --admin-notif-bg: #f8f9fa;
            --admin-notif-border: #e0e0e0;
            --forecast-win-bg: rgba(76, 175, 80, 0.2);
            --forecast-loss-bg: rgba(244, 67, 54, 0.2);
            --forecast-pending-bg: rgba(255, 193, 7, 0.2);
            --comment-bg: #f5f5f5;
            --comment-border: #ebebeb;
            --social-whatsapp: #25D366;
            --social-telegram: #0088cc;
            --social-youtube: #FF0000;
            --partner-google: #4285F4;
            --partner-firebase: #FFCA28;
            --partner-github: #333333;
            --partner-quora: #B92B27;
            --notification-dot: #FF4842;
            --warning-bg: rgba(255, 152, 0, 0.1);
            --warning-text: #FF9800;
            --image-message-bg: rgba(93, 92, 222, 0.1);
            --image-viewer-bg: rgba(0, 0, 0, 0.9);
            --selected-message-border: rgba(93, 92, 222, 0.7);
            --date-separator-bg: rgba(0, 0, 0, 0.05);
            --date-separator-text: var(--inactive-text);
            --reply-preview-bg: rgba(93, 92, 222, 0.1);
            --reply-preview-border: var(--primary-color);
            --reply-preview-text: var(--text-color);
            --deleted-message-bg: rgba(0, 0, 0, 0.05);
            --deleted-message-text: #888888;
            --action-bar-bg: var(--bg-color);
            --action-bar-text: var(--text-color);
            --action-bar-border: var(--border-color);
            --reply-quote-bg: rgba(93, 92, 222, 0.15);
            --reply-quote-border: var(--primary-color);
            --group-info-bg: var(--bg-color);
            --group-info-border: var(--border-color);
            --download-btn-bg: var(--primary-color);
            --download-btn-text: white;
            --new-badge-bg: var(--primary-color);
            --new-badge-text: white;
            --theme-selector-border: #ddd;
            --user-item-bg: var(--bg-color);
            --unread-badge-bg: #FF4842;
            --unread-badge-text: white;
            --sats-color: #F7931A;
            --plan-active-bg: rgba(93, 92, 222, 0.1);
            --plan-active-border: var(--primary-color);
            --premium-badge-bg: #FFD700;
            --premium-badge-text: #000000;
            --history-date-bg: rgba(93, 92, 222, 0.1);
            --history-date-text: var(--primary-color);
            --card-bg: var(--secondary-color);
            --card-accent: var(--primary-color);
            --card-transition: all 0.3s ease;
        }
        
        /* Thème vert */
        .theme-green {
            --primary-color: #4CAF50;
            --chat-sent-bg: #4CAF50;
            --selection-color: rgba(76, 175, 80, 0.3);
            --admin-badge-bg: #4CAF50;
            --reply-preview-bg: rgba(76, 175, 80, 0.1);
            --reply-preview-border: #4CAF50;
            --reply-quote-bg: rgba(76, 175, 80, 0.15);
            --reply-quote-border: #4CAF50;
            --download-btn-bg: #4CAF50;
            --new-badge-bg: #4CAF50;
            --image-message-bg: rgba(76, 175, 80, 0.1);
            --selected-message-border: rgba(76, 175, 80, 0.7);
            --history-date-bg: rgba(76, 175, 80, 0.1);
            --history-date-text: #4CAF50;
            --card-accent: #4CAF50;
        }
        
        /* Thème rouge */
        .theme-red {
            --primary-color: #F44336;
            --chat-sent-bg: #F44336;
            --selection-color: rgba(244, 67, 54, 0.3);
            --admin-badge-bg: #F44336;
            --reply-preview-bg: rgba(244, 67, 54, 0.1);
            --reply-preview-border: #F44336;
            --reply-quote-bg: rgba(244, 67, 54, 0.15);
            --reply-quote-border: #F44336;
            --download-btn-bg: #F44336;
            --new-badge-bg: #F44336;
            --image-message-bg: rgba(244, 67, 54, 0.1);
            --selected-message-border: rgba(244, 67, 54, 0.7);
            --history-date-bg: rgba(244, 67, 54, 0.1);
            --history-date-text: #F44336;
            --card-accent: #F44336;
        }
        
        /* Thème orange */
        .theme-orange {
            --primary-color: #FF9800;
            --chat-sent-bg: #FF9800;
            --selection-color: rgba(255, 152, 0, 0.3);
            --admin-badge-bg: #FF9800;
            --reply-preview-bg: rgba(255, 152, 0, 0.1);
            --reply-preview-border: #FF9800;
            --reply-quote-bg: rgba(255, 152, 0, 0.15);
            --reply-quote-border: #FF9800;
            --download-btn-bg: #FF9800;
            --new-badge-bg: #FF9800;
            --image-message-bg: rgba(255, 152, 0, 0.1);
            --selected-message-border: rgba(255, 152, 0, 0.7);
            --history-date-bg: rgba(255, 152, 0, 0.1);
            --history-date-text: #FF9800;
            --card-accent: #FF9800;
        }

        /* Nouveau thème rouge-rose */
        .theme-red-pink {
            --primary-color: #E91E63;
            --chat-sent-bg: linear-gradient(135deg, #F44336, #E91E63);
            --selection-color: rgba(233, 30, 99, 0.3);
            --admin-badge-bg: linear-gradient(135deg, #F44336, #E91E63);
            --reply-preview-bg: rgba(233, 30, 99, 0.1);
            --reply-preview-border: #E91E63;
            --reply-quote-bg: rgba(233, 30, 99, 0.15);
            --reply-quote-border: #E91E63;
            --download-btn-bg: linear-gradient(135deg, #F44336, #E91E63);
            --new-badge-bg: linear-gradient(135deg, #F44336, #E91E63);
            --image-message-bg: rgba(233, 30, 99, 0.1);
            --selected-message-border: rgba(233, 30, 99, 0.7);
            --history-date-bg: rgba(233, 30, 99, 0.1);
            --history-date-text: #E91E63;
            --card-accent: #E91E63;
        }

        /* Nouveau thème vert-jaune */
        .theme-green-yellow {
            --primary-color: #8BC34A;
            --chat-sent-bg: linear-gradient(135deg, #4CAF50, #CDDC39);
            --selection-color: rgba(139, 195, 74, 0.3);
            --admin-badge-bg: linear-gradient(135deg, #4CAF50, #CDDC39);
            --reply-preview-bg: rgba(139, 195, 74, 0.1);
            --reply-preview-border: #8BC34A;
            --reply-quote-bg: rgba(139, 195, 74, 0.15);
            --reply-quote-border: #8BC34A;
            --download-btn-bg: linear-gradient(135deg, #4CAF50, #CDDC39);
            --new-badge-bg: linear-gradient(135deg, #4CAF50, #CDDC39);
            --image-message-bg: rgba(139, 195, 74, 0.1);
            --selected-message-border: rgba(139, 195, 74, 0.7);
            --history-date-bg: rgba(139, 195, 74, 0.1);
            --history-date-text: #8BC34A;
            --card-accent: #8BC34A;
        }

        /* Nouveau thème bleu-violet */
        .theme-blue-purple {
            --primary-color: #673AB7;
            --chat-sent-bg: linear-gradient(135deg, #2196F3, #9C27B0);
            --selection-color: rgba(103, 58, 183, 0.3);
            --admin-badge-bg: linear-gradient(135deg, #2196F3, #9C27B0);
            --reply-preview-bg: rgba(103, 58, 183, 0.1);
            --reply-preview-border: #673AB7;
            --reply-quote-bg: rgba(103, 58, 183, 0.15);
            --reply-quote-border: #673AB7;
            --download-btn-bg: linear-gradient(135deg, #2196F3, #9C27B0);
            --new-badge-bg: linear-gradient(135deg, #2196F3, #9C27B0);
            --image-message-bg: rgba(103, 58, 183, 0.1);
            --selected-message-border: rgba(103, 58, 183, 0.7);
            --history-date-bg: rgba(103, 58, 183, 0.1);
            --history-date-text: #673AB7;
            --card-accent: #673AB7;
        }

        /* Nouveau thème orange-doré */
        .theme-orange-gold {
            --primary-color: #FF8F00;
            --chat-sent-bg: linear-gradient(135deg, #FF9800, #FFC107);
            --selection-color: rgba(255, 143, 0, 0.3);
            --admin-badge-bg: linear-gradient(135deg, #FF9800, #FFC107);
            --reply-preview-bg: rgba(255, 143, 0, 0.1);
            --reply-preview-border: #FF8F00;
            --reply-quote-bg: rgba(255, 143, 0, 0.15);
            --reply-quote-border: #FF8F00;
            --download-btn-bg: linear-gradient(135deg, #FF9800, #FFC107);
            --new-badge-bg: linear-gradient(135deg, #FF9800, #FFC107);
            --image-message-bg: rgba(255, 143, 0, 0.1);
            --selected-message-border: rgba(255, 143, 0, 0.7);
            --history-date-bg: rgba(255, 143, 0, 0.1);
            --history-date-text: #FF8F00;
            --card-accent: #FF8F00;
        }

        /* Nouveaux thèmes */
        .theme-purple {
            --primary-color: #9C27B0;
            --card-accent: #9C27B0;
        }

        .theme-teal {
            --primary-color: #009688;
            --card-accent: #009688;
        }

        .theme-indigo {
            --primary-color: #3F51B5;
            --card-accent: #3F51B5;
        }

        .theme-pink {
            --primary-color: #E91E63;
            --card-accent: #E91E63;
        }

        .theme-cyan {
            --primary-color: #00BCD4;
            --card-accent: #00BCD4;
        }

        .theme-lime {
            --primary-color: #CDDC39;
            --card-accent: #CDDC39;
        }

        .theme-amber {
            --primary-color: #FFC107;
            --card-accent: #FFC107;
        }

        .theme-deep-orange {
            --primary-color: #FF5722;
            --card-accent: #FF5722;
        }

        /* Nouveau thème High-Tech */
        .theme-hightech {
            --primary-color: #00E5FF;
            --text-color: #E0E6ED;
            --bg-color: #0A0E27;
            --border-color: #1E2A4A;
            --secondary-color: #0F1B3C;
            --chat-sent-bg: linear-gradient(135deg, #00E5FF, #0066CC);
            --chat-sent-text: #ffffff;
            --chat-received-bg: #1A2332;
            --selection-color: rgba(0, 229, 255, 0.4);
            --action-menu-bg: rgba(10, 14, 39, 0.95);
            --action-menu-text: #E0E6ED;
            --highlight-color: #00E5FF;
            --blocked-color: #FF3D71;
            --reaction-bg: rgba(26, 35, 50, 0.9);
            --reaction-shadow: rgba(0, 229, 255, 0.2);
            --group-icon-bg: #4CAF50;
            --danger-color: #FF3D71;
            --success-color: #4ECDC4;
            --input-bg: #1A2332;
            --input-placeholder: #6C7B8A;
            --button-text: #ffffff;
            --inactive-text: #6C7B8A;
            --link-color: #00E5FF;
            --admin-badge-bg: linear-gradient(135deg, #00E5FF, #0066CC);
            --admin-badge-text: white;
            --log-bg: rgba(10, 14, 39, 0.9);
            --log-text: #E0E6ED;
            --log-info: #00E5FF;
            --log-warning: #FFB74D;
            --log-error: #FF3D71;
            --log-success: #4ECDC4;
            --overlay-bg: rgba(10, 14, 39, 0.8);
            --event-bg: #1A2332;
            --event-border: #2E3D5C;
            --restricted-badge-bg: #FFB74D;
            --restricted-badge-text: #000000;
            --side-menu-bg: #0F1B3C;
            --side-menu-active: #1A2332;
            --side-menu-hover: #1E2A4A;
            --log-panel-bg: #0F1B3C;
            --log-panel-border: #2E3D5C;
            --link-hover: #33F3FF;
            --admin-notif-bg: #1A2332;
            --admin-notif-border: #2E3D5C;
            --forecast-win-bg: rgba(78, 205, 196, 0.2);
            --forecast-loss-bg: rgba(255, 61, 113, 0.2);
            --forecast-pending-bg: rgba(255, 183, 77, 0.2);
            --comment-bg: #1A2332;
            --comment-border: #2E3D5C;
            --social-whatsapp: #25D366;
            --social-telegram: #0088cc;
            --social-youtube: #FF0000;
            --partner-google: #4285F4;
            --partner-firebase: #FFCA28;
            --partner-github: #333333;
            --partner-quora: #B92B27;
            --notification-dot: #FF3D71;
            --warning-bg: rgba(255, 183, 77, 0.15);
            --warning-text: #FFB74D;
            --image-message-bg: rgba(0, 229, 255, 0.15);
            --image-viewer-bg: rgba(10, 14, 39, 0.95);
            --selected-message-border: rgba(0, 229, 255, 0.8);
            --date-separator-bg: rgba(224, 230, 237, 0.1);
            --date-separator-text: #6C7B8A;
            --reply-preview-bg: rgba(0, 229, 255, 0.15);
            --reply-preview-border: #00E5FF;
            --reply-preview-text: #E0E6ED;
            --deleted-message-bg: rgba(224, 230, 237, 0.05);
            --deleted-message-text: #6C7B8A;
            --action-bar-bg: #0F1B3C;
            --action-bar-text: #E0E6ED;
            --action-bar-border: #2E3D5C;
            --reply-quote-bg: rgba(0, 229, 255, 0.2);
            --reply-quote-border: #00E5FF;
            --group-info-bg: #0F1B3C;
            --group-info-border: #2E3D5C;
            --download-btn-bg: linear-gradient(135deg, #00E5FF, #0066CC);
            --download-btn-text: white;
            --new-badge-bg: linear-gradient(135deg, #00E5FF, #0066CC);
            --new-badge-text: white;
            --theme-selector-border: #2E3D5C;
            --user-item-bg: #0F1B3C;
            --unread-badge-bg: #FF3D71;
            --unread-badge-text: white;
            --sats-color: #FFB74D;
            --plan-active-bg: rgba(0, 229, 255, 0.15);
            --plan-active-border: #00E5FF;
            --premium-badge-bg: linear-gradient(135deg, #FFD700, #FFA000);
            --premium-badge-text: #000000;
            --history-date-bg: rgba(0, 229, 255, 0.15);
            --history-date-text: #00E5FF;
            --card-bg: #1A2332;
            --card-accent: #00E5FF;
            --card-transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Styles de transition pour les cartes */
        .card-transition-smooth {
            --card-transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .card-transition-bounce {
            --card-transition: all 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        .card-transition-elastic {
            --card-transition: all 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .card-transition-fast {
            --card-transition: all 0.2s ease-out;
        }

        .card-transition-slow {
            --card-transition: all 0.8s ease-in-out;
        }

        /* Styles de couleur pour les cartes */
        .card-style-gradient {
            --card-bg: linear-gradient(135deg, var(--secondary-color), rgba(var(--primary-color), 0.1));
        }

        .card-style-glass {
            --card-bg: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .card-style-shadow {
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
        }

        .card-style-neon {
            border: 2px solid var(--card-accent);
            box-shadow: 0 0 20px rgba(var(--primary-color), 0.3);
        }

        /* Effets spéciaux pour le thème High-Tech */
        .theme-hightech .forecast-item {
            background: rgba(26, 35, 50, 0.8);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(0, 229, 255, 0.3);
            box-shadow: 
                0 8px 32px rgba(0, 0, 0, 0.3),
                0 0 20px rgba(0, 229, 255, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            position: relative;
            overflow: hidden;
        }

        .theme-hightech .forecast-item:hover {
            box-shadow: 
                0 12px 48px rgba(0, 0, 0, 0.4),
                0 0 30px rgba(0, 229, 255, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.15);
            transform: translateY(-4px);
        }

        .theme-hightech .forecast-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0, 229, 255, 0.1), transparent);
            animation: shimmer 3s infinite;
            pointer-events: none;
        }

        @keyframes shimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        .theme-hightech .forecast-card-container {
            background: rgba(15, 27, 60, 0.9);
            backdrop-filter: blur(20px);
            border-radius: 15px;
        }

        .theme-hightech .forecast-face {
            background: rgba(26, 35, 50, 0.95);
            backdrop-filter: blur(25px);
        }

        .theme-hightech .header {
            background: rgba(10, 14, 39, 0.95);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(0, 229, 255, 0.3);
            box-shadow: 0 2px 20px rgba(0, 229, 255, 0.1);
        }

        .theme-hightech .bottom-nav {
            background: rgba(10, 14, 39, 0.95);
            backdrop-filter: blur(20px);
            border-top: 1px solid rgba(0, 229, 255, 0.3);
            box-shadow: 0 -2px 20px rgba(0, 229, 255, 0.1);
        }

        .theme-hightech .side-menu {
            background: rgba(15, 27, 60, 0.95);
            backdrop-filter: blur(25px);
            border-right: 1px solid rgba(0, 229, 255, 0.3);
        }

        .theme-hightech .button {
            background: linear-gradient(135deg, #00E5FF, #0066CC);
            border: 1px solid rgba(0, 229, 255, 0.5);
            box-shadow: 0 4px 15px rgba(0, 229, 255, 0.3);
            position: relative;
            overflow: hidden;
        }

        .theme-hightech .button:hover {
            box-shadow: 0 6px 25px rgba(0, 229, 255, 0.5);
            transform: translateY(-2px);
        }

        .theme-hightech .button::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transform: rotate(45deg);
            transition: all 0.5s;
            opacity: 0;
        }

        .theme-hightech .button:hover::before {
            animation: buttonShine 0.8s ease-out;
        }

        @keyframes buttonShine {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); opacity: 0; }
            50% { opacity: 1; }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); opacity: 0; }
        }

        .theme-hightech .form-input {
            background: rgba(26, 35, 50, 0.8);
            border: 1px solid rgba(0, 229, 255, 0.3);
            color: #E0E6ED;
            backdrop-filter: blur(10px);
        }

        .theme-hightech .form-input:focus {
            border-color: #00E5FF;
            box-shadow: 0 0 20px rgba(0, 229, 255, 0.3);
        }

        .theme-hightech .confidence-bar {
            background: linear-gradient(90deg, #00E5FF, #4ECDC4);
            box-shadow: 0 2px 10px rgba(0, 229, 255, 0.4);
        }

        .theme-hightech .nav-item.active {
            color: #00E5FF;
            text-shadow: 0 0 10px rgba(0, 229, 255, 0.8);
        }

        .theme-hightech .admin-badge {
            background: linear-gradient(135deg, #00E5FF, #0066CC);
            box-shadow: 0 2px 10px rgba(0, 229, 255, 0.5);
        }
        
        .dark {
            --bg-color: #181818;
            --text-color: #ffffff;
            --border-color: #3e4042;
            --secondary-color: #2c2c2c;
            --chat-received-bg: #2c2c2c;
            --chat-sent-text: #ffffff;
            --selection-color: rgba(93, 92, 222, 0.4);
            --action-menu-bg: rgba(60, 60, 60, 0.95);
            --highlight-color: #FFEB3B;
            --blocked-color: #ff6b6b;
            --reaction-bg: rgba(40, 40, 40, 0.9);
            --reaction-shadow: rgba(0, 0, 0, 0.3);
            --group-icon-bg: #388E3C;
            --danger-color: #ff6b6b;
            --success-color: #66bb6a;
            --input-bg: #2c2c2c;
            --input-placeholder: #6c6c6c;
            --link-color: #2196F3;
            --admin-badge-text: white;
            --log-bg: rgba(20, 20, 20, 0.9);
            --log-info: #64B5F6;
            --log-warning: #FFD54F;
            --log-error: #FF8A80;
            --log-success: #81C784;
            --overlay-bg: rgba(0, 0, 0, 0.8);
            --event-bg: #2a2a2a;
            --event-border: #3e3e3e;
            --restricted-badge-bg: #FFC107;
            --restricted-badge-text: #000000;
            --side-menu-bg: #222222;
            --side-menu-active: #333333;
            --side-menu-hover: #2a2a2a;
            --log-panel-bg: #222222;
            --log-panel-border: #3e3e3e;
            --link-hover: #64B5F6;
            --admin-notif-bg: #2a2a2a;
            --admin-notif-border: #333333;
            --forecast-win-bg: rgba(76, 175, 80, 0.15);
            --forecast-loss-bg: rgba(244, 67, 54, 0.15);
            --forecast-pending-bg: rgba(255, 193, 7, 0.15);
            --comment-bg: #2a2a2a;
            --comment-border: #333333;
            --notification-dot: #FF4842;
            --warning-bg: rgba(255, 152, 0, 0.15);
            --warning-text: #FFA726;
            --image-message-bg: rgba(93, 92, 222, 0.15);
            --image-viewer-bg: rgba(0, 0, 0, 0.95);
            --selected-message-border: rgba(93, 92, 222, 0.8);
            --date-separator-bg: rgba(255, 255, 255, 0.1);
            --date-separator-text: #aaaaaa;
            --reply-preview-bg: rgba(93, 92, 222, 0.15);
            --reply-preview-text: var(--text-color);
            --deleted-message-bg: rgba(255, 255, 255, 0.05);
            --deleted-message-text: #888888;
            --action-bar-bg: #222222;
            --action-bar-text: #ffffff;
            --action-bar-border: #3e3e3e;
            --reply-quote-bg: rgba(93, 92, 222, 0.2);
            --group-info-bg: #222222;
            --group-info-border: #3e3e3e;
            --download-btn-text: white;
            --theme-selector-border: #444;
            --user-item-bg: #222222;
            --plan-active-bg: rgba(93, 92, 222, 0.15);
            --history-date-bg: rgba(93, 92, 222, 0.15);
            --card-bg: #2c2c2c;
        }

        /* Mode sombre pour le thème High-Tech - encore plus sombre et lisse */
        .theme-hightech.dark {
            --bg-color: #000000;
            --text-color: #F5F7FA;
            --border-color: #0A0E27;
            --secondary-color: #030712;
            --card-bg: #060B1F;
            --side-menu-bg: #020408;
            --log-panel-bg: #020408;
            --admin-notif-bg: #060B1F;
            --event-bg: #060B1F;
            --comment-bg: #060B1F;
            --action-bar-bg: #020408;
            --group-info-bg: #020408;
            --user-item-bg: #020408;
            --input-bg: #060B1F;
        }

        /* Mode clair pour le thème High-Tech - plus clair et doux */
        .theme-hightech:not(.dark) {
            --bg-color: #F8FAFC;
            --text-color: #1E293B;
            --secondary-color: #F1F5F9;
            --card-bg: #FFFFFF;
            --border-color: #E2E8F0;
        }
        
        * {
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            margin: 0;
            padding: 0;
            user-select: none;
            -webkit-user-select: none;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100vh;
            position: fixed;
            overflow: hidden;
            font-weight: 500;
            letter-spacing: -0.2px;
        }
        
        .side-menu {
            position: fixed;
            top: 0;
            left: -250px;
            height: 100%;
            width: 250px;
            background-color: var(--side-menu-bg);
            z-index: 1000;
            transition: left 0.3s ease;
            box-shadow: 2px 0 10px rgba(0,0,0,0.2);
            display: flex;
            flex-direction: column;
        }
        
        .side-menu.active {
            left: 0;
        }
        
        .side-menu-header {
            display: flex;
            align-items: center;
            padding: 20px 15px;
            border-bottom: none;
        }
        
        .side-menu-title {
            font-size: 20px;
            font-weight: bold;
            color: var(--primary-color);
            margin-left: 15px;
        }
        
        .side-menu-close {
            font-size: 20px;
            color: var(--text-color);
            cursor: pointer;
            padding: 5px;
            border-radius: 50%;
        }
        
        .side-menu-content {
            flex: 1;
            overflow-y: auto;
        }
        
        .side-menu-item {
            padding: 15px 20px;
            display: flex;
            align-items: center;
            cursor: pointer;
        }
        
        .side-menu-item.active {
            background-color: var(--side-menu-active);
        }
        
        .side-menu-item i {
            font-size: 20px;
            width: 30px;
            color: var(--primary-color);
        }
        
        .side-menu-text {
            margin-left: 15px;
            font-weight: 500;
        }
        
        .side-menu-footer {
            margin-top: auto;
        }
        
        .side-menu-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0,0,0,0.5);
            z-index: 999;
            display: none;
        }
        
        .side-menu-overlay.active {
            display: block;
        }
        
        .header {
            background-color: var(--bg-color);
            border-bottom: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 50px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 15px;
            z-index: 10;
            transition: all 0.3s ease;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .header.search-active {
            height: 50px;
        }
        
        .header-left {
            display: flex;
            align-items: center;
            transition: opacity 0.3s ease;
        }
        
        .header-title {
            font-weight: bold;
            font-size: 18px;
            color: var(--primary-color);
            border-bottom: none;
            text-decoration: none;
            transition: opacity 0.3s ease;
            flex: 1;
        }
        
        #header-action {
            display: flex;
            align-items: center;
            gap: 15px;
            transition: opacity 0.3s ease;
        }
        
        .menu-button, .back-button, .search-button, .events-button, .info-button, .select-button {
            padding: 8px;
            cursor: pointer;
            font-size: 18px;
            color: var(--primary-color);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.2s ease;
        }
        
        .menu-button:active, .back-button:active, .search-button:active, .events-button:active, .info-button:active, .select-button:active {
            background-color: var(--secondary-color);
        }
        
        .notification-dot {
            position: absolute;
            top: 2px;
            right: 2px;
            width: 8px;
            height: 8px;
            background-color: var(--notification-dot);
            border-radius: 50%;
            display: none;
        }
        
        .notification-dot.active {
            display: block;
        }
        
        .events-button {
            position: relative;
        }
        
        .search-container {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 50px;
            background-color: var(--bg-color);
            display: flex;
            align-items: center;
            padding: 0 15px;
            opacity: 0;
            pointer-events: none;
            transform: translateY(-5px);
            transition: opacity 0.3s ease, transform 0.3s ease;
            z-index: 20;
        }
        
        .search-container.active {
            opacity: 1;
            pointer-events: auto;
            transform: translateY(0);
        }
        
        .search-input {
            flex: 1;
            padding: 10px 15px;
            border-radius: 18px;
            border: none;
            background-color: var(--secondary-color);
            font-size: 16px;
            color: var(--text-color);
            outline: none;
            margin-right: 10px;
            transition: background-color 0.2s ease;
        }
        
        .search-close {
            padding: 8px;
            color: var(--primary-color);
            cursor: pointer;
            font-size: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: background-color 0.2s ease;
        }
        
        .search-close:active {
            background-color: var(--secondary-color);
        }
        
        .header.search-active .header-left,
        .header.search-active .header-title,
        .header.search-active #header-action {
            opacity: 0;
            pointer-events: none;
        }

        /* Debug log panel */
        .debug-log-panel {
            position: fixed;
            bottom: 80px;
            left: 10px;
            right: 10px;
            max-height: 200px;
            background-color: var(--log-panel-bg);
            border: 1px solid var(--log-panel-border);
            border-radius: 8px;
            z-index: 1001;
            display: none;
            flex-direction: column;
            overflow: hidden;
        }

        .debug-log-panel.active {
            display: flex;
        }

        .debug-log-header {
            padding: 10px 15px;
            background-color: var(--primary-color);
            color: white;
            font-weight: bold;
            font-size: 14px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .debug-log-close {
            cursor: pointer;
            padding: 2px 5px;
            border-radius: 3px;
            transition: background-color 0.2s ease;
        }

        .debug-log-close:hover {
            background-color: rgba(255, 255, 255, 0.2);
        }

        .debug-log-content {
            flex: 1;
            overflow-y: auto;
            padding: 10px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            line-height: 1.4;
        }

        .debug-log-item {
            margin-bottom: 8px;
            padding: 6px 8px;
            border-radius: 4px;
            border-left: 3px solid;
        }

        .debug-log-item.error {
            background-color: rgba(244, 67, 54, 0.1);
            border-left-color: var(--log-error);
            color: var(--log-error);
        }

        .debug-log-item.warning {
            background-color: rgba(255, 193, 7, 0.1);
            border-left-color: var(--log-warning);
            color: var(--log-warning);
        }

        .debug-log-item.info {
            background-color: rgba(33, 150, 243, 0.1);
            border-left-color: var(--log-info);
            color: var(--log-info);
        }

        .debug-log-item.success {
            background-color: rgba(76, 175, 80, 0.1);
            border-left-color: var(--log-success);
            color: var(--log-success);
        }

        .debug-log-timestamp {
            font-size: 10px;
            opacity: 0.7;
            margin-right: 5px;
        }

        .debug-log-link {
            color: var(--link-color);
            text-decoration: underline;
            cursor: pointer;
            word-break: break-all;
        }

        .debug-log-link:hover {
            color: var(--link-hover);
        }

        .debug-toggle-btn {
            position: fixed;
            bottom: 20px;
            left: 20px;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--log-error);
            color: white;
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1002;
            cursor: pointer;
            font-size: 16px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
            transition: transform 0.2s ease;
        }

        .debug-toggle-btn.active {
            display: flex;
        }

        .debug-toggle-btn:hover {
            transform: scale(1.1);
        }
        
        .content {
            position: fixed;
            top: 50px;
            bottom: 60px;
            left: 0;
            right: 0;
            overflow: hidden;
            background-color: var(--bg-color);
        }
        
        .content.no-bottom-nav {
            bottom: 0;
        }
        
        .bottom-nav {
            background-color: var(--bg-color);
            border-top: none;
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: 60px;
            display: flex;
            z-index: 10;
            box-shadow: 0 -1px 3px rgba(0,0,0,0.1);
        }
        
        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            flex: 1;
            color: var(--inactive-text);
            font-size: 10px;
            cursor: pointer;
            height: 100%;
            padding: 8px 0;
            position: relative;
        }
        
        .nav-item.active {
            color: var(--primary-color);
        }
        
        .nav-icon {
            font-size: 22px;
            margin-bottom: 4px;
        }
        
        .section {
            padding: 0;
            display: none;
            height: 100%;
            overflow: hidden;
        }
        
        .section.active {
            display: flex;
            flex-direction: column;
        }
        
        .profile-pic {
            width: 50px;
            height: 50px;
            background-color: var(--secondary-color);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 12px;
            position: relative;
            overflow: hidden;
        }
        
        .profile-pic img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            pointer-events: none;
        }
        
        .profile-pic-edit {
            position: absolute;
            bottom: 0;
            right: 0;
            background-color: var(--primary-color);
            color: white;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            cursor: pointer;
            box-shadow: 0 1px 2px rgba(0,0,0,0.2);
            transition: transform 0.2s ease;
        }
        
        .profile-pic-edit:hover, .profile-pic-edit:active {
            transform: scale(1.1);
        }
        
        .loading {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--bg-color);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 999;
        }
        
        .loading-spinner {
            font-size: 60px;
            color: var(--primary-color);
            animation: pulse 2s infinite, bounce 1.5s infinite;
            margin-bottom: 20px;
            text-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-20px); }
            60% { transform: translateY(-10px); }
        }
        
        .settings-container {
            padding: 15px;
            overflow-y: auto;
            height: 100%;
        }
        
        .setting-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: none;
            cursor: pointer;
        }
        
        .setting-icon {
            width: 36px;
            height: 36px;
            background-color: var(--secondary-color);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
        }
        
        .setting-row {
            display: flex;
            align-items: center;
            flex: 1;
        }
        
        .setting-label {
            font-weight: 500;
        }
        
        .button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 10px;
            padding: 12px;
            font-size: 16px;
            font-weight: bold;
            width: 100%;
            margin-top: 20px;
            cursor: pointer;
            transition: transform 0.15s ease, opacity 0.2s ease, background-color 0.2s ease;
            position: relative;
            overflow: hidden;
        }
        
        .button:active {
            transform: scale(0.98);
            opacity: 0.9;
        }
        
        .button:hover {
            background-color: #4a49c0;
        }

        .button:disabled {
            background-color: var(--border-color);
            color: var(--inactive-text);
            cursor: not-allowed;
        }
        
        .button.danger {
            background-color: var(--danger-color);
            color: white;
        }
        
        .button.danger:hover {
            background-color: #e53935;
        }

        .button.claim {
            background-color: var(--success-color);
            color: white;
            font-weight: bold;
            padding: 12px 20px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(76, 175, 80, 0.3);
        }

        .button.claim:hover {
            background-color: #45a049;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(76, 175, 80, 0.4);
        }
        
        .switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 26px;
        }
        
        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 34px;
        }
        
        .slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        
        input:checked + .slider {
            background-color: var(--primary-color);
        }
        
        input:checked + .slider:before {
            transform: translateX(24px);
        }
        
        .profile-header {
            display: flex;
            align-items: flex-start;
            padding: 20px;
            border-bottom: none;
        }
        
        .profile-header .profile-pic {
            width: 80px;
            height: 80px;
            margin-right: 20px;
        }
        
        .profile-header .profile-pic i {
            font-size: 30px;
            color: var(--primary-color);
        }
        
        .profile-info {
            display: flex;
            flex-direction: column;
            flex: 1;
        }
        
        .profile-name {
            font-weight: bold;
            font-size: 20px;
            margin-bottom: 5px;
            display: flex;
            align-items: center;
        }
        
        .profile-email {
            color: #6b7280;
            font-size: 16px;
            margin-bottom: 5px;
        }
        
        .profile-status {
            color: #6b7280;
        }
        
        .profile-edit {
            color: var(--primary-color);
            font-size: 14px;
            margin-top: 5px;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 5px;
            padding: 5px 8px;
            border-radius: 15px;
        }
        
        .auth-screen {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--bg-color);
            z-index: 1000;
            display: flex;
            flex-direction: column;
            overflow-y: auto;
        }
        
        .auth-header {
            padding: 40px 0 20px;
            text-align: center;
        }
        
        .auth-logo {
            font-size: 50px;
            color: var(--primary-color);
            margin-bottom: 15px;
            animation: float 3s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        .auth-title {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 10px;
            color: var(--primary-color);
        }
        
        .auth-subtitle {
            font-size: 16px;
            color: var(--text-color);
            opacity: 0.8;
            margin-bottom: 20px;
            padding: 0 20px;
            text-align: center;
        }
        
        .auth-tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: none;
        }
        
        .auth-tab {
            flex: 1;
            text-align: center;
            padding: 15px 0;
            font-weight: bold;
            cursor: pointer;
            position: relative;
            color: var(--inactive-text);
            transition: color 0.3s, background-color 0.2s ease;
            text-decoration: none;
            border-bottom: none;
        }
        
        .auth-tab.active {
            color: var(--primary-color);
        }
        
        .auth-tab.active::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 25%;
            width: 50%;
            height: 3px;
            background-color: var(--primary-color);
            border-radius: 3px 3px 0 0;
            animation: slideIn 0.3s ease;
        }
        
        @keyframes slideIn {
            from { transform: scaleX(0); }
            to { transform: scaleX(1); }
        }
        
        .auth-form {
            padding: 20px;
            display: none;
            animation: fadeUp 0.5s ease;
        }
        
        @keyframes fadeUp {
            from { 
                opacity: 0;
                transform: translateY(20px);
            }
            to { 
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .auth-form.active {
            display: block;
        }
        
        .form-group {
            margin-bottom: 20px;
            position: relative;
        }
        
        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            font-size: 14px;
        }
        
        .form-input {
            width: 100%;
            padding: 15px;
            border-radius: 10px;
            border: 1px solid var(--border-color);
            background-color: var(--input-bg);
            font-size: 16px;
            color: var(--text-color);
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
            outline: none;
        }
        
        .form-input:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(93, 92, 222, 0.25);
        }
        
        .form-input::placeholder {
            color: var(--input-placeholder);
        }
        
        .form-error {
            color: var(--danger-color);
            font-size: 13px;
            margin-top: 6px;
            display: none;
            animation: shakeX 0.75s ease;
        }
        
        @keyframes shakeX {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-4px); }
            20%, 40%, 60%, 80% { transform: translateX(4px); }
        }
        
        .form-footer {
            margin-top: 30px;
            text-align: center;
        }
        
        .form-footer-text {
            margin-top: 15px;
            font-size: 14px;
            color: var(--text-color);
            opacity: 0.8;
        }
        
        .form-link {
            color: var(--link-color);
            text-decoration: none;
            font-weight: bold;
            transition: color 0.2s;
        }
        
        .form-link:hover {
            text-decoration: underline;
        }

        .log-message {
            margin-top: 15px;
            padding: 12px;
            font-weight: bold;
            border-radius: 6px;
            white-space: pre-line;
            text-align: center;
            animation: fadeIn 0.5s ease;
        }
          
        .log-message.info {
            background: #d1ecf1;
            color: #0c5460;
        }
          
        .log-message.success {
            background: #d4edda;
            color: #155724;
        }
          
        .log-message.error {
            background: #f8d7da;
            color: #721c24;
        }

        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: var(--inactive-text);
        }

        .empty-state i {
            font-size: 50px;
            margin-bottom: 15px;
            color: var(--border-color);
        }

        .empty-state-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .empty-state-text {
            font-size: 14px;
            line-height: 1.5;
            margin-bottom: 20px;
        }

        .btn-loader {
            display: inline-block;
            width: 20px;
            height: 20px;
            margin-right: 8px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 0.8s linear infinite;
            vertical-align: middle;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .button.loading {
            pointer-events: none;
            opacity: 0.8;
        }
        
        .button.loading .btn-text {
            visibility: hidden;
        }
        
        .button.loading .btn-loader {
            position: absolute;
            top: 50%;
            left: 50%;
            margin-top: -10px;
            margin-left: -10px;
            visibility: visible;
        }
        
        .notification {
            position: fixed;
            bottom: 80px;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            opacity: 0;
            background-color: var(--bg-color);
            color: var(--text-color);
            padding: 12px 20px;
            border-radius: 15px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            font-weight: 500;
            z-index: 1000;
            max-width: 90%;
            text-align: center;
            line-height: 1.4;
            transition: opacity 0.3s ease, transform 0.3s ease;
            pointer-events: none;
        }

        .notification.show {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
            pointer-events: auto;
        }

        .notification.success {
            background-color: var(--bg-color);
            color: var(--success-color);
        }

        .notification.error {
            background-color: var(--bg-color);
            color: var(--danger-color);
        }

        .notification.info {
            background-color: var(--bg-color);
            color: var(--primary-color);
        }
        
        .verify-animation {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--bg-color);
            z-index: 2000;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .football-bounce {
            font-size: 80px;
            color: var(--primary-color);
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-40px); }
            60% { transform: translateY(-20px); }
        }

        .verify-text {
            margin-top: 30px;
            font-size: 16px;
            color: var(--text-color);
            opacity: 0.8;
            text-align: center;
        }
        
        .confirmation-dialog {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: var(--bg-color);
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            width: 85%;
            max-width: 300px;
            padding: 20px;
            z-index: 150;
            display: none;
        }
        
        .confirmation-dialog.active {
            display: block;
        }
        
        .confirmation-title {
            font-weight: bold;
            font-size: 18px;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .confirmation-text {
            margin-bottom: 20px;
            text-align: center;
            line-height: 1.4;
        }
        
        .confirmation-buttons {
            display: flex;
            justify-content: space-between;
        }
        
        .confirmation-button {
            padding: 10px 15px;
            border-radius: 6px;
            font-weight: bold;
            cursor: pointer;
            min-width: 100px;
            text-align: center;
        }
        
        .confirmation-cancel {
            background-color: var(--secondary-color);
            color: var(--text-color);
        }
        
        .confirmation-confirm {
            background-color: var(--primary-color);
            color: white;
        }
        
        .confirmation-delete {
            background-color: var(--danger-color);
            color: white;
        }
        
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 90;
            display: none;
        }
        
        .overlay.active {
            display: block;
        }

        .event-icon {
            width: 50px;
            height: 50px;
            background-color: var(--event-bg);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 12px;
            border: 1px solid var(--event-border);
        }
        
        .event-icon i {
            font-size: 22px;
            color: var(--primary-color);
        }

        .event-item {
            transition: none;
            cursor: default;
            position: relative;
        }

        .event-header {
            font-weight: bold;
            margin-bottom: 5px;
        }

        .event-content {
            font-size: 14px;
            color: var(--text-color);
            opacity: 0.8;
        }

        .event-time {
            font-size: 12px;
            color: var(--inactive-text);
            margin-top: 5px;
        }
        
        .admin-badge {
            display: inline-block;
            background-color: var(--admin-badge-bg);
            color: var(--admin-badge-text);
            font-size: 10px;
            padding: 2px 6px;
            border-radius: 10px;
            margin-left: 6px;
            font-weight: bold;
            text-transform: uppercase;
        }

        .premium-badge {
            display: inline-block;
            background-color: var(--premium-badge-bg);
            color: var(--premium-badge-text);
            font-size: 10px;
            padding: 2px 6px;
            border-radius: 10px;
            margin-left: 6px;
            font-weight: bold;
            text-transform: uppercase;
        }

        .restricted-badge {
            display: inline-block;
            background-color: var(--restricted-badge-bg);
            color: var(--restricted-badge-text);
            font-size: 10px;
            padding: 2px 6px;
            border-radius: 10px;
            margin-left: 6px;
            font-weight: bold;
            text-transform: uppercase;
        }
        
        .new-badge {
            display: inline-block;
            background-color: var(--new-badge-bg);
            color: var(--new-badge-text);
            font-size: 10px;
            padding: 2px 6px;
            border-radius: 10px;
            margin-left: 6px;
            font-weight: bold;
            text-transform: uppercase;
        }
        
        .admin-count-badge {
            display: inline-block;
            background-color: var(--primary-color);
            color: white;
            font-size: 12px;
            padding: 2px 8px;
            border-radius: 12px;
            font-weight: bold;
            margin-left: 6px;
        }

        .event-item.group-create .event-icon {
            background-color: rgba(76, 175, 80, 0.2);
        }
        
        .event-item.group-create .event-icon i {
            color: var(--success-color);
        }
        
        .event-item.permission-change .event-icon {
            background-color: rgba(255, 193, 7, 0.2);
        }
        
        .event-item.permission-change .event-icon i {
            color: var(--restricted-badge-bg);
        }
        
        .event-item.user-join .event-icon {
            background-color: rgba(33, 150, 243, 0.2);
        }
        
        .event-item.user-join .event-icon i {
            color: var(--log-info);
        }

        .restricted-message {
            text-align: center;
            padding: 20px;
            margin: 20px;
            background-color: rgba(255, 193, 7, 0.1);
            border-radius: 15px;
            font-size: 16px;
            color: var(--text-color);
            border: 2px solid var(--restricted-badge-bg);
        }

        .restricted-message i {
            font-size: 30px;
            color: var(--restricted-badge-bg);
            margin-bottom: 10px;
            display: block;
        }

        .restricted-message .subscribe-button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 10px;
            padding: 12px 24px;
            font-weight: bold;
            margin-top: 15px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .restricted-message .subscribe-button:hover {
            background-color: #4a49c0;
            transform: translateY(-2px);
        }
        
        .profile-edit-dialog {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--bg-color);
            z-index: 120;
            display: none;
            flex-direction: column;
            animation: fadeIn 0.3s ease;
        }
        
        .profile-edit-dialog.active {
            display: flex;
        }
        
        .profile-image-upload {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 20px;
            position: relative;
        }
        
        .profile-image-preview {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background-color: var(--secondary-color);
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            margin-bottom: 10px;
            position: relative;
        }
        
        .profile-image-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            pointer-events: none;
        }
        
        .profile-image-preview i {
            font-size: 50px;
            color: var(--primary-color);
        }
        
        .profile-upload-btn {
            position: absolute;
            bottom: 10px;
            right: calc(50% - 60px);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background-color: var(--primary-color);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            transition: transform 0.2s ease, background-color 0.2s ease;
        }
        
        .profile-upload-btn:hover, .profile-upload-btn:active {
            transform: scale(1.1);
            background-color: #4a49c0;
        }

        input[type="file"] {
            display: none;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .section-title {
            font-weight: bold;
            font-size: 18px;
            margin-bottom: 10px;
            text-decoration: none;
            border-bottom: none;
            padding: 0 16px; 
            margin: 15px 0;
        }
        
        .field-error {
            color: var(--danger-color);
            font-size: 12px;
            margin-top: 4px;
            display: none;
        }
        
        .save-field-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 5px;
            padding: 5px 10px;
            margin-left: 10px;
            font-size: 12px;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }
        
        .save-field-btn:hover {
            background-color: #4a49c0;
        }
        
        .save-field-btn:disabled {
            background-color: var(--border-color);
            cursor: not-allowed;
        }
        
        .editable-field {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .editable-field-input {
            flex: 1;
        }
        
        .forecasts-section {
            padding: 0;
            height: 100%;
            overflow: hidden;
        }
        
        .ai-forecasts-section {
            padding: 0;
            height: 100%;
            overflow: hidden;
        }
        
        .forecasts-tabs, .ai-forecasts-tabs {
            display: flex;
            border-bottom: 1px solid var(--border-color);
            margin: 0;
            background-color: var(--bg-color);
            position: sticky;
            top: 0;
            z-index: 5;
            flex-shrink: 0;
        }
        
        .forecast-tab, .ai-forecast-tab {
            flex: 1;
            text-align: center;
            padding: 12px 0;
            font-weight: bold;
            font-size: 14px;
            cursor: pointer;
            position: relative;
            color: var(--inactive-text);
            transition: color 0.3s, background-color 0.2s ease;
        }
        
        .forecast-tab.active, .ai-forecast-tab.active {
            color: var(--primary-color);
        }
        
        .forecast-tab.active::after, .ai-forecast-tab.active::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 20%;
            width: 60%;
            height: 3px;
            background-color: var(--primary-color);
            border-radius: 3px 3px 0 0;
            animation: slideIn 0.3s ease;
        }
        
        .forecasts-content, .ai-forecasts-content {
            display: none;
            flex: 1;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
            padding: 0;
        }
        
        .forecasts-content.active, .ai-forecasts-content.active {
            display: flex;
            flex-direction: column;
        }
        
        .forecasts-list, .ai-forecasts-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
            padding: 15px;
            min-height: 100%;
        }
        
        /* Amélioration du système de cartes avec 4 faces */
        .forecast-item {
            background-color: var(--card-bg);
            border-radius: 15px;
            padding: 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
            min-height: 350px;
            perspective: 1000px;
            transition: var(--card-transition);
            cursor: pointer;
        }

        .forecast-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .forecast-card-container {
            position: relative;
            width: 100%;
            height: 100%;
            min-height: 350px;
            transform-style: preserve-3d;
            transition: transform 0.6s;
        }

        .forecast-card-container.show-details {
            transform: rotateY(90deg);
        }

        .forecast-card-container.show-probabilities {
            transform: rotateY(180deg);
        }

        .forecast-card-container.show-scores {
            transform: rotateY(270deg);
        }

        .forecast-face {
            position: absolute;
            width: 100%;
            height: 100%;
            min-height: 350px;
            backface-visibility: hidden;
            padding: 20px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            border-radius: 15px;
            background-color: var(--card-bg);
        }

        .forecast-front {
            transform: rotateY(0deg);
        }

        .forecast-details {
            transform: rotateY(-90deg);
            background-color: var(--card-bg);
        }

        .forecast-probabilities {
            transform: rotateY(-180deg);
            background-color: var(--card-bg);
        }

        .forecast-scores {
            transform: rotateY(-270deg);
            background-color: var(--card-bg);
        }

        .face-indicator {
            position: absolute;
            bottom: 10px;
            right: 15px;
            display: flex;
            gap: 6px;
            z-index: 10;
        }

        .face-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: rgba(0,0,0,0.3);
            transition: background-color 0.3s ease;
        }

        .face-dot.active {
            background-color: var(--card-accent);
        }

        .swipe-instruction {
            position: absolute;
            bottom: 10px;
            left: 15px;
            font-size: 12px;
            color: var(--inactive-text);
            opacity: 0.7;
        }
        
        .forecast-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            font-weight: bold;
        }
        
        .forecast-match {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin: 15px 0;
        }
        
        .forecast-team {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            flex: 1;
        }
        
        .forecast-team-logo {
            width: 45px;
            height: 45px;
            background-color: var(--bg-color);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .forecast-team-name {
            font-weight: 500;
            text-align: center;
            font-size: 14px;
            line-height: 1.2;
        }
        
        .forecast-score {
            font-size: 24px;
            font-weight: bold;
            padding: 0 20px;
            display: flex;
            align-items: center;
            color: var(--card-accent);
        }
        
        .forecast-status {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: bold;
        }
        
        .forecast-status.pending {
            background-color: var(--forecast-pending-bg);
            color: var(--text-color);
        }
        
        .forecast-status.win {
            background-color: var(--forecast-win-bg);
            color: var(--text-color);
        }
        
        .forecast-status.loss {
            background-color: var(--forecast-loss-bg);
            color: var(--text-color);
        }
        
        .forecast-date {
            font-size: 12px;
            color: var(--inactive-text);
            margin-top: 10px;
        }
        
        .forecast-confidence {
            display: flex;
            align-items: center;
            margin-top: 15px;
            font-size: 13px;
            color: var(--text-color);
        }
        
        .confidence-bar-container {
            flex: 1;
            height: 8px;
            background-color: var(--border-color);
            border-radius: 4px;
            margin: 0 10px;
            overflow: hidden;
        }
        
        .confidence-bar {
            height: 100%;
            background-color: var(--card-accent);
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        .forecast-description {
            font-size: 14px;
            line-height: 1.5;
            margin-bottom: 15px;
            color: var(--text-color);
        }

        .poisson-probabilities {
            background-color: rgba(0, 0, 0, 0.05);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
        }

        .poisson-title {
            font-weight: bold;
            margin-bottom: 12px;
            font-size: 16px;
            color: var(--card-accent);
            text-align: center;
        }

        .poisson-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 14px;
            padding: 5px 0;
        }

        .poisson-row:not(:last-child) {
            border-bottom: 1px solid rgba(0,0,0,0.1);
        }

        .estimated-odds {
            background-color: var(--card-accent);
            color: white;
            padding: 10px 15px;
            border-radius: 15px;
            text-align: center;
            font-weight: bold;
            margin-top: 15px;
        }

        .combined-matches {
            background-color: rgba(0,0,0,0.05);
            padding: 12px;
            border-radius: 10px;
            margin: 10px 0;
            max-height: 180px;
            overflow-y: auto;
        }

        .combined-matches-title {
            font-weight: bold;
            margin-bottom: 8px;
            color: var(--card-accent);
            font-size: 14px;
        }

        .match-detail {
            background-color: var(--bg-color);
            padding: 8px;
            margin: 6px 0;
            border-radius: 6px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .match-name {
            font-weight: 500;
            margin-bottom: 3px;
            font-size: 13px;
        }

        .match-prediction {
            font-size: 12px;
            color: var(--card-accent);
            margin-bottom: 2px;
        }

        .match-confidence {
            font-size: 11px;
            opacity: 0.8;
        }

        /* Section des scores exacts */
        .exact-scores-section {
            background-color: rgba(0, 0, 0, 0.05);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .exact-scores-title {
            font-weight: bold;
            margin-bottom: 12px;
            font-size: 16px;
            color: var(--card-accent);
            text-align: center;
        }

        .exact-score-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 12px;
            margin: 6px 0;
            background-color: var(--bg-color);
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .exact-score-match {
            font-weight: 500;
            font-size: 14px;
            color: var(--text-color);
        }

        .exact-score-probability {
            font-weight: bold;
            font-size: 13px;
            color: var(--card-accent);
            background-color: rgba(var(--card-accent), 0.1);
            padding: 4px 8px;
            border-radius: 6px;
        }
        
        .no-forecasts {
            text-align: center;
            padding: 40px 20px;
            color: var(--inactive-text);
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        
        .no-forecasts i {
            font-size: 50px;
            margin-bottom: 15px;
            color: var(--card-accent);
            opacity: 0.5;
        }

        .admin-notification {
            background-color: var(--bg-color);
            border-radius: 15px;
            margin: 10px 15px 20px;
            padding: 15px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            position: relative;
        }
        
        .admin-notification-header {
            color: var(--text-color);
            padding: 0 0 10px;
            font-weight: bold;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: none;
            margin-bottom: 10px;
        }
        
        .admin-notification-title {
            display: flex;
            align-items: center;
        }
        
        .admin-notification-title i {
            margin-right: 8px;
            color: var(--primary-color);
        }
        
        .admin-notification-content {
            padding: 5px 0;
            line-height: 1.4;
        }
        
        .admin-notification-footer {
            padding: 5px 0 0;
            font-size: 12px;
            color: var(--inactive-text);
            text-align: right;
            border-top: none;
            margin-top: 10px;
            padding-top: 8px;
        }
        
        .event-close-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            background-color: var(--secondary-color);
            color: var(--text-color);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 14px;
            transition: transform 0.2s ease;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .event-close-btn:hover, .event-close-btn:active {
            transform: scale(1.1);
        }
        
        .event-actions {
            display: flex;
            justify-content: flex-end;
            gap: 8px;
            margin-top: 5px;
        }
        
        .event-action-btn {
            background-color: var(--secondary-color);
            color: var(--primary-color);
            border: none;
            border-radius: 8px;
            padding: 5px 10px;
            font-size: 12px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 4px;
            transition: transform 0.1s ease;
        }
        
        .event-action-btn:hover, .event-action-btn:active {
            transform: translateY(-1px);
        }
        
        .event-action-btn.delete {
            color: var(--danger-color);
        }
        
        .admin-notif-dialog {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--bg-color);
            z-index: 120;
            display: none;
            flex-direction: column;
            animation: fadeIn 0.3s ease;
        }
        
        .admin-notif-dialog.active {
            display: flex;
        }
        
        .score-options {
            display: flex;
            gap: 10px;
            margin-top: 10px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .score-option {
            padding: 5px 12px;
            border-radius: 15px;
            background-color: var(--bg-color);
            font-weight: bold;
            font-size: 14px;
            border: 1px solid var(--border-color);
            transition: transform 0.1s ease;
            cursor: pointer;
        }
        
        .score-option:hover, .score-option:active {
            transform: translateY(-1px);
        }

        .score-option.active {
            background-color: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }
        
        #delete-account-confirmation .confirmation-text {
            color: var(--danger-color);
            font-weight: bold;
        }

        .social-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
            padding: 0 15px;
            gap: 15px;
        }
        
        .social-button {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px 10px;
            border-radius: 15px;
            text-align: center;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            cursor: pointer;
            color: white;
            font-weight: bold;
            font-size: 16px;
            text-decoration: none;
        }
        
        .social-button:active {
            transform: scale(0.98);
        }
        
        .social-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
        }
        
        .social-button.whatsapp {
            background-color: var(--social-whatsapp);
        }
        
        .social-button.telegram {
            background-color: var(--social-telegram);
        }
        
        .social-button.youtube {
            background-color: var(--social-youtube);
        }

        .social-button .social-icon {
            font-size: 24px;
            margin-bottom: 8px;
        }

        .about-dialog {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--bg-color);
            z-index: 120;
            display: none;
            flex-direction: column;
            animation: fadeIn 0.3s ease;
        }
        
        .about-dialog.active {
            display: flex;
        }
        
        .about-content {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
        }
        
        .about-logo {
            text-align: center;
            margin: 20px 0;
        }
        
        .about-logo i {
            font-size: 60px;
            color: var(--primary-color);
            margin-bottom: 15px;
        }
        
        .about-title {
            font-size: 24px;
            font-weight: bold;
            color: var(--primary-color);
            text-align: center;
            margin-bottom: 10px;
        }
        
        .about-version {
            text-align: center;
            font-size: 14px;
            color: var(--inactive-text);
            margin-bottom: 30px;
        }
        
        .about-section {
            margin-bottom: 25px;
        }
        
        .about-section-title {
            font-weight: bold;
            font-size: 18px;
            margin-bottom: 10px;
            color: var(--primary-color);
        }
        
        .about-section-content {
            line-height: 1.5;
            font-size: 14px;
        }
        
        .about-footer {
            text-align: center;
            padding: 20px 0;
            font-size: 12px;
            color: var(--inactive-text);
            border-top: none;
            margin-top: auto;
        }

        .edit-dialog {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--bg-color);
            z-index: 120;
            display: none;
            flex-direction: column;
            animation: fadeIn 0.3s ease;
        }
        
        .edit-dialog.active {
            display: flex;
        }
        
        .edit-header {
            display: flex;
            align-items: center;
            padding: 15px;
            border-bottom: none;
            flex-shrink: 0;
        }
        
        .edit-title {
            flex: 1;
            text-align: center;
            font-weight: bold;
            font-size: 18px;
            text-decoration: none;
            border-bottom: none;
        }
        
        .edit-back {
            color: var(--primary-color);
            cursor: pointer;
            padding: 8px;
            border-radius: 50%;
        }
        
        .edit-content {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
        }

        .terms-dialog {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--bg-color);
            z-index: 120;
            display: none;
            flex-direction: column;
            animation: fadeIn 0.3s ease;
        }
        
        .terms-dialog.active {
            display: flex;
        }
        
        .terms-content {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
        }
        
        .terms-header {
            display: flex;
            align-items: center;
            padding: 15px;
            border-bottom: none;
            flex-shrink: 0;
        }
        
        .terms-title {
            flex: 1;
            text-align: center;
            font-weight: bold;
            font-size: 18px;
            text-decoration: none;
            border-bottom: none;
        }
        
        .terms-back {
            color: var(--primary-color);
            cursor: pointer;
            padding: 8px;
            border-radius: 50%;
        }
        
        .warning-box {
            background-color: var(--warning-bg);
            border-left: 4px solid var(--warning-text);
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
            font-weight: 500;
        }
        
        .warning-box i {
            color: var(--warning-text);
            margin-right: 10px;
        }
    
        #header-action {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        .search-button, .events-button, .info-button {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            border-radius: 50%;
            transition: background-color 0.2s ease;
        }
        
        .search-button:active, .events-button:active, .info-button:active {
            background-color: var(--secondary-color);
        }
        
        /* Improved search bar animation */
        @keyframes searchBarIn {
            from {
                opacity: 0;
                transform: translateY(-5px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes searchBarOut {
            from {
                opacity: 1;
                transform: translateY(0);
            }
            to {
                opacity: 0;
                transform: translateY(-5px);
            }
        }
        
        .search-container.active {
            animation: searchBarIn 0.3s ease forwards;
        }
        
        .search-container.hiding {
            animation: searchBarOut 0.3s ease forwards;
        }
        
        /* Touch ripple effect for buttons */
        .ripple {
            position: absolute;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            transform: scale(0);
            animation: ripple 0.6s linear;
            pointer-events: none;
        }
        
        @keyframes ripple {
            to {
                transform: scale(2.5);
                opacity: 0;
            }
        }
        
        /* Interface Theme Selector Enhanced */
        .interface-sections {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .interface-section {
            background: linear-gradient(135deg, var(--secondary-color), rgba(var(--primary-color), 0.05));
            border-radius: 15px;
            padding: 20px;
            border: 1px solid rgba(var(--primary-color), 0.1);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease;
        }

        .interface-section:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.12);
        }
        
        .interface-title {
            font-weight: bold;
            margin-bottom: 15px;
            font-size: 18px;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .interface-title i {
            font-size: 20px;
        }

        .interface-subtitle {
            font-size: 13px;
            color: var(--inactive-text);
            margin-bottom: 15px;
            line-height: 1.4;
        }
        
        .theme-selector {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 12px;
            margin: 15px 0;
        }
        
        .theme-option {
            width: 100%;
            height: 70px;
            border-radius: 12px;
            cursor: pointer;
            position: relative;
            border: 2px solid var(--theme-selector-border);
            overflow: hidden;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        .theme-option:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        
        .theme-option.active {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(var(--primary-color), 0.3);
            transform: scale(1.1);
        }
        
        .theme-option.active:before {
            content: '\f00c';
            font-family: 'Font Awesome 5 Free';
            font-weight: 900;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 18px;
            text-shadow: 0 0 5px rgba(0,0,0,0.7);
            z-index: 3;
        }
        
        .theme-option.theme-blue {
            background: linear-gradient(135deg, #5D5CDE, #4a49c0);
        }
        
        .theme-option.theme-green {
            background: linear-gradient(135deg, #4CAF50, #388E3C);
        }
        
        .theme-option.theme-red {
            background: linear-gradient(135deg, #F44336, #d32f2f);
        }
        
        .theme-option.theme-orange {
            background: linear-gradient(135deg, #FF9800, #f57c00);
        }

        .theme-option.theme-red-pink {
            background: linear-gradient(135deg, #F44336, #E91E63);
        }

        .theme-option.theme-green-yellow {
            background: linear-gradient(135deg, #4CAF50, #CDDC39);
        }

        .theme-option.theme-blue-purple {
            background: linear-gradient(135deg, #2196F3, #9C27B0);
        }

        .theme-option.theme-orange-gold {
            background: linear-gradient(135deg, #FF9800, #FFC107);
        }

        .theme-option.theme-purple {
            background: linear-gradient(135deg, #9C27B0, #7B1FA2);
        }

        .theme-option.theme-teal {
            background: linear-gradient(135deg, #009688, #00695C);
        }

        .theme-option.theme-indigo {
            background: linear-gradient(135deg, #3F51B5, #303F9F);
        }

        .theme-option.theme-pink {
            background: linear-gradient(135deg, #E91E63, #C2185B);
        }

        .theme-option.theme-cyan {
            background: linear-gradient(135deg, #00BCD4, #0097A7);
        }

        .theme-option.theme-lime {
            background: linear-gradient(135deg, #CDDC39, #AFB42B);
        }

        .theme-option.theme-amber {
            background: linear-gradient(135deg, #FFC107, #FF8F00);
        }

        .theme-option.theme-deep-orange {
            background: linear-gradient(135deg, #FF5722, #D84315);
        }

        .theme-option.theme-hightech {
            background: linear-gradient(135deg, #0A0E27, #00E5FF);
            border: 2px solid #00E5FF;
            box-shadow: 0 0 20px rgba(0, 229, 255, 0.3);
        }
        
        .theme-label {
            margin-top: 8px;
            font-size: 10px;
            text-align: center;
            font-weight: 600;
            line-height: 1.2;
            color: var(--text-color);
            opacity: 0.8;
        }

        .transition-selector {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin: 15px 0;
        }

        .transition-option {
            padding: 12px;
            border-radius: 8px;
            border: 2px solid var(--theme-selector-border);
            cursor: pointer;
            text-align: center;
            font-size: 13px;
            font-weight: 500;
            transition: all 0.3s ease;
            background-color: var(--bg-color);
        }

        .transition-option:hover {
            border-color: var(--primary-color);
            background-color: rgba(var(--primary-color), 0.05);
        }

        .transition-option.active {
            border-color: var(--primary-color);
            background-color: rgba(var(--primary-color), 0.1);
            color: var(--primary-color);
        }

        .card-style-selector {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin: 15px 0;
        }

        .card-style-option {
            padding: 12px;
            border-radius: 8px;
            border: 2px solid var(--theme-selector-border);
            cursor: pointer;
            text-align: center;
            font-size: 13px;
            font-weight: 500;
            transition: all 0.3s ease;
            background-color: var(--bg-color);
        }

        .card-style-option:hover {
            border-color: var(--primary-color);
            background-color: rgba(var(--primary-color), 0.05);
        }

        .card-style-option.active {
            border-color: var(--primary-color);
            background-color: rgba(var(--primary-color), 0.1);
            color: var(--primary-color);
        }

        /* Tutorials Section Styles */
        .tutorials-section {
            padding: 0;
            height: 100%;
            overflow-y: auto;
        }

        .tutorial-item {
            background-color: var(--secondary-color);
            border-radius: 15px;
            margin: 15px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            transition: transform 0.2s ease;
        }

        .tutorial-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .tutorial-thumbnail {
            position: relative;
            width: 100%;
            height: 200px;
            background: linear-gradient(135deg, var(--primary-color), #4a49c0);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }

        .tutorial-play-button {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: var(--primary-color);
            transition: all 0.3s ease;
        }

        .tutorial-thumbnail:hover .tutorial-play-button {
            transform: scale(1.1);
            background-color: white;
        }

        .tutorial-content {
            padding: 20px;
        }

        .tutorial-title {
            font-weight: bold;
            font-size: 18px;
            margin-bottom: 10px;
            color: var(--text-color);
        }

        .tutorial-description {
            color: var(--inactive-text);
            font-size: 14px;
            line-height: 1.5;
            margin-bottom: 15px;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }

        .tutorial-duration {
            display: flex;
            align-items: center;
            color: var(--primary-color);
            font-size: 14px;
            font-weight: 500;
        }

        .tutorial-duration i {
            margin-right: 8px;
        }

        .tutorial-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            background-color: var(--sats-color);
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: bold;
        }

        .video-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.9);
            z-index: 1000;
            display: none;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .video-modal.active {
            display: flex;
        }

        .video-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            background-color: #000;
            border-radius: 10px;
            overflow: hidden;
        }

        .video-player {
            width: 100%;
            height: auto;
            max-height: 80vh;
        }

        .video-close {
            position: absolute;
            top: -40px;
            right: 0;
            color: white;
            font-size: 24px;
            cursor: pointer;
            padding: 8px;
            border-radius: 50%;
            background-color: rgba(0, 0, 0, 0.5);
            transition: background-color 0.2s ease;
        }

        .video-close:hover {
            background-color: rgba(0, 0, 0, 0.8);
        }

        /* History Section Styles */
        .history-section {
            padding: 0;
            height: 100%;
            overflow-y: auto;
        }

        .history-date-header {
            background-color: var(--history-date-bg);
            color: var(--history-date-text);
            padding: 12px 20px;
            margin: 0 15px 15px;
            border-radius: 10px;
            font-weight: bold;
            text-align: center;
            font-size: 16px;
        }

        .history-category-section {
            margin-bottom: 25px;
        }

        .history-category-title {
            background-color: var(--secondary-color);
            padding: 10px 20px;
            margin: 0 15px 10px;
            border-radius: 8px;
            font-weight: bold;
            color: var(--primary-color);
            font-size: 14px;
            text-transform: uppercase;
        }

        .history-forecasts-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
            padding: 0 15px;
        }

        .history-forecast-item {
            background-color: var(--secondary-color);
            border-radius: 10px;
            padding: 15px;
            border-left: 4px solid var(--primary-color);
            opacity: 0.9;
            transform: scale(0.98);
        }

        .history-forecast-item .forecast-status.win {
            background-color: var(--forecast-win-bg);
            color: var(--success-color);
        }

        .history-forecast-item .forecast-status.loss {
            background-color: var(--forecast-loss-bg);
            color: var(--danger-color);
        }

        .history-forecast-item .forecast-status.pending {
            background-color: var(--forecast-pending-bg);
            color: var(--text-color);
        }

        /* Note d'abonnement gratuit */
        .free-subscription-note {
            background: linear-gradient(135deg, var(--success-color), #66bb6a);
            color: white;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 15px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);
        }

        .free-subscription-note h3 {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .free-subscription-note p {
            font-size: 14px;
            margin-bottom: 15px;
            line-height: 1.5;
            opacity: 0.95;
        }

        /* Corriger les boutons flottants - renommer la classe .fab en .floating-action-button */
        .floating-action-button {
            position: fixed;
            bottom: 80px;
            right: 20px;
            width: 56px;
            height: 56px;
            border-radius: 50%;
            background-color: var(--primary-color);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            cursor: pointer;
            font-size: 20px;
            z-index: 100;
            transition: all 0.3s ease;
        }

        .floating-action-button:hover {
            transform: scale(1.1);
        }

        .floating-action-button:active {
            transform: scale(0.95);
        }
        
        @media (max-height: 640px) {
            .floating-action-button {
                bottom: 70px;
            }
        }
        
        @media (max-width: 380px) {
            .confirmation-buttons {
                flex-direction: column;
                gap: 10px;
            }
            
            .confirmation-button {
                width: 100%;
            }
        }

        /* Scrollbar styling */
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--border-color);
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary-color);
        }
    </style>
</head>
<body>
    <div id="verify-animation" class="verify-animation">
        <div class="football-bounce">
            <i class="fas fa-futbol"></i>
        </div>
        <div class="verify-text">Vérification en cours...</div>
    </div>

    <!-- Debug Panel -->
    <div id="debug-log-panel" class="debug-log-panel">
        <div class="debug-log-header">
            <span>Debug Console</span>
            <span class="debug-log-close" id="debug-log-close">×</span>
        </div>
        <div class="debug-log-content" id="debug-log-content">
            <!-- Logs will be added here -->
        </div>
    </div>

    <div id="debug-toggle-btn" class="debug-toggle-btn">
        <i class="fas fa-bug"></i>
    </div>
    
    <div class="side-menu" id="side-menu">
        <div class="side-menu-header">
            <div class="side-menu-close" id="side-menu-close">
                <i class="fas fa-times"></i>
            </div>
            <div class="side-menu-title">Pari Alliance</div>
        </div>
        <div class="side-menu-content">
            <div class="side-menu-item" id="menu-history">
                <i class="fas fa-history"></i>
                <div class="side-menu-text">Historique</div>
            </div>
            <div class="side-menu-item" id="menu-tutorials">
                <i class="fas fa-play-circle"></i>
                <div class="side-menu-text">Tutoriels</div>
            </div>
            <div class="side-menu-item" id="menu-interface">
                <i class="fas fa-paint-brush"></i>
                <div class="side-menu-text">Interface</div>
            </div>
        </div>
        <div class="side-menu-footer">
            <div class="side-menu-item" id="menu-terms">
                <i class="fas fa-file-alt"></i>
                <div class="side-menu-text">Conditions d'utilisation</div>
            </div>
            <div class="side-menu-item" id="menu-about">
                <i class="fas fa-info-circle"></i>
                <div class="side-menu-text">À propos</div>
            </div>
        </div>
    </div>
    
    <div class="side-menu-overlay" id="side-menu-overlay"></div>
    
    <div id="auth-screen" class="auth-screen" style="display: none;">
        <div class="auth-header">
            <div class="auth-logo">
                <i class="fas fa-futbol"></i>
            </div>
            <h1 class="auth-title">Pari Alliance</h1>
            <p class="auth-subtitle">Pronostics sportifs avancés</p>
        </div>
        
        <div class="auth-tabs">
            <div class="auth-tab active" id="login-tab">Connexion</div>
            <div class="auth-tab" id="register-tab">Inscription</div>
        </div>
        
        <div id="login-form" class="auth-form active">
            <div class="form-group">
                <label class="form-label">Email</label>
                <input type="email" class="form-input" id="login-email" placeholder="Votre email">
                <div id="login-email-error" class="form-error">Veuillez entrer un email valide</div>
            </div>
            
            <div class="form-group">
                <label class="form-label">Mot de passe</label>
                <input type="password" class="form-input" id="login-password" placeholder="Votre mot de passe">
                <div id="login-password-error" class="form-error">Le mot de passe est obligatoire</div>
            </div>
            
            <div id="login-log" class="log-message" style="display:none;"></div>

            <div class="form-footer">
                <button class="button" id="loginBtn">
                    <span class="btn-loader" style="display:none;"></span>
                    <span class="btn-text">Se connecter</span>
                </button>
                <p class="form-footer-text">
                    Vous n'avez pas de compte ? <a href="#" class="form-link" id="goto-register">S'inscrire</a>
                </p>
            </div>
        </div>
        
        <div id="register-form" class="auth-form">
            <div class="form-group">
                <label class="form-label">Email</label>
                <input type="email" class="form-input" id="register-email" placeholder="Votre adresse email">
                <div id="register-email-error" class="form-error">Veuillez entrer un email valide</div>
            </div>
            
            <div class="form-group">
                <label class="form-label">Mot de passe</label>
                <input type="password" class="form-input" id="register-password" placeholder="Créez un mot de passe sécurisé">
                <div id="register-password-error" class="form-error">Le mot de passe doit contenir au moins 6 caractères</div>
            </div>
            
            <div class="form-group">
                <label class="form-label">Confirmer le mot de passe</label>
                <input type="password" class="form-input" id="register-confirm-password" placeholder="Confirmez votre mot de passe">
                <div id="register-confirm-password-error" class="form-error">Les mots de passe ne correspondent pas</div>
            </div>
            
            <div id="register-log" class="log-message" style="display:none;"></div>

            <div class="form-footer">
                <button class="button" id="registerBtn">
                    <span class="btn-loader" style="display:none;"></span>
                    <span class="btn-text">S'inscrire</span>
                </button>
                <p class="form-footer-text">
                    Vous avez déjà un compte ? <a href="#" class="form-link" id="goto-login">Se connecter</a>
                </p>
            </div>
        </div>
    </div>

    <div id="loading" class="loading" style="display: none;">
        <i class="fas fa-futbol loading-spinner"></i>
        <div style="font-weight: bold; font-size: 24px; color: var(--primary-color);">Pari Alliance</div>
        <div style="margin-top: 10px; color: #6b7280;">Chargement...</div>
    </div>

    <div class="header">
        <div class="header-left">
            <div id="header-menu-button" class="menu-button">
                <i class="fas fa-bars"></i>
            </div>
            <div id="header-back-button" class="back-button" style="display:none;">
                <i class="fas fa-chevron-left"></i>
            </div>
        </div>
        <div id="header-title" class="header-title">Simples</div>
        <div id="header-action">
            <div class="search-button" id="search-button">
                <i class="fas fa-search"></i>
            </div>
            <div class="events-button" id="events-button">
                <i class="fas fa-bell"></i>
                <div class="notification-dot" id="events-notification-dot"></div>
            </div>
        </div>
        
        <div class="search-container" id="search-container">
            <input type="text" class="search-input" id="search-input" placeholder="Rechercher...">
            <div class="search-close" id="search-close">
                <i class="fas fa-times"></i>
            </div>
        </div>
    </div>

    <div class="content">
        <!-- Section des pronostics simples maintenant par défaut -->
        <div id="forecasts-section" class="section active">
            <div class="forecasts-content active" style="height: 100%; overflow-y: auto;">
                <div class="forecasts-list" id="simple-forecasts-list">
                </div>
            </div>
        </div>

        <!-- Section Prédictions IA maintenant ouverte à tous -->
        <div id="ai-forecasts-section" class="section">
            <div class="ai-forecasts-tabs">
                <div class="ai-forecast-tab active" data-tab="combines">Combinés</div>
                <div class="ai-forecast-tab" data-tab="ia-singles">Singles Premium</div>
                <div class="ai-forecast-tab" data-tab="safes">Safes</div>
            </div>
            
            <div class="ai-forecasts-content active" id="combines-content">
                <div class="ai-forecasts-list" id="combines-list">
                </div>
            </div>
            
            <div class="ai-forecasts-content" id="ia-singles-content">
                <div class="ai-forecasts-list" id="ia-singles-list">
                </div>
            </div>

            <div class="ai-forecasts-content" id="safes-content">
                <div class="ai-forecasts-list" id="safes-list">
                </div>
            </div>
        </div>

        <!-- Nouvelle Section Historique -->
        <div id="history-section" class="section">
            <div style="height: 100%; overflow-y: auto; padding: 10px 0;">
                <div id="history-content">
                    <!-- L'historique sera chargé ici -->
                </div>
            </div>
        </div>
        
        <div id="events-section" class="section">
            <div id="events-list" style="height: 100%; overflow-y: auto; padding: 10px;">
                <div class="empty-state">
                    <i class="fas fa-bell"></i>
                    <div class="empty-state-title">Aucun événement</div>
                    <div class="empty-state-text">Les événements apparaîtront ici</div>
                </div>
            </div>
        </div>

        <div id="tutorials-section" class="section">
            <div style="height: 100%; overflow-y: auto;">
                <div class="tutorial-item">
                    <div class="tutorial-thumbnail" data-video="free-sats">
                        <div class="tutorial-play-button">
                            <i class="fas fa-play"></i>
                        </div>
                        <div class="tutorial-badge">Gratuit</div>
                    </div>
                    <div class="tutorial-content">
                        <div class="tutorial-title">Guide complet de Pari Alliance</div>
                        <div class="tutorial-description">
                            Découvrez toutes les fonctionnalités de Pari Alliance : comment naviguer dans l'interface, comprendre les pronostics IA, utiliser les combinés intelligents et optimiser vos stratégies de paris sportifs.
                        </div>
                        <div class="tutorial-duration">
                            <i class="far fa-clock"></i>
                            5 minutes
                        </div>
                    </div>
                </div>

                <div class="tutorial-item">
                    <div class="tutorial-thumbnail" data-video="understand-predictions">
                        <div class="tutorial-play-button">
                            <i class="fas fa-play"></i>
                        </div>
                        <div class="tutorial-badge">Éducatif</div>
                    </div>
                    <div class="tutorial-content">
                        <div class="tutorial-title">Comment comprendre nos prédictions</div>
                        <div class="tutorial-description">
                            Apprenez à interpréter nos analyses IA, comprendre les probabilités et optimiser vos choix de paris. Un guide essentiel pour maximiser vos gains avec nos pronostics.
                        </div>
                        <div class="tutorial-duration">
                            <i class="far fa-clock"></i>
                            7 minutes
                        </div>
                    </div>
                </div>

                <div class="tutorial-item">
                    <div class="tutorial-thumbnail" data-video="advanced-features">
                        <div class="tutorial-play-button">
                            <i class="fas fa-play"></i>
                        </div>
                        <div class="tutorial-badge">Avancé</div>
                    </div>
                    <div class="tutorial-content">
                        <div class="tutorial-title">Fonctionnalités avancées</div>
                        <div class="tutorial-description">
                            Explorez les fonctionnalités avancées de Pari Alliance : personnalisation de l'interface, analyse des historiques, utilisation des thèmes et optimisation de votre expérience utilisateur.
                        </div>
                        <div class="tutorial-duration">
                            <i class="far fa-clock"></i>
                            4 minutes
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div id="interface-section" class="section">
            <div style="height: 100%; overflow-y: auto; padding: 10px;">
                <div class="interface-sections">
                    <div class="interface-section">
                        <div class="interface-title">
                            <i class="fas fa-palette"></i>
                            Thème de couleur
                        </div>
                        <div class="interface-subtitle">
                            Personnalisez l'apparence de l'application avec une large gamme de couleurs
                        </div>
                        <div class="theme-selector">
                            <div class="theme-option theme-blue active" data-theme="default">
                                <div class="theme-label">Bleu</div>
                            </div>
                            <div class="theme-option theme-green" data-theme="green">
                                <div class="theme-label">Vert</div>
                            </div>
                            <div class="theme-option theme-red" data-theme="red">
                                <div class="theme-label">Rouge</div>
                            </div>
                            <div class="theme-option theme-orange" data-theme="orange">
                                <div class="theme-label">Orange</div>
                            </div>
                            <div class="theme-option theme-red-pink" data-theme="red-pink">
                                <div class="theme-label">Rouge-Rose</div>
                            </div>
                            <div class="theme-option theme-green-yellow" data-theme="green-yellow">
                                <div class="theme-label">Vert-Jaune</div>
                            </div>
                            <div class="theme-option theme-blue-purple" data-theme="blue-purple">
                                <div class="theme-label">Bleu-Violet</div>
                            </div>
                            <div class="theme-option theme-orange-gold" data-theme="orange-gold">
                                <div class="theme-label">Orange-Doré</div>
                            </div>
                            <div class="theme-option theme-purple" data-theme="purple">
                                <div class="theme-label">Violet</div>
                            </div>
                            <div class="theme-option theme-teal" data-theme="teal">
                                <div class="theme-label">Turquoise</div>
                            </div>
                            <div class="theme-option theme-indigo" data-theme="indigo">
                                <div class="theme-label">Indigo</div>
                            </div>
                            <div class="theme-option theme-pink" data-theme="pink">
                                <div class="theme-label">Rose</div>
                            </div>
                            <div class="theme-option theme-cyan" data-theme="cyan">
                                <div class="theme-label">Cyan</div>
                            </div>
                            <div class="theme-option theme-lime" data-theme="lime">
                                <div class="theme-label">Lime</div>
                            </div>
                            <div class="theme-option theme-amber" data-theme="amber">
                                <div class="theme-label">Ambre</div>
                            </div>
                            <div class="theme-option theme-deep-orange" data-theme="deep-orange">
                                <div class="theme-label">Orange Foncé</div>
                            </div>
                            <div class="theme-option theme-hightech" data-theme="hightech">
                                <div class="theme-label">High-Tech</div>
                            </div>
                        </div>
                    </div>

                    <div class="interface-section">
                        <div class="interface-title">
                            <i class="fas fa-magic"></i>
                            Animations des cartes
                        </div>
                        <div class="interface-subtitle">
                            Choisissez le style de transition pour les cartes de pronostics
                        </div>
                        <div class="transition-selector">
                            <div class="transition-option active" data-transition="default">
                                Fluide
                            </div>
                            <div class="transition-option" data-transition="bounce">
                                Rebond
                            </div>
                            <div class="transition-option" data-transition="elastic">
                                Élastique
                            </div>
                            <div class="transition-option" data-transition="fast">
                                Rapide
                            </div>
                            <div class="transition-option" data-transition="slow">
                                Lent
                            </div>
                            <div class="transition-option" data-transition="smooth">
                                Doux
                            </div>
                        </div>
                    </div>

                    <div class="interface-section">
                        <div class="interface-title">
                            <i class="fas fa-brush"></i>
                            Style des cartes
                        </div>
                        <div class="interface-subtitle">
                            Personnalisez l'apparence des cartes de pronostics
                        </div>
                        <div class="card-style-selector">
                            <div class="card-style-option active" data-style="default">
                                Standard
                            </div>
                            <div class="card-style-option" data-style="gradient">
                                Dégradé
                            </div>
                            <div class="card-style-option" data-style="glass">
                                Verre
                            </div>
                            <div class="card-style-option" data-style="shadow">
                                Ombre
                            </div>
                            <div class="card-style-option" data-style="neon">
                                Néon
                            </div>
                        </div>
                    </div>
                    
                    <div class="interface-section">
                        <div class="interface-title">
                            <i class="fas fa-moon"></i>
                            Mode d'affichage
                        </div>
                        <div class="interface-subtitle">
                            Basculer entre le mode clair et sombre selon vos préférences
                        </div>
                        <div class="setting-item">
                            <div class="setting-row">
                                <div class="setting-icon">
                                    <i class="fas fa-moon" style="color: var(--primary-color);"></i>
                                </div>
                                <div class="setting-label">Mode sombre</div>
                            </div>
                            <label class="switch">
                                <input type="checkbox" id="dark-toggle" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div id="profile-section" class="section">
            <div style="height: 100%; overflow-y: auto;">
                <div class="profile-header">
                    <div class="profile-pic">
                        <i class="fas fa-user"></i>
                        <div class="profile-pic-edit" id="edit-profile-pic">
                            <i class="fas fa-pencil-alt"></i>
                        </div>
                    </div>
                    <div class="profile-info">
                        <div class="profile-name" id="profile-name">
                            <span id="profile-name-text">Utilisateur</span>
                            <span class="admin-badge" id="admin-badge" style="display: none;">Admin</span>
                        </div>
                        <div class="profile-email" id="profile-email">user@example.com</div>
                        <div class="profile-status">En ligne</div>
                        <div class="profile-edit" id="edit-profile-btn">
                            <i class="fas fa-edit"></i> Modifier le profil
                        </div>
                    </div>
                </div>
                
                <div class="section-title">Paramètres</div>

                <!-- Note d'accès gratuit -->
                <div class="free-subscription-note">
                    <h3>
                        <i class="fas fa-gift"></i>
                        Accès Gratuit Total !
                    </h3>
                    <p>
                        🎉 Profitez de toutes les fonctionnalités de Pari Alliance gratuitement ! Tous les pronostics, combinés IA et analyses premium sont maintenant accessibles à tous.
                    </p>
                    <button class="button claim" id="claim-free-subscription">
                        <i class="fab fa-whatsapp"></i>
                        Rejoindre notre communauté
                    </button>
                </div>
                
                <div class="settings-container">
                    <div class="section-title">Nous rejoindre</div>
                    
                    <div class="social-buttons">
                        <a href="https://whatsapp.com/channel/0029Vb6eoNkATRSqdUT76Y3Y" target="_blank" rel="noopener noreferrer" class="social-button whatsapp">
                            <i class="fab fa-whatsapp social-icon"></i>
                            WhatsApp
                        </a>
                        <a href="https://t.me/parialliance" target="_blank" rel="noopener noreferrer" class="social-button telegram">
                            <i class="fab fa-telegram social-icon"></i>
                            Telegram
                        </a>
                        <a href="https://youtube.com/@parialliance?si=MMQ8MwI-XZNK7SiG" target="_blank" rel="noopener noreferrer" class="social-button youtube">
                            <i class="fab fa-youtube social-icon"></i>
                            YouTube
                        </a>
                    </div>
                    
                    <button id="logout-btn" class="button">Se déconnecter</button>
                    <button id="delete-account-btn" class="button danger" style="margin-top: 15px;">Supprimer mon compte</button>
                </div>
            </div>
        </div>
    </div>
    
    <div id="admin-notif-dialog" class="admin-notif-dialog">
        <div class="edit-header">
            <div class="edit-back" id="admin-notif-back">
                <i class="fas fa-arrow-left"></i>
            </div>
            <div class="edit-title">Nouvelle notification</div>
        </div>
        <div class="edit-content">
            <div class="form-group">
                <label class="form-label">Titre de la notification</label>
                <input type="text" class="form-input" id="notif-title" placeholder="Titre de votre notification">
                <div id="notif-title-error" class="field-error">Le titre est requis</div>
            </div>
            
            <div class="form-group">
                <label class="form-label">Contenu</label>
                <textarea class="form-input" id="notif-content" placeholder="Contenu de votre notification" rows="5" style="resize: none;"></textarea>
                <div id="notif-content-error" class="field-error">Le contenu est requis</div>
            </div>
            
            <div class="form-group">
                <label class="form-label">Type de notification</label>
                <select class="form-input" id="notif-type">
                    <option value="info">Information</option>
                    <option value="alert">Alerte</option>
                    <option value="update">Mise à jour</option>
                </select>
            </div>
            
            <button class="button" id="send-notification-btn">
                <span class="btn-loader" style="display:none;"></span>
                <span class="btn-text">Envoyer la notification</span>
            </button>
        </div>
    </div>
    
    <div id="profile-edit-dialog" class="profile-edit-dialog">
        <div class="edit-header">
            <div class="edit-back" id="profile-edit-back">
                <i class="fas fa-arrow-left"></i>
            </div>
            <div class="edit-title">Modifier le profil</div>
        </div>
        <div class="edit-content">
            <div class="profile-image-upload">
                <div class="profile-image-preview" id="profile-image-preview">
                    <i class="fas fa-user"></i>
                </div>
                <div class="profile-upload-btn" id="profile-upload-btn">
                    <i class="fas fa-camera"></i>
                </div>
                <input type="file" id="profile-image-input" accept="image/*">
            </div>
            
            <div class="form-group">
                <label class="form-label">Nom d'utilisateur</label>
                <div class="editable-field">
                    <input type="text" class="form-input editable-field-input" id="edit-display-name" placeholder="Entrez votre nom d'utilisateur">
                    <button class="save-field-btn" id="save-display-name-btn">Enregistrer</button>
                </div>
                <div id="edit-display-name-error" class="field-error">Le nom d'utilisateur est requis</div>
            </div>
            
            <div class="form-group">
                <label class="form-label">Photo de profil</label>
                <button class="button" id="save-profile-image-btn" style="margin-top: 10px;">
                    <span class="btn-loader" style="display:none;"></span>
                    <span class="btn-text">Enregistrer la photo</span>
                </button>
            </div>
        </div>
    </div>
    
    <div id="about-dialog" class="about-dialog">
        <div class="edit-header">
            <div class="edit-back" id="about-back">
                <i class="fas fa-arrow-left"></i>
            </div>
            <div class="edit-title">À propos</div>
        </div>
        <div class="about-content">
            <div class="about-logo">
                <i class="fas fa-futbol"></i>
                <div class="about-title">Pari Alliance</div>
                <div class="about-version">Version 3.0.0</div>
            </div>
            
            <div class="about-section">
                <div class="about-section-title">Description</div>
                <div class="about-section-content">
                    Pari Alliance est une application de prédictions sportives révolutionnaire qui combine l'intelligence artificielle avancée avec des analyses de données en temps réel pour fournir des pronostics précis et fiables dans le domaine sportif. Maintenant entièrement gratuite !
                </div>
            </div>
            
            <div class="about-section">
                <div class="about-section-title">Fonctionnalités</div>
                <div class="about-section-content">
                    <strong>Accès Gratuit Total :</strong><br>
                    • Pronostics simples quotidiens<br>
                    • Prédictions IA avancées<br>
                    • Combinés intelligents optimisés<br>
                    • Singles Premium exclusifs<br>
                    • Analyses safes avancées<br>
                    • Personnalisation complète de l'interface<br>
                    • Historique complet des pronostics<br>
                    • Accès aux événements et notifications<br>
                    • Thème high-tech avec effets visuels<br><br>
                    
                    <strong>Interface Avancée :</strong><br>
                    • 17 thèmes de couleurs différents<br>
                    • Thème high-tech avec effets de lueur<br>
                    • Animations personnalisables<br>
                    • Cartes interactives à 4 faces<br>
                    • Mode sombre/clair adaptatif
                </div>
            </div>
            
            <div class="about-section">
                <div class="about-section-title">Technologie</div>
                <div class="about-section-content">
                    Notre plateforme utilise des algorithmes d'intelligence artificielle sophistiqués pour analyser des milliers de données sportives, statistiques d'équipes, performances historiques et tendances actuelles afin de générer des prédictions avec un taux de précision optimal. L'interface utilise des technologies web avancées pour offrir une expérience utilisateur exceptionnelle.
                </div>
            </div>
            
            <div class="about-section">
                <div class="about-section-title">Confidentialité et sécurité</div>
                <div class="about-section-content">
                    Pari Alliance respecte strictement votre vie privée. Vos données personnelles sont protégées par des protocoles de sécurité avancés et ne sont jamais partagées avec des tiers. L'application fonctionne maintenant en mode entièrement gratuit pour tous les utilisateurs.
                </div>
            </div>
            
            <div class="about-footer">
                © 2025-2026 Pari Alliance - Pronosoft AI. Tous droits réservés.
            </div>
        </div>
    </div>
    
    <div id="terms-dialog" class="terms-dialog">
        <div class="terms-header">
            <div class="terms-back" id="terms-back">
                <i class="fas fa-arrow-left"></i>
            </div>
            <div class="terms-title">Conditions d'utilisation</div>
        </div>
        <div class="terms-content">
            <div class="about-section">
                <div class="about-section-title">Conditions générales d'utilisation</div>
                <div class="about-section-content">
                    En utilisant l'application Pari Alliance, vous acceptez de respecter les présentes conditions d'utilisation. L'accès et l'utilisation de cette application sont soumis à votre acceptation et au respect des présentes conditions. Toute violation de ces termes peut entraîner la suspension ou la résiliation de votre compte.
                </div>
            </div>
            
            <div class="warning-box">
                <i class="fas fa-exclamation-triangle"></i> 
                <strong>AVERTISSEMENT IMPORTANT :</strong> Les pronostics fournis par Pari Alliance sont destinés uniquement à des fins d'information et de divertissement. La revente, redistribution ou commercialisation de ces pronostics est strictement interdite et passible de bannissement définitif et de poursuites judiciaires.
            </div>
            
            <div class="about-section">
                <div class="about-section-title">Utilisation des pronostics et responsabilité</div>
                <div class="about-section-content">
                    <strong>Nature des pronostics :</strong><br>
                    Les prédictions sportives générées par notre intelligence artificielle sont basées sur des analyses statistiques et des algorithmes avancés. Cependant, le sport reste imprévisible par nature.<br><br>
                    
                    <strong>Limitation de responsabilité :</strong><br>
                    Pari Alliance ne peut être tenu responsable des pertes financières résultant de l'utilisation de nos pronostics. Des événements imprévisibles (cartons rouges, pénaltys, blessures, conditions météorologiques, décisions arbitrales, etc.) peuvent influencer l'issue des matchs indépendamment de nos analyses.<br><br>
                    
                    <strong>Recommandations d'usage :</strong><br>
                    • Utilisez nos pronostics comme aide à la décision, non comme garantie<br>
                    • Pariez toujours de manière responsable et dans vos moyens<br>
                    • Ne misez jamais plus que ce que vous pouvez vous permettre de perdre<br>
                    • Considérez le pari sportif comme un divertissement, non un investissement
                </div>
            </div>
            
            <div class="about-section">
                <div class="about-section-title">Propriété intellectuelle et interdictions</div>
                <div class="about-section-content">
                    <strong>Propriété des contenus :</strong><br>
                    Tous les pronostics, analyses et contenus générés par Pari Alliance sont la propriété exclusive de Pronosoft AI. Ils sont protégés par les droits d'auteur et la propriété intellectuelle.<br><br>
                    
                    <strong>Interdictions formelles :</strong><br>
                    • Revendre ou commercialiser nos pronostics sous quelque forme que ce soit<br>
                    • Partager ou redistribuer nos analyses en dehors de la plateforme<br>
                    • Copier, reproduire ou utiliser nos contenus à des fins commerciales<br>
                    • Créer des comptes multiples pour contourner les limitations<br>
                    • Utiliser des méthodes automatisées pour extraire nos données<br><br>
                    
                    <strong>Sanctions :</strong><br>
                    Toute violation de ces interdictions entraînera la suspension immédiate du compte et pourra donner lieu à des poursuites judiciaires pour violation de propriété intellectuelle.
                </div>
            </div>
            
            <div class="about-section">
                <div class="about-section-title">Accès gratuit et communauté</div>
                <div class="about-section-content">
                    <strong>Nouvelle politique d'accès :</strong><br>
                    Pari Alliance est maintenant entièrement gratuit pour tous les utilisateurs. Toutes les fonctionnalités premium sont désormais accessibles sans frais.<br><br>
                    
                    <strong>Engagement communautaire :</strong><br>
                    Nous encourageons tous les utilisateurs à rejoindre notre communauté sur nos réseaux sociaux (WhatsApp, Telegram, YouTube) pour participer aux discussions et recevoir des conseils exclusifs.<br><br>
                    
                    <strong>Durabilité du service :</strong><br>
                    Bien que le service soit gratuit, nous nous réservons le droit de modifier cette politique à l'avenir si nécessaire pour maintenir la qualité du service.
                </div>
            </div>
            
            <div class="about-section">
                <div class="about-section-title">Conduite des utilisateurs</div>
                <div class="about-section-content">
                    En utilisant Pari Alliance, vous vous engagez à :<br>
                    • Respecter les autres utilisateurs et maintenir un environnement respectueux<br>
                    • Ne pas publier de contenu illégal, diffamatoire ou offensant<br>
                    • Ne pas usurper l'identité d'autres personnes<br>
                    • Ne pas tenter de contourner les mesures de sécurité de l'application<br>
                    • Signaler tout comportement suspect ou violation des conditions
                </div>
            </div>
            
            <div class="about-section">
                <div class="about-section-title">Modifications et résiliation</div>
                <div class="about-section-content">
                    Pari Alliance se réserve le droit de modifier ces conditions d'utilisation à tout moment. Les utilisateurs seront notifiés des changements importants. Nous nous réservons également le droit de suspendre ou résilier l'accès à l'application en cas de violation de ces conditions.
                </div>
            </div>
        </div>
    </div>
    
    <div id="delete-account-confirmation" class="confirmation-dialog">
        <div class="confirmation-title">Supprimer votre compte ?</div>
        <div class="confirmation-text">ATTENTION : Cette action est définitive et irréversible. Toutes vos données seront supprimées.</div>
        <div class="confirmation-buttons">
            <div class="confirmation-button confirmation-cancel" id="delete-account-cancel">Annuler</div>
            <div class="confirmation-button confirmation-delete" id="delete-account-confirm">Supprimer</div>
        </div>
    </div>

    <div id="logout-confirmation" class="confirmation-dialog">
        <div class="confirmation-title">Se déconnecter ?</div>
        <div class="confirmation-text">Voulez-vous vraiment vous déconnecter de Pari Alliance ?</div>
        <div class="confirmation-buttons">
            <div class="confirmation-button confirmation-cancel" id="logout-cancel">Annuler</div>
            <div class="confirmation-button confirmation-confirm" id="logout-confirm">Déconnecter</div>
        </div>
    </div>

    <div id="overlay" class="overlay"></div>

    <div class="notification" id="notification"></div>

    <div id="video-modal" class="video-modal">
        <div class="video-container">
            <div class="video-close" id="video-close">
                <i class="fas fa-times"></i>
            </div>
            <iframe class="video-player" id="video-player" frameborder="0" allowfullscreen>
            </iframe>
        </div>
    </div>

    <div class="bottom-nav" id="bottom-nav">
        <div class="nav-item active" data-section="forecasts" style="flex: 1;">
            <i class="nav-icon fas fa-futbol"></i>
            <span>Simples</span>
        </div>
        <div class="nav-item" data-section="ai-forecasts" style="flex: 1;">
            <i class="nav-icon fas fa-brain"></i>
            <span>Prédictions IA</span>
        </div>
        <div class="nav-item" data-section="profile" style="flex: 1;">
            <i class="nav-icon fas fa-user"></i>
            <span>Profil</span>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.7.3/firebase-app.js";
        import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut, onAuthStateChanged, deleteUser } from "https://www.gstatic.com/firebasejs/11.7.3/firebase-auth.js";
        import { getFirestore, collection, doc, setDoc, getDoc, getDocs, query, orderBy, addDoc, onSnapshot, where, deleteDoc, serverTimestamp, updateDoc, arrayUnion, arrayRemove, limit, Timestamp } from "https://www.gstatic.com/firebasejs/11.7.3/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyDTPLxUiA8lj82kqc6CyCPLQDITc0CtLUE",
            authDomain: "ichat-betai.firebaseapp.com",
            databaseURL: "https://ichat-betai-default-rtdb.firebaseio.com",
            projectId: "ichat-betai",
            storageBucket: "ichat-betai.appspot.com",
            messagingSenderId: "168337722600",
            appId: "1:168337722600:web:beb331f83cc4778c5b4d5d",
            measurementId: "G-STXPSZN7X8"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        // Admin configuration
        const ADMIN_EMAILS = ['billionsjonnhy@gmail.com', 'louiskbn05@gmail.com'];

        // Debug system
        let debugLogs = [];
        let debugPanelVisible = false;

        function addDebugLog(message, type = 'info', linkUrl = null) {
            const timestamp = new Date().toLocaleTimeString('fr-FR');
            const log = {
                timestamp,
                message,
                type,
                linkUrl
            };
            
            debugLogs.push(log);
            
            // Keep only last 50 logs
            if (debugLogs.length > 50) {
                debugLogs.shift();
            }
            
            updateDebugPanel();
            
            // Show debug button if there are errors
            if (type === 'error') {
                document.getElementById('debug-toggle-btn').classList.add('active');
            }
        }

        function updateDebugPanel() {
            const content = document.getElementById('debug-log-content');
            content.innerHTML = '';
            
            debugLogs.forEach(log => {
                const item = document.createElement('div');
                item.className = `debug-log-item ${log.type}`;
                
                let messageContent = log.message;
                
                // Handle Firestore index links - make them clickable
                if (log.linkUrl) {
                    const linkText = `<a href="${log.linkUrl}" target="_blank" rel="noopener noreferrer" class="debug-log-link">Créer l'index requis ici</a>`;
                    messageContent = messageContent.replace(log.linkUrl, linkText);
                } else {
                    // Look for URLs in the message and make them clickable
                    const linkPattern = /https:\/\/console\.firebase\.google\.com[^\s)]+/g;
                    messageContent = messageContent.replace(linkPattern, (url) => {
                        return `<a href="${url}" target="_blank" rel="noopener noreferrer" class="debug-log-link">Créer l'index requis ici</a>`;
                    });
                }
                
                item.innerHTML = `
                    <span class="debug-log-timestamp">${log.timestamp}</span>
                    ${messageContent}
                `;
                content.appendChild(item);
            });
            
            // Auto scroll to bottom
            content.scrollTop = content.scrollHeight;
        }

        function handleFirestoreError(error, operation) {
            let errorMessage = `Erreur ${operation}: ${error.code || 'inconnu'}`;
            let linkUrl = null;
            
            if (error.code === 'failed-precondition' || error.message.includes('index')) {
                // Extract index URL from error message if available
                const urlMatch = error.message.match(/https:\/\/console\.firebase\.google\.com[^\s)]+/);
                if (urlMatch) {
                    linkUrl = urlMatch[0];
                    errorMessage += `\n\nLien pour créer l'index: ${linkUrl}`;
                } else {
                    errorMessage += '\n\nUn index Firestore est requis. Consultez la console Firebase.';
                }
            }
            
            console.error(`${operation} error:`, error);
            addDebugLog(errorMessage, 'error', linkUrl);
            
            return errorMessage;
        }

        // Initialize or check Admin collection
        async function initializeAdminCollection() {
            try {
                addDebugLog('Vérification de la collection Admin...', 'info');
                
                const adminCollectionRef = collection(db, "Admin");
                const adminSnapshot = await getDocs(adminCollectionRef);
                
                if (adminSnapshot.empty) {
                    addDebugLog('Collection Admin vide, création des admins par défaut...', 'info');
                    
                    // Create admin entries for each admin email
                    for (const email of ADMIN_EMAILS) {
                        const adminData = {
                            email: email,
                            isAdmin: true,
                            createdAt: serverTimestamp(),
                            addedBy: 'system'
                        };
                        
                        // Use email as document ID (replace dots and @ with underscores for valid doc ID)
                        const adminDocId = email.replace(/[@.]/g, '_');
                        await setDoc(doc(db, "Admin", adminDocId), adminData);
                        
                        addDebugLog(`Admin ajouté: ${email}`, 'success');
                    }
                    
                    addDebugLog(`Collection Admin initialisée avec ${ADMIN_EMAILS.length} administrateurs`, 'success');
                } else {
                    addDebugLog(`Collection Admin déjà existante avec ${adminSnapshot.size} entrées`, 'info');
                }
                
            } catch (error) {
                handleFirestoreError(error, 'initialisation de la collection Admin');
            }
        }

        // Check if current user is admin
        async function checkAdminStatus() {
            if (!currentUser) return false;
            
            try {
                // Check if user email is in admin list
                if (ADMIN_EMAILS.includes(currentUser.email)) {
                    addDebugLog(`Utilisateur ${currentUser.email} identifié comme administrateur`, 'success');
                    
                    // Also verify in Admin collection
                    const adminDocId = currentUser.email.replace(/[@.]/g, '_');
                    const adminRef = doc(db, "Admin", adminDocId);
                    const adminDoc = await getDoc(adminRef);
                    
                    if (adminDoc.exists() && adminDoc.data().isAdmin) {
                        isAdmin = true;
                        updateAdminStatus();
                        return true;
                    } else {
                        // If not in collection but in the email list, add them
                        const adminData = {
                            email: currentUser.email,
                            isAdmin: true,
                            createdAt: serverTimestamp(),
                            addedBy: 'system',
                            userId: currentUser.uid
                        };
                        
                        await setDoc(adminRef, adminData);
                        addDebugLog(`Admin ${currentUser.email} ajouté à la collection Admin`, 'success');
                        
                        isAdmin = true;
                        updateAdminStatus();
                        return true;
                    }
                } else {
                    isAdmin = false;
                    return false;
                }
                
            } catch (error) {
                handleFirestoreError(error, 'vérification du statut admin');
                return false;
            }
        }

        let isLoggedIn = false;
        let currentUser = null;
        let currentUserData = null;
        let isAdmin = false;
        let currentSection = 'forecasts'; // Section par défaut changée à 'forecasts'
        let isOnline = navigator.onLine;
        let eventsUnsubscribe = null;
        let profileImageFile = null;
        let profileUpdating = false;
        let isLoadingEvents = false;
        let profileNameChanged = false;
        let currentEventForDeletion = null;
        let currentForecastTab = 'combines';
        let lastViewedEventTimestamp = null;
        let hasNewEvents = false;
        let isSearchActive = false;
        let currentSearchContext = '';
        let selectedTheme = localStorage.getItem('parisAllianceTheme') || 'default';
        let selectedTransition = localStorage.getItem('parisAllianceTransition') || 'default';
        let selectedCardStyle = localStorage.getItem('parisAllianceCardStyle') || 'default';
        let forecastsCache = {};
        let usersCache = {};

        // Function to get current date in YYYY-MM-DD format
        function getCurrentDateString() {
            return new Date().toISOString().slice(0, 10);
        }

        // Function to get previous date string
        function getDateString(daysAgo = 0) {
            const date = new Date();
            date.setDate(date.getDate() - daysAgo);
            return date.toISOString().slice(0, 10);
        }

        // Function to get forecast file URL for a specific date
        function getForecastFileUrl(dateString) {
            return `https://raw.githubusercontent.com/Jonnhy2255/Pronosoftbot/main/prédiction-${dateString}-analyse-ia.json`;
        }

        // Function to fetch forecasts from GitHub for a specific date
        async function fetchForecastsFromGitHub(dateString) {
            const fileUrl = getForecastFileUrl(dateString);
            
            try {
                addDebugLog(`Récupération des pronostics pour ${dateString}: ${fileUrl}`, 'info');
                
                const response = await fetch(fileUrl);
                
                if (!response.ok) {
                    if (response.status === 404) {
                        addDebugLog(`Fichier de pronostics non trouvé pour ${dateString}`, 'warning');
                        return null;
                    }
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const data = await response.json();
                addDebugLog(`Pronostics récupérés avec succès pour ${dateString}`, 'success');
                
                return data;
            } catch (error) {
                addDebugLog(`Erreur lors de la récupération des pronostics pour ${dateString}: ${error.message}`, 'error');
                return null;
            }
        }

        // Function to process and categorize forecasts with new structure
        function processForecastData(data) {
            const processed = {
                combines: [],
                'ia-singles': [],
                safes: [],
                simple: []
            };

            if (!data) {
                return processed;
            }

            // Traiter les combinés depuis predictions_combinees.details
            if (data.predictions_combinees_ia && data.predictions_combinees_ia.details) {
                data.predictions_combinees_ia.details.forEach(forecast => {
                    processed.combines.push({
                        id: forecast.id,
                        name: forecast.name,
                        description: forecast.description,
                        matches: forecast.matches,
                        confidence: forecast.combined_confidence,
                        estimated_odds: forecast.estimated_odds,
                        type: 'combined',
                        size: forecast.size
                    });
                });
            }

            // Traiter les "Singles Premium" depuis ia_singles_premium.details
            if (data.ia_singles_premium && data.ia_singles_premium.details) {
                data.ia_singles_premium.details.forEach(forecast => {
                    processed['ia-singles'].push({
                        id: forecast.id,
                        HomeTeam: forecast.HomeTeam,
                        AwayTeam: forecast.AwayTeam,
                        confidence: forecast.confidence,
                        date: forecast.date,
                        league: forecast.league,
                        country: forecast.country,
                        prediction: forecast.prediction,
                        type: 'single',
                        score_prediction: forecast.score_prediction,
                        poisson_probabilities: forecast.poisson_probabilities,
                        poisson_top_scores: forecast.poisson_top_scores
                    });
                });
            }

            // Traiter les "safes" depuis recommandations.safest_bets
            if (data.recommandations && data.recommandations.safest_bets) {
                data.recommandations.safest_bets.forEach(forecast => {
                    processed.safes.push({
                        id: forecast.id,
                        HomeTeam: forecast.HomeTeam,
                        AwayTeam: forecast.AwayTeam,
                        confidence: forecast.confidence,
                        date: forecast.date,
                        league: forecast.league,
                        country: forecast.country,
                        prediction: forecast.prediction,
                        type: 'single',
                        score_prediction: forecast.score_prediction,
                        poisson_probabilities: forecast.poisson_probabilities,
                        poisson_top_scores: forecast.poisson_top_scores
                    });
                });
            }

            // Traiter les pronostics simples
            if (data.predictions_simples && data.predictions_simples.details) {
                data.predictions_simples.details.forEach(forecast => {
                    processed.simple.push({
                        id: forecast.id,
                        HomeTeam: forecast.HomeTeam,
                        AwayTeam: forecast.AwayTeam,
                        confidence: forecast.confidence,
                        date: forecast.date,
                        league: forecast.league,
                        country: forecast.country,
                        prediction: forecast.prediction,
                        type: 'single',
                        score_prediction: forecast.score_prediction,
                        poisson_probabilities: forecast.poisson_probabilities,
                        poisson_top_scores: forecast.poisson_top_scores
                    });
                });
            }

            return processed;
        }

        // Enhanced card system with 4 faces and improved touch handling
        function setupCardInteractions() {
            let touchStartX = 0;
            let touchStartY = 0;
            let currentCard = null;
            let cardState = 0; // 0: front, 1: details, 2: probabilities, 3: scores

            document.addEventListener('touchstart', function(e) {
                const card = e.target.closest('.forecast-item');
                if (!card) return;

                touchStartX = e.touches[0].clientX;
                touchStartY = e.touches[0].clientY;
                currentCard = card;
            }, { passive: true });

            document.addEventListener('touchend', function(e) {
                if (!currentCard) return;

                const touchEndX = e.changedTouches[0].clientX;
                const touchEndY = e.changedTouches[0].clientY;
                const diffX = touchStartX - touchEndX;
                const diffY = touchStartY - touchEndY;

                // Check if it's a horizontal swipe (not vertical)
                if (Math.abs(diffX) > Math.abs(diffY) && Math.abs(diffX) > 50) {
                    const container = currentCard.querySelector('.forecast-card-container');
                    const indicators = currentCard.querySelectorAll('.face-dot');
                    
                    // Get current state
                    let currentState = 0;
                    if (container.classList.contains('show-details')) currentState = 1;
                    else if (container.classList.contains('show-probabilities')) currentState = 2;
                    else if (container.classList.contains('show-scores')) currentState = 3;
                    
                    let newState;
                    if (diffX > 0) {
                        // Swipe left - next face
                        newState = (currentState + 1) % 4;
                    } else {
                        // Swipe right - previous face
                        newState = (currentState - 1 + 4) % 4;
                    }
                    
                    // Update card state
                    container.classList.remove('show-details', 'show-probabilities', 'show-scores');
                    indicators.forEach(dot => dot.classList.remove('active'));
                    
                    if (newState === 1) {
                        container.classList.add('show-details');
                        indicators[1].classList.add('active');
                    } else if (newState === 2) {
                        container.classList.add('show-probabilities');
                        indicators[2].classList.add('active');
                    } else if (newState === 3) {
                        container.classList.add('show-scores');
                        indicators[3].classList.add('active');
                    } else {
                        indicators[0].classList.add('active');
                    }
                }

                currentCard = null;
            }, { passive: true });

            // Support for clicks/taps
            document.addEventListener('click', function(e) {
                const card = e.target.closest('.forecast-item');
                if (!card) return;
                
                // Avoid toggle if clicking on a link or button
                if (e.target.closest('a, button')) return;
                
                const container = card.querySelector('.forecast-card-container');
                const indicators = card.querySelectorAll('.face-dot');
                
                // Get current state
                let currentState = 0;
                if (container.classList.contains('show-details')) currentState = 1;
                else if (container.classList.contains('show-probabilities')) currentState = 2;
                else if (container.classList.contains('show-scores')) currentState = 3;
                
                // Cycle to next face
                const newState = (currentState + 1) % 4;
                
                // Update card state
                container.classList.remove('show-details', 'show-probabilities', 'show-scores');
                indicators.forEach(dot => dot.classList.remove('active'));
                
                if (newState === 1) {
                    container.classList.add('show-details');
                    indicators[1].classList.add('active');
                } else if (newState === 2) {
                    container.classList.add('show-probabilities');
                    indicators[2].classList.add('active');
                } else if (newState === 3) {
                    container.classList.add('show-scores');
                    indicators[3].classList.add('active');
                } else {
                    indicators[0].classList.add('active');
                }
            });
        }

        function setupTheme() {
            const themeClasses = ['theme-green', 'theme-red', 'theme-orange', 'theme-red-pink', 'theme-green-yellow', 'theme-blue-purple', 'theme-orange-gold', 'theme-purple', 'theme-teal', 'theme-indigo', 'theme-pink', 'theme-cyan', 'theme-lime', 'theme-amber', 'theme-deep-orange', 'theme-hightech'];
            
            document.documentElement.classList.remove(...themeClasses);
            
            if (selectedTheme !== 'default') {
                document.documentElement.classList.add(`theme-${selectedTheme}`);
            }
            
            document.querySelectorAll('.theme-option').forEach(option => {
                option.classList.remove('active');
            });
            
            const activeThemeOption = document.querySelector(`.theme-option[data-theme="${selectedTheme}"]`);
            if (activeThemeOption) {
                activeThemeOption.classList.add('active');
            }
        }

        function setupTransitions() {
            const transitionClasses = ['card-transition-smooth', 'card-transition-bounce', 'card-transition-elastic', 'card-transition-fast', 'card-transition-slow'];
            
            document.documentElement.classList.remove(...transitionClasses);
            
            if (selectedTransition !== 'default') {
                document.documentElement.classList.add(`card-transition-${selectedTransition}`);
            }
            
            document.querySelectorAll('.transition-option').forEach(option => {
                option.classList.remove('active');
            });
            
            const activeTransitionOption = document.querySelector(`.transition-option[data-transition="${selectedTransition}"]`);
            if (activeTransitionOption) {
                activeTransitionOption.classList.add('active');
            }
        }

        function setupCardStyles() {
            const cardStyleClasses = ['card-style-gradient', 'card-style-glass', 'card-style-shadow', 'card-style-neon'];
            
            document.documentElement.classList.remove(...cardStyleClasses);
            
            if (selectedCardStyle !== 'default') {
                document.documentElement.classList.add(`card-style-${selectedCardStyle}`);
            }
            
            document.querySelectorAll('.card-style-option').forEach(option => {
                option.classList.remove('active');
            });
            
            const activeCardStyleOption = document.querySelector(`.card-style-option[data-style="${selectedCardStyle}"]`);
            if (activeCardStyleOption) {
                activeCardStyleOption.classList.add('active');
            }
        }
        
        function setupDarkMode() {
            const savedPreference = localStorage.getItem('parisAllianceDarkMode');
            
            if (savedPreference === 'true') {
                document.documentElement.classList.add('dark');
                document.getElementById('dark-toggle').checked = true;
            } else if (savedPreference === 'false') {
                document.documentElement.classList.remove('dark');
                document.getElementById('dark-toggle').checked = false;
            } else if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                document.documentElement.classList.add('dark');
                document.getElementById('dark-toggle').checked = true;
            } else {
                document.documentElement.classList.remove('dark');
                document.getElementById('dark-toggle').checked = false;
            }
            
            window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
                if (localStorage.getItem('parisAllianceDarkMode') === null) {
                    if (event.matches) {
                        document.documentElement.classList.add('dark');
                        document.getElementById('dark-toggle').checked = true;
                    } else {
                        document.documentElement.classList.remove('dark');
                        document.getElementById('dark-toggle').checked = false;
                    }
                }
            });
        }
        
        function setupConnectionMonitoring() {
            function updateConnectionStatus() {
                if (navigator.onLine) {
                    isOnline = true;
                } else {
                    isOnline = false;
                    showNotification("Pas de connexion internet.", "error");
                }
            }
            
            window.addEventListener('online', () => {
                showNotification("Connexion rétablie", "success");
                isOnline = true;
                
                setTimeout(() => {
                    if (isLoggedIn && (currentSection === 'ai-forecasts' || currentSection === 'forecasts' || currentSection === 'history')) {
                        if (currentSection === 'ai-forecasts') {
                            loadForecastsData(currentForecastTab);
                        } else if (currentSection === 'history') {
                            loadHistoryData();
                        } else {
                            loadForecastsData('simple');
                        }
                    }
                }, 1000);
            });
            
            window.addEventListener('offline', () => {
                updateConnectionStatus();
            });
            
            updateConnectionStatus();
        }
        
        function showNotification(message, type = 'info') {
            const notification = document.getElementById('notification');
            if (!notification) return;
            
            notification.classList.remove('show');
            
            setTimeout(() => {
                notification.textContent = message;
                notification.className = 'notification ' + type;
                notification.classList.add('show');
                
                setTimeout(() => {
                    notification.classList.remove('show');
                    
                    setTimeout(() => {
                        notification.className = 'notification';
                        notification.textContent = '';
                    }, 300);
                }, 3000);
            }, 100);
        }

        function updateBadges() {
            const adminBadge = document.getElementById('admin-badge');
            
            if (adminBadge) {
                if (isAdmin) {
                    adminBadge.style.display = 'inline-block';
                } else {
                    adminBadge.style.display = 'none';
                }
            }
        }

        function playTutorialVideo(videoType) {
            const videoModal = document.getElementById('video-modal');
            const videoPlayer = document.getElementById('video-player');
            
            // URLs YouTube démo pour les tutoriels
            const videoUrls = {
                'free-sats': 'https://www.youtube.com/embed/dQw4w9WgXcQ',
                'understand-predictions': 'https://www.youtube.com/embed/dQw4w9WgXcQ',
                'advanced-features': 'https://www.youtube.com/embed/dQw4w9WgXcQ'
            };
            
            if (videoUrls[videoType]) {
                videoPlayer.src = videoUrls[videoType];
                videoModal.classList.add('active');
                history.pushState({ page: 'video-tutorial' }, '');
            } else {
                // Fallback: show notification for demo
                const videoTitles = {
                    'free-sats': 'Guide complet de Pari Alliance',
                    'understand-predictions': 'Comment comprendre nos prédictions',
                    'advanced-features': 'Fonctionnalités avancées'
                };
                
                showNotification(`Vidéo "${videoTitles[videoType]}" bientôt disponible`, 'info');
            }
        }

        function closeVideoModal() {
            const videoModal = document.getElementById('video-modal');
            const videoPlayer = document.getElementById('video-player');
            
            videoModal.classList.remove('active');
            videoPlayer.src = '';
        }

        function claimFreeSubscription() {
            const phoneNumber = '0565343227';
            const message = `Bonjour ! Je suis un utilisateur de Pari Alliance et je souhaite rejoindre la communauté pour recevoir des conseils exclusifs et participer aux discussions. Merci !`;
            const whatsappUrl = `https://wa.me/${phoneNumber}?text=${encodeURIComponent(message)}`;
            
            addDebugLog('Ouverture de WhatsApp pour rejoindre la communauté', 'info');
            window.open(whatsappUrl, '_blank');
        }
        
        function setupUIEvents() {
            // Debug panel setup
            document.getElementById('debug-toggle-btn').addEventListener('click', function() {
                debugPanelVisible = !debugPanelVisible;
                const panel = document.getElementById('debug-log-panel');
                if (debugPanelVisible) {
                    panel.classList.add('active');
                    updateDebugPanel();
                } else {
                    panel.classList.remove('active');
                }
            });

            document.getElementById('debug-log-close').addEventListener('click', function() {
                debugPanelVisible = false;
                document.getElementById('debug-log-panel').classList.remove('active');
            });

            // Claim free subscription button
            document.getElementById('claim-free-subscription').addEventListener('click', claimFreeSubscription);

            document.getElementById('header-menu-button').addEventListener('click', function() {
                document.getElementById('side-menu').classList.add('active');
                document.getElementById('side-menu-overlay').classList.add('active');
            });
            
            document.getElementById('side-menu-close').addEventListener('click', function() {
                document.getElementById('side-menu').classList.remove('active');
                document.getElementById('side-menu-overlay').classList.remove('active');
            });
            
            document.getElementById('side-menu-overlay').addEventListener('click', function() {
                document.getElementById('side-menu').classList.remove('active');
                document.getElementById('side-menu-overlay').classList.remove('active');
            });
            
            document.getElementById('menu-history').addEventListener('click', function() {
                document.getElementById('side-menu').classList.remove('active');
                document.getElementById('side-menu-overlay').classList.remove('active');
                showHistorySection();
            });

            document.getElementById('menu-tutorials').addEventListener('click', function() {
                document.getElementById('side-menu').classList.remove('active');
                document.getElementById('side-menu-overlay').classList.remove('active');
                showTutorialsSection();
            });
            
            document.getElementById('menu-interface').addEventListener('click', function() {
                document.getElementById('side-menu').classList.remove('active');
                document.getElementById('side-menu-overlay').classList.remove('active');
                showInterfaceSection();
            });
            
            document.getElementById('menu-terms').addEventListener('click', function() {
                document.getElementById('side-menu').classList.remove('active');
                document.getElementById('side-menu-overlay').classList.remove('active');
                showTermsDialog();
            });
            
            document.getElementById('terms-back').addEventListener('click', hideTermsDialog);
            
            document.getElementById('menu-about').addEventListener('click', function() {
                document.getElementById('side-menu').classList.remove('active');
                document.getElementById('side-menu-overlay').classList.remove('active');
                showAboutDialog();
            });
            
            document.getElementById('about-back').addEventListener('click', hideAboutDialog);
            
            document.getElementById('search-button').addEventListener('click', function() {
                toggleSearchBar();
            });
            
            document.getElementById('search-close').addEventListener('click', function() {
                hideSearchBar();
            });
            
            document.getElementById('search-input').addEventListener('input', function() {
                handleSearch(this.value);
            });
            
            document.getElementById('events-button').addEventListener('click', function() {
                showEventsSection();
                updateLastViewedEventTimestamp();
                hideEventNotificationDot();
            });
            
            document.getElementById('bottom-nav').addEventListener('click', function(e) {
                const navItems = this.querySelectorAll('.nav-item');
                
                for (let i = 0; i < navItems.length; i++) {
                    const item = navItems[i];
                    const rect = item.getBoundingClientRect();
                    
                    if (e.clientX >= rect.left && e.clientX <= rect.right &&
                        e.clientY >= rect.top && e.clientY <= rect.bottom) {
                        
                        const section = item.getAttribute('data-section');
                        if (section === 'forecasts') {
                            showForecastsSection();
                        } else if (section === 'ai-forecasts') {
                            // Maintenant accessible à tous
                            showAIForecastsSection();
                        } else if (section === 'profile') {
                            showProfileSection();
                        }
                        
                        break;
                    }
                }
            });

            // Tutorial video events
            document.querySelectorAll('.tutorial-thumbnail').forEach(thumbnail => {
                thumbnail.addEventListener('click', function() {
                    const videoType = this.getAttribute('data-video');
                    playTutorialVideo(videoType);
                });
            });

            document.getElementById('video-close').addEventListener('click', closeVideoModal);
            
            document.querySelectorAll('.ai-forecast-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabId = this.getAttribute('data-tab');
                    switchAIForecastTab(tabId);
                });
            });
            
            document.getElementById('dark-toggle').addEventListener('change', function() {
                if (this.checked) {
                    document.documentElement.classList.add('dark');
                } else {
                    document.documentElement.classList.remove('dark');
                }
                
                localStorage.setItem('parisAllianceDarkMode', this.checked ? 'true' : 'false');
            });
            
            document.querySelectorAll('.theme-option').forEach(option => {
                option.addEventListener('click', function() {
                    const theme = this.getAttribute('data-theme');
                    selectedTheme = theme;
                    
                    const themeClasses = ['theme-green', 'theme-red', 'theme-orange', 'theme-red-pink', 'theme-green-yellow', 'theme-blue-purple', 'theme-orange-gold', 'theme-purple', 'theme-teal', 'theme-indigo', 'theme-pink', 'theme-cyan', 'theme-lime', 'theme-amber', 'theme-deep-orange', 'theme-hightech'];
                    document.documentElement.classList.remove(...themeClasses);
                    
                    if (theme !== 'default') {
                        document.documentElement.classList.add(`theme-${theme}`);
                    }
                    
                    document.querySelectorAll('.theme-option').forEach(opt => {
                        opt.classList.remove('active');
                    });
                    this.classList.add('active');
                    
                    localStorage.setItem('parisAllianceTheme', theme);
                    
                    const themeNames = {
                        'default': 'Bleu',
                        'green': 'Vert',
                        'red': 'Rouge',
                        'orange': 'Orange',
                        'red-pink': 'Rouge-Rose',
                        'green-yellow': 'Vert-Jaune',
                        'blue-purple': 'Bleu-Violet',
                        'orange-gold': 'Orange-Doré',
                        'purple': 'Violet',
                        'teal': 'Turquoise',
                        'indigo': 'Indigo',
                        'pink': 'Rose',
                        'cyan': 'Cyan',
                        'lime': 'Lime',
                        'amber': 'Ambre',
                        'deep-orange': 'Orange Foncé',
                        'hightech': 'High-Tech'
                    };
                    
                    showNotification(`Thème ${themeNames[theme]} appliqué`, 'success');
                });
            });

            // Transition selector events
            document.querySelectorAll('.transition-option').forEach(option => {
                option.addEventListener('click', function() {
                    const transition = this.getAttribute('data-transition');
                    selectedTransition = transition;
                    
                    const transitionClasses = ['card-transition-smooth', 'card-transition-bounce', 'card-transition-elastic', 'card-transition-fast', 'card-transition-slow'];
                    document.documentElement.classList.remove(...transitionClasses);
                    
                    if (transition !== 'default') {
                        document.documentElement.classList.add(`card-transition-${transition}`);
                    }
                    
                    document.querySelectorAll('.transition-option').forEach(opt => {
                        opt.classList.remove('active');
                    });
                    this.classList.add('active');
                    
                    localStorage.setItem('parisAllianceTransition', transition);
                    
                    const transitionNames = {
                        'default': 'Fluide',
                        'smooth': 'Doux',
                        'bounce': 'Rebond',
                        'elastic': 'Élastique',
                        'fast': 'Rapide',
                        'slow': 'Lent'
                    };
                    
                    showNotification(`Animation ${transitionNames[transition]} appliquée`, 'success');
                });
            });

            // Card style selector events
            document.querySelectorAll('.card-style-option').forEach(option => {
                option.addEventListener('click', function() {
                    const style = this.getAttribute('data-style');
                    selectedCardStyle = style;
                    
                    const cardStyleClasses = ['card-style-gradient', 'card-style-glass', 'card-style-shadow', 'card-style-neon'];
                    document.documentElement.classList.remove(...cardStyleClasses);
                    
                    if (style !== 'default') {
                        document.documentElement.classList.add(`card-style-${style}`);
                    }
                    
                    document.querySelectorAll('.card-style-option').forEach(opt => {
                        opt.classList.remove('active');
                    });
                    this.classList.add('active');
                    
                    localStorage.setItem('parisAllianceCardStyle', style);
                    
                    const styleNames = {
                        'default': 'Standard',
                        'gradient': 'Dégradé',
                        'glass': 'Verre',
                        'shadow': 'Ombre',
                        'neon': 'Néon'
                    };
                    
                    showNotification(`Style ${styleNames[style]} appliqué`, 'success');
                });
            });
            
            document.getElementById('logout-btn').addEventListener('click', showLogoutConfirmation);
            document.getElementById('logout-cancel').addEventListener('click', hideLogoutConfirmation);
            document.getElementById('logout-confirm').addEventListener('click', logoutUser);
            
            document.getElementById('delete-account-btn').addEventListener('click', showDeleteAccountConfirmation);
            
            document.getElementById('delete-account-cancel').addEventListener('click', hideDeleteAccountConfirmation);
            document.getElementById('delete-account-confirm').addEventListener('click', deleteAccount);
            
            document.getElementById('edit-profile-btn').addEventListener('click', showProfileEditDialog);
            document.getElementById('edit-profile-pic').addEventListener('click', showProfileEditDialog);
            
            document.getElementById('profile-edit-back').addEventListener('click', hideProfileEditDialog);
            document.getElementById('profile-upload-btn').addEventListener('click', function() {
                document.getElementById('profile-image-input').click();
            });
            
            document.getElementById('profile-image-input').addEventListener('change', handleProfileImageSelect);
            
            document.getElementById('save-display-name-btn').addEventListener('click', updateDisplayName);
            document.getElementById('save-profile-image-btn').addEventListener('click', updateProfileImage);
            
            document.getElementById('edit-display-name').addEventListener('input', function() {
                profileNameChanged = true;
                document.getElementById('save-display-name-btn').disabled = this.value.trim() === '';
            });
            
            document.getElementById('admin-notif-back').addEventListener('click', hideAdminNotificationDialog);
            document.getElementById('send-notification-btn').addEventListener('click', sendAdminNotification);
            
            document.addEventListener('contextmenu', function(e) {
                if (e.target.tagName === 'IMG') {
                    e.preventDefault();
                    return false;
                }
            });
            
            const touchableElements = document.querySelectorAll('.menu-button, .back-button, .search-button, .events-button, .info-button, .search-close');
            touchableElements.forEach(element => {
                element.addEventListener('touchstart', createRippleEffect);
            });
            
            window.addEventListener('popstate', handleBackButton);
            
            history.pushState({ page: 'main' }, '');

            // Setup card interactions for improved swipe handling
            setupCardInteractions();
        }
        
        function handleBackButton(event) {
            event.preventDefault();
            
            if (document.querySelector('.confirmation-dialog.active')) {
                document.querySelectorAll('.confirmation-dialog.active').forEach(dialog => {
                    const cancelBtn = dialog.querySelector('.confirmation-cancel');
                    if (cancelBtn) cancelBtn.click();
                });
                history.pushState({ page: 'main' }, '');
                return;
            }

            if (document.getElementById('video-modal').classList.contains('active')) {
                closeVideoModal();
                history.pushState({ page: 'main' }, '');
                return;
            }
            
            if (isSearchActive) {
                hideSearchBar();
                history.pushState({ page: 'main' }, '');
                return;
            }
            
            if (document.getElementById('side-menu').classList.contains('active')) {
                document.getElementById('side-menu').classList.remove('active');
                document.getElementById('side-menu-overlay').classList.remove('active');
                history.pushState({ page: 'main' }, '');
                return;
            }
            
            if (currentSection !== 'forecasts') {
                showForecastsSection();
                history.pushState({ page: 'main' }, '');
                return;
            }
            
            const dialogs = [
                { id: 'about-dialog', backBtn: 'about-back' },
                { id: 'terms-dialog', backBtn: 'terms-back' },
                { id: 'profile-edit-dialog', backBtn: 'profile-edit-back' },
                { id: 'admin-notif-dialog', backBtn: 'admin-notif-back' }
            ];
            
            for (const dialog of dialogs) {
                if (document.getElementById(dialog.id).classList.contains('active')) {
                    document.getElementById(dialog.backBtn).click();
                    history.pushState({ page: 'main' }, '');
                    return;
                }
            }
            
            if (currentSection === 'forecasts') {
                history.pushState({ page: 'main' }, '');
            }
        }
        
        function createRippleEffect(e) {
            const button = e.currentTarget;
            const circle = document.createElement('span');
            const diameter = Math.max(button.clientWidth, button.clientHeight);
            
            circle.style.width = circle.style.height = `${diameter}px`;
            circle.style.left = `${e.touches[0].pageX - button.offsetLeft - diameter / 2}px`;
            circle.style.top = `${e.touches[0].pageY - button.offsetTop - diameter / 2}px`;
            circle.classList.add('ripple');
            
            const ripple = button.querySelector('.ripple');
            if (ripple) {
                ripple.remove();
            }
            
            button.appendChild(circle);
            
            setTimeout(() => {
                circle.remove();
            }, 600);
        }
        
        function toggleSearchBar() {
            const searchContainer = document.getElementById('search-container');
            const searchInput = document.getElementById('search-input');
            const header = document.querySelector('.header');
            
            if (isSearchActive) {
                hideSearchBar();
            } else {
                header.classList.add('search-active');
                searchContainer.classList.add('active');
                searchInput.focus();
                isSearchActive = true;
                
                history.pushState({ page: 'search' }, '');
                
                currentSearchContext = currentSection;
                
                if (currentSearchContext === 'ai-forecasts') {
                    searchInput.placeholder = 'Rechercher une prédiction...';
                } else if (currentSearchContext === 'events') {
                    searchInput.placeholder = 'Rechercher un événement...';
                } else if (currentSearchContext === 'forecasts') {
                    searchInput.placeholder = 'Rechercher un pronostic...';
                } else if (currentSearchContext === 'history') {
                    searchInput.placeholder = 'Rechercher dans l\'historique...';
                }
            }
        }
        
        function hideSearchBar() {
            const searchContainer = document.getElementById('search-container');
            const searchInput = document.getElementById('search-input');
            const header = document.querySelector('.header');
            
            searchContainer.classList.remove('active');
            searchContainer.classList.add('hiding');
            
            setTimeout(() => {
                header.classList.remove('search-active');
                searchInput.value = '';
                searchContainer.classList.remove('hiding');
                isSearchActive = false;
                
                handleSearch('');
            }, 300);
        }
        
        function handleSearch(query) {
            if (currentSearchContext === 'ai-forecasts') {
                filterForecasts(query);
            } else if (currentSearchContext === 'events') {
                filterEvents(query);
            } else if (currentSearchContext === 'forecasts') {
                filterForecasts(query);
            } else if (currentSearchContext === 'history') {
                filterHistory(query);
            }
        }

        function filterForecasts(query) {
            // Implement forecast filtering logic here
            // This would filter the displayed forecasts based on the search query
        }

        function filterEvents(query) {
            // Implement events filtering logic here
            // This would filter the displayed events based on the search query
        }

        function filterHistory(query) {
            // Implement history filtering logic here
            // This would filter the displayed historical forecasts based on the search query
        }
        
        function showTermsDialog() {
            document.getElementById('terms-dialog').classList.add('active');
            history.pushState({ page: 'terms' }, '');
        }
        
        function hideTermsDialog() {
            document.getElementById('terms-dialog').classList.remove('active');
        }
        
        function showAboutDialog() {
            document.getElementById('about-dialog').classList.add('active');
            history.pushState({ page: 'about' }, '');
        }
        
        function hideAboutDialog() {
            document.getElementById('about-dialog').classList.remove('active');
        }

        function showTutorialsSection() {
            hideSearchBar();
            
            currentSection = 'tutorials';
            
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            
            document.getElementById('tutorials-section').classList.add('active');
            
            document.getElementById('header-title').textContent = 'Tutoriels';
            
            document.getElementById('header-menu-button').style.display = 'none';
            document.getElementById('header-back-button').style.display = 'block';
            
            document.getElementById('header-action').innerHTML = '';
            
            document.getElementById('header-back-button').addEventListener('click', function() {
                showForecastsSection();
            });

            document.getElementById('bottom-nav').style.display = 'none';
            document.querySelector('.content').classList.add('no-bottom-nav');
            
            history.pushState({ page: 'tutorials' }, '');
        }

        function showHistorySection() {
            hideSearchBar();
            
            currentSection = 'history';
            
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            
            document.getElementById('history-section').classList.add('active');
            
            document.getElementById('header-title').textContent = 'Historique';
            
            document.getElementById('header-menu-button').style.display = 'none';
            document.getElementById('header-back-button').style.display = 'block';
            
            document.getElementById('header-action').innerHTML = `
                <div class="search-button" id="search-button">
                    <i class="fas fa-search"></i>
                </div>
            `;
            
            document.getElementById('search-button').addEventListener('click', toggleSearchBar);
            
            document.getElementById('header-back-button').addEventListener('click', function() {
                showForecastsSection();
            });

            document.getElementById('bottom-nav').style.display = 'none';
            document.querySelector('.content').classList.add('no-bottom-nav');
            
            loadHistoryData();
            
            history.pushState({ page: 'history' }, '');
        }

        async function loadHistoryData() {
            const historyContent = document.getElementById('history-content');
            
            historyContent.innerHTML = `
                <div style="display: flex; flex-direction: column; align-items: center; justify-content: center; height: 200px;">
                    <i class="fas fa-spinner fa-spin" style="font-size: 30px; color: var(--primary-color);"></i>
                    <div style="margin-top: 10px; font-weight: bold;">Chargement de l'historique...</div>
                </div>
            `;

            try {
                // Charger seulement les données d'hier et d'avant-hier (pas d'aujourd'hui)
                const yesterday = getDateString(1);
                const dayBeforeYesterday = getDateString(2);
                
                // Fetch data for yesterday and day before yesterday
                const [yesterdayData, dayBeforeYesterdayData] = await Promise.all([
                    fetchForecastsFromGitHub(yesterday),
                    fetchForecastsFromGitHub(dayBeforeYesterday)
                ]);

                // Process the data
                const yesterdayProcessed = processForecastData(yesterdayData);
                const dayBeforeYesterdayProcessed = processForecastData(dayBeforeYesterdayData);

                // Display the history
                displayHistoryData(yesterdayProcessed, dayBeforeYesterdayProcessed);

            } catch (error) {
                addDebugLog(`Erreur chargement historique: ${error.message}`, 'error');
                historyContent.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-exclamation-circle"></i>
                        <div class="empty-state-title">Erreur de chargement</div>
                        <div class="empty-state-text">Impossible de charger l'historique des pronostics</div>
                    </div>
                `;
            }
        }

        function displayHistoryData(yesterdayData, dayBeforeYesterdayData) {
            const historyContent = document.getElementById('history-content');
            historyContent.innerHTML = '';

            const yesterday = new Date();
            yesterday.setDate(yesterday.getDate() - 1);
            
            const dayBeforeYesterday = new Date();
            dayBeforeYesterday.setDate(dayBeforeYesterday.getDate() - 2);

            // Display yesterday's data
            if (yesterdayData && Object.values(yesterdayData).some(arr => arr.length > 0)) {
                historyContent.appendChild(createHistoryDateSection(yesterday, yesterdayData));
            }

            // Display day before yesterday's data
            if (dayBeforeYesterdayData && Object.values(dayBeforeYesterdayData).some(arr => arr.length > 0)) {
                historyContent.appendChild(createHistoryDateSection(dayBeforeYesterday, dayBeforeYesterdayData));
            }

            // If no data available
            if (historyContent.children.length === 0) {
                historyContent.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-history"></i>
                        <div class="empty-state-title">Aucun historique</div>
                        <div class="empty-state-text">L'historique des pronostics des 2 derniers jours apparaîtra ici</div>
                    </div>
                `;
            }
        }

        function createHistoryDateSection(date, data) {
            const section = document.createElement('div');
            
            const dateHeader = document.createElement('div');
            dateHeader.className = 'history-date-header';
            dateHeader.textContent = date.toLocaleDateString('fr-FR', { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            });
            section.appendChild(dateHeader);

            // Display each category
            const categories = [
                { key: 'simple', title: 'Pronostics Simples' },
                { key: 'combines', title: 'Combinés IA' },
                { key: 'ia-singles', title: 'Singles Premium' },
                { key: 'safes', title: 'Pronostics Safes' }
            ];

            categories.forEach(category => {
                if (data[category.key] && data[category.key].length > 0) {
                    const categorySection = document.createElement('div');
                    categorySection.className = 'history-category-section';

                    const categoryTitle = document.createElement('div');
                    categoryTitle.className = 'history-category-title';
                    categoryTitle.textContent = `${category.title} (${data[category.key].length})`;
                    categorySection.appendChild(categoryTitle);

                    const forecastsList = document.createElement('div');
                    forecastsList.className = 'history-forecasts-list';

                    data[category.key].forEach(forecast => {
                        const historyItem = createHistoryForecastElement(forecast, category.key);
                        forecastsList.appendChild(historyItem);
                    });

                    categorySection.appendChild(forecastsList);
                    section.appendChild(categorySection);
                }
            });

            return section;
        }

        function createHistoryForecastElement(forecastData, type) {
            const element = document.createElement('div');
            element.className = 'history-forecast-item';

            let content = '';
            
            if (type === 'combines') {
                content = `
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                        <div style="font-weight: bold;">${forecastData.name || 'Combiné'}</div>
                        <div class="forecast-status pending">À venir</div>
                    </div>
                    <div style="font-size: 12px; opacity: 0.8;">
                        ${forecastData.matches ? forecastData.matches.length : 0} matchs • Confiance: ${forecastData.confidence || 'N/A'}%
                    </div>
                    ${forecastData.estimated_odds ? `<div style="font-size: 12px; margin-top: 4px;">Cote estimée: ${forecastData.estimated_odds}</div>` : ''}
                `;
            } else {
                content = `
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                        <div style="font-weight: bold;">${forecastData.HomeTeam || 'Équipe 1'} vs ${forecastData.AwayTeam || 'Équipe 2'}</div>
                        <div class="forecast-status pending">À venir</div>
                    </div>
                    <div style="font-size: 12px; opacity: 0.8;">
                        ${forecastData.prediction || 'N/A'} • Confiance: ${forecastData.confidence || 'N/A'}%
                    </div>
                    <div style="font-size: 11px; margin-top: 4px; opacity: 0.6;">
                        ${forecastData.league || 'Compétition'} • ${forecastData.country || 'Pays'}
                    </div>
                `;
            }

            element.innerHTML = content;
            return element;
        }
        
        function switchAIForecastTab(tabId) {
            currentForecastTab = tabId;
            
            document.querySelectorAll('.ai-forecast-tab').forEach(tab => {
                if (tab.getAttribute('data-tab') === tabId) {
                    tab.classList.add('active');
                } else {
                    tab.classList.remove('active');
                }
            });
            
            document.querySelectorAll('.ai-forecasts-content').forEach(content => {
                if (content.id === `${tabId}-content`) {
                    content.classList.add('active');
                } else {
                    content.classList.remove('active');
                }
            });
            
            loadForecastsData(tabId);
        }
        
        function showAIForecastsSection() {
            hideSearchBar();
            
            document.querySelectorAll('.nav-item').forEach(item => {
                if (item.getAttribute('data-section') === 'ai-forecasts') {
                    item.classList.add('active');
                } else {
                    item.classList.remove('active');
                }
            });
            
            document.getElementById('header-menu-button').style.display = 'block';
            document.getElementById('header-back-button').style.display = 'none';
            
            currentSection = 'ai-forecasts';
            
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            
            document.getElementById('ai-forecasts-section').classList.add('active');
            
            document.getElementById('header-title').textContent = 'Prédictions IA';
            
            document.getElementById('header-action').innerHTML = `
                <div class="search-button" id="search-button">
                    <i class="fas fa-search"></i>
                </div>
                <div class="events-button" id="events-button">
                    <i class="fas fa-bell"></i>
                    <div class="notification-dot" id="events-notification-dot"></div>
                </div>
            `;
            
            if (hasNewEvents) {
                document.getElementById('events-notification-dot').classList.add('active');
            }
            
            document.getElementById('search-button').addEventListener('click', toggleSearchBar);
            document.getElementById('events-button').addEventListener('click', function() {
                showEventsSection();
                updateLastViewedEventTimestamp();
                hideEventNotificationDot();
            });

            document.getElementById('bottom-nav').style.display = 'flex';
            document.querySelector('.content').classList.remove('no-bottom-nav');
            
            loadForecastsData(currentForecastTab);
        }
        
        function showInterfaceSection() {
            hideSearchBar();
            
            currentSection = 'interface';
            
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            
            document.getElementById('interface-section').classList.add('active');
            
            document.getElementById('header-title').textContent = 'Interface';
            
            document.getElementById('header-menu-button').style.display = 'none';
            document.getElementById('header-back-button').style.display = 'block';
            
            document.getElementById('header-action').innerHTML = '';
            
            document.getElementById('header-back-button').addEventListener('click', function() {
                showForecastsSection();
            });

            document.getElementById('bottom-nav').style.display = 'none';
            document.querySelector('.content').classList.add('no-bottom-nav');
            
            setupTheme();
            setupTransitions();
            setupCardStyles();
            
            history.pushState({ page: 'interface' }, '');
        }
        
        async function loadForecastsData(tabType) {
            if (forecastsCache[tabType]) {
                displayForecastsFromCache(tabType);
                return;
            }
            
            let listElement;
            if (currentSection === 'ai-forecasts') {
                listElement = document.getElementById(`${tabType}-list`);
            } else {
                listElement = document.getElementById('simple-forecasts-list');
            }
            
            if (!listElement) return;
            
            listElement.innerHTML = `
                <div style="display: flex; flex-direction: column; align-items: center; justify-content: center; height: 200px;">
                    <i class="fas fa-spinner fa-spin" style="font-size: 30px; color: var(--primary-color);"></i>
                    <div style="margin-top: 10px; font-weight: bold;">Chargement des pronostics...</div>
                </div>
            `;
            
            try {
                // Fetch forecasts from GitHub
                const githubData = await fetchForecastsFromGitHub(getCurrentDateString());
                
                if (!githubData) {
                    listElement.innerHTML = `
                        <div class="no-forecasts">
                            <i class="fas fa-calendar-day"></i>
                            <div class="empty-state-title">Aucune prédiction fiable pour cette section</div>
                            <div class="empty-state-text">Aucun pronostic disponible pour aujourd'hui (${getCurrentDateString()})</div>
                        </div>
                    `;
                    return;
                }
                
                // Process and categorize the data
                const processedData = processForecastData(githubData);
                
                // Cache the processed data
                Object.keys(processedData).forEach(type => {
                    forecastsCache[type] = processedData[type];
                });
                
                if (currentSection === 'ai-forecasts') {
                    displayForecastsFromCache(tabType);
                } else {
                    displayForecastsFromCache('simple');
                }
                
            } catch (error) {
                addDebugLog(`Erreur chargement pronostics: ${error.message}`, 'error');
                listElement.innerHTML = `
                    <div class="no-forecasts">
                        <i class="fas fa-exclamation-circle"></i>
                        <div class="empty-state-title">Aucune prédiction fiable pour cette section</div>
                        <div class="empty-state-text">Impossible de charger les pronostics depuis GitHub</div>
                    </div>
                `;
            }
        }
        
        function displayForecastsFromCache(tabType) {
            let listElement;
            if (currentSection === 'ai-forecasts') {
                listElement = document.getElementById(`${tabType}-list`);
            } else {
                listElement = document.getElementById('simple-forecasts-list');
            }
            
            if (!listElement || !forecastsCache[tabType]) return;
            
            listElement.innerHTML = '';
            
            const forecasts = forecastsCache[tabType];
            
            if (forecasts.length === 0) {
                listElement.innerHTML = `
                    <div class="no-forecasts">
                        <i class="fas fa-futbol"></i>
                        <div class="empty-state-title">Aucune prédiction fiable pour cette section</div>
                        <div class="empty-state-text">Aucun pronostic disponible pour cette catégorie</div>
                    </div>
                `;
                return;
            }
            
            const fragment = document.createDocumentFragment();
            
            forecasts.forEach((forecastData) => {
                const forecastElement = createForecastElement(forecastData, tabType);
                fragment.appendChild(forecastElement);
            });
            
            listElement.appendChild(fragment);
        }
        
        function createForecastElement(forecastData, type) {
            const forecastElement = document.createElement('div');
            forecastElement.className = 'forecast-item';
            
            let statusClass = 'pending';
            let statusText = 'À venir';
            
            if (forecastData.status === 'win') {
                statusClass = 'win';
                statusText = 'Gagné';
            } else if (forecastData.status === 'loss') {
                statusClass = 'loss';
                statusText = 'Perdu';
            }
            
            let formattedDate = 'Aujourd\'hui';
            try {
                if (forecastData.date) {
                    const matchDate = new Date(forecastData.date);
                    const today = new Date();
                    const diffTime = Math.abs(matchDate - today);
                    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                    
                    if (diffDays === 0) {
                        formattedDate = 'Aujourd\'hui';
                    } else if (diffDays === 1) {
                        formattedDate = 'Demain';
                    } else {
                        formattedDate = matchDate.toLocaleDateString('fr-FR', {
                            day: 'numeric',
                            month: 'short'
                        });
                    }
                }
            } catch (e) {
                formattedDate = 'Date inconnue';
            }
            
            if (type === 'combines') {
                // Combiné layout
                forecastElement.innerHTML = `
                    <div class="forecast-card-container">
                        <!-- Face 1: Front -->
                        <div class="forecast-face forecast-front">
                            <div class="forecast-header">
                                <div style="font-weight: bold; font-size: 16px;">${forecastData.name || 'Combiné IA'}</div>
                                <div class="forecast-status ${statusClass}">${statusText}</div>
                            </div>
                            
                            <div style="flex: 1; display: flex; flex-direction: column; justify-content: center;">
                                <div style="text-align: center; margin: 20px 0;">
                                    <div style="font-size: 24px; font-weight: bold; color: var(--card-accent); margin-bottom: 10px;">
                                        ${forecastData.matches ? forecastData.matches.length : 0} Matchs
                                    </div>
                                    <div style="font-size: 14px; opacity: 0.8;">
                                        ${forecastData.description || 'Combiné intelligent basé sur l\'IA'}
                                    </div>
                                </div>
                                
                                ${forecastData.estimated_odds ? `
                                    <div class="estimated-odds">
                                        Cote estimée: ${forecastData.estimated_odds}
                                    </div>
                                ` : ''}
                            </div>
                            
                            <div class="forecast-confidence">
                                <span>Confiance</span>
                                <div class="confidence-bar-container">
                                    <div class="confidence-bar" style="width: ${forecastData.confidence || 0}%"></div>
                                </div>
                                <span>${forecastData.confidence || 0}%</span>
                            </div>
                            
                            <div class="forecast-date">${formattedDate}</div>
                        </div>
                        
                        <!-- Face 2: Details -->
                        <div class="forecast-face forecast-details">
                            <div class="forecast-header">
                                <div style="font-weight: bold;">Détails du combiné</div>
                                <div class="forecast-status ${statusClass}">${statusText}</div>
                            </div>
                            
                            <div class="combined-matches">
                                <div class="combined-matches-title">Matchs inclus (${forecastData.matches ? forecastData.matches.length : 0})</div>
                                ${forecastData.matches ? forecastData.matches.map(match => `
                                    <div class="match-detail">
                                        <div class="match-name">${match.HomeTeam || 'Équipe 1'} vs ${match.AwayTeam || 'Équipe 2'}</div>
                                        <div class="match-prediction">${match.prediction || 'N/A'}</div>
                                        <div class="match-confidence">Confiance: ${match.confidence || 'N/A'}%</div>
                                    </div>
                                `).join('') : '<div>Aucun détail disponible</div>'}
                            </div>
                            
                            <div class="forecast-date">${formattedDate}</div>
                        </div>
                        
                        <!-- Face 3: Empty for combined forecasts -->
                        <div class="forecast-face forecast-probabilities">
                            <div class="forecast-header">
                                <div style="font-weight: bold;">Informations supplémentaires</div>
                                <div class="forecast-status ${statusClass}">${statusText}</div>
                            </div>
                            
                            <div style="flex: 1; display: flex; flex-direction: column; justify-content: center; text-align: center;">
                                <i class="fas fa-brain" style="font-size: 48px; color: var(--card-accent); margin-bottom: 20px;"></i>
                                <div style="font-size: 16px; font-weight: bold; margin-bottom: 10px;">Combiné IA Avancé</div>
                                <div style="font-size: 14px; opacity: 0.8; line-height: 1.5;">
                                    Ce combiné a été généré par notre intelligence artificielle en analysant des milliers de données pour optimiser les chances de réussite.
                                </div>
                            </div>
                            
                            <div class="forecast-date">${formattedDate}</div>
                        </div>
                        
                        <!-- Face 4: Empty for combined forecasts -->
                        <div class="forecast-face forecast-scores">
                            <div class="forecast-header">
                                <div style="font-weight: bold;">Analyse technique</div>
                                <div class="forecast-status ${statusClass}">${statusText}</div>
                            </div>
                            
                            <div style="flex: 1; display: flex; flex-direction: column; justify-content: center; text-align: center;">
                                <div style="background-color: rgba(0,0,0,0.05); border-radius: 10px; padding: 20px; margin: 10px 0;">
                                    <div style="font-weight: bold; margin-bottom: 15px; color: var(--card-accent);">Métadonnées du combiné</div>
                                    <div style="font-size: 14px; margin-bottom: 8px;">Taille: ${forecastData.size || 'N/A'} matchs</div>
                                    <div style="font-size: 14px; margin-bottom: 8px;">Type: Combiné intelligent</div>
                                    <div style="font-size: 14px;">Algorithme: IA Premium</div>
                                </div>
                            </div>
                            
                            <div class="forecast-date">${formattedDate}</div>
                        </div>
                        
                        <!-- Navigation indicators -->
                        <div class="face-indicator">
                            <div class="face-dot active"></div>
                            <div class="face-dot"></div>
                            <div class="face-dot"></div>
                            <div class="face-dot"></div>
                        </div>
                        
                        <div class="swipe-instruction">Glissez ou tapez</div>
                    </div>
                `;
            } else {
                // Single match layout
                forecastElement.innerHTML = `
                    <div class="forecast-card-container">
                        <!-- Face 1: Front -->
                        <div class="forecast-face forecast-front">
                            <div class="forecast-header">
                                <div style="font-weight: bold;">${forecastData.league || 'Compétition'}</div>
                                <div class="forecast-status ${statusClass}">${statusText}</div>
                            </div>
                            
                            <div class="forecast-match">
                                <div class="forecast-team">
                                    <div class="forecast-team-logo">
                                        <i class="fas fa-shield-alt" style="color: var(--card-accent);"></i>
                                    </div>
                                    <div class="forecast-team-name">${forecastData.HomeTeam || 'Équipe 1'}</div>
                                </div>
                                
                                <div class="forecast-score">
                                    ${forecastData.score_prediction || 'vs'}
                                </div>
                                
                                <div class="forecast-team">
                                    <div class="forecast-team-logo">
                                        <i class="fas fa-shield-alt" style="color: var(--card-accent);"></i>
                                    </div>
                                    <div class="forecast-team-name">${forecastData.AwayTeam || 'Équipe 2'}</div>
                                </div>
                            </div>
                            
                            <div style="text-align: center; margin: 15px 0; padding: 10px; background-color: rgba(0,0,0,0.05); border-radius: 8px;">
                                <div style="font-weight: bold; color: var(--card-accent); margin-bottom: 5px;">Prédiction</div>
                                <div style="font-size: 16px; font-weight: bold;">${forecastData.prediction || 'N/A'}</div>
                            </div>
                            
                            <div class="forecast-confidence">
                                <span>Confiance</span>
                                <div class="confidence-bar-container">
                                    <div class="confidence-bar" style="width: ${forecastData.confidence || 0}%"></div>
                                </div>
                                <span>${forecastData.confidence || 0}%</span>
                            </div>
                            
                            <div class="forecast-date">${formattedDate}</div>
                        </div>
                        
                        <!-- Face 2: Details -->
                        <div class="forecast-face forecast-details">
                            <div class="forecast-header">
                                <div style="font-weight: bold;">Détails du match</div>
                                <div class="forecast-status ${statusClass}">${statusText}</div>
                            </div>
                            
                            <div class="forecast-description">
                                <strong>Compétition:</strong> ${forecastData.league || 'Non spécifiée'}<br>
                                <strong>Pays:</strong> ${forecastData.country || 'Non spécifié'}<br>
                                <strong>Type:</strong> ${forecastData.type === 'single' ? 'Pronostic simple' : 'Autre'}<br>
                                <strong>Score prédit:</strong> ${forecastData.score_prediction || 'Non disponible'}
                            </div>
                            
                            <div style="background-color: rgba(0,0,0,0.05); border-radius: 8px; padding: 15px; margin: 15px 0;">
                                <div style="font-weight: bold; margin-bottom: 10px; color: var(--card-accent);">Analyse</div>
                                <div style="font-size: 14px; line-height: 1.5;">
                                    Cette prédiction est basée sur l'analyse de multiples facteurs : forme récente des équipes, 
                                    statistiques historiques, blessures, et conditions de jeu.
                                </div>
                            </div>
                            
                            <div class="forecast-date">${formattedDate}</div>
                        </div>
                        
                        <!-- Face 3: Probabilities -->
                        <div class="forecast-face forecast-probabilities">
                            <div class="forecast-header">
                                <div style="font-weight: bold;">Probabilités Poisson</div>
                                <div class="forecast-status ${statusClass}">${statusText}</div>
                            </div>
                            
                            ${forecastData.poisson_probabilities ? `
                                <div class="poisson-probabilities">
                                    <div class="poisson-title">Analyse statistique</div>
                                    <div class="poisson-row">
                                        <span>Victoire ${forecastData.HomeTeam || 'Domicile'}</span>
                                        <span>${forecastData.poisson_probabilities.win1 || 0}%</span>
                                    </div>
                                    <div class="poisson-row">
                                        <span>Match nul</span>
                                        <span>${forecastData.poisson_probabilities.draw || 0}%</span>
                                    </div>
                                    <div class="poisson-row">
                                        <span>Victoire ${forecastData.AwayTeam || 'Extérieur'}</span>
                                        <span>${forecastData.poisson_probabilities.win2 || 0}%</span>
                                    </div>
                                    <div class="poisson-row">
                                        <span>Plus de 1.5 buts</span>
                                        <span>${forecastData.poisson_probabilities.over15 || 0}%</span>
                                    </div>
                                    <div class="poisson-row">
                                        <span>Plus de 2.5 buts</span>
                                        <span>${forecastData.poisson_probabilities.over25 || 0}%</span>
                                    </div>
                                    <div class="poisson-row">
                                        <span>Moins de 3.5 buts</span>
                                        <span>${forecastData.poisson_probabilities.under35 || 0}%</span>
                                    </div>
                                    <div class="poisson-row">
                                        <span>Les deux équipes marquent</span>
                                        <span>${forecastData.poisson_probabilities.btts || 0}%</span>
                                    </div>
                                </div>
                            ` : `
                                <div style="text-align: center; margin: 40px 0;">
                                    <i class="fas fa-chart-bar" style="font-size: 48px; color: var(--card-accent); margin-bottom: 15px;"></i>
                                    <div style="font-weight: bold; margin-bottom: 10px;">Probabilités non disponibles</div>
                                    <div style="font-size: 14px; opacity: 0.8;">Les données statistiques détaillées ne sont pas disponibles pour ce match.</div>
                                </div>
                            `}
                            
                            <div class="forecast-date">${formattedDate}</div>
                        </div>
                        
                        <!-- Face 4: Exact Scores -->
                        <div class="forecast-face forecast-scores">
                            <div class="forecast-header">
                                <div style="font-weight: bold;">Scores exacts</div>
                                <div class="forecast-status ${statusClass}">${statusText}</div>
                            </div>
                            
                            ${forecastData.poisson_top_scores && forecastData.poisson_top_scores.length > 0 ? `
                                <div class="exact-scores-section">
                                    <div class="exact-scores-title">Scores les plus probables</div>
                                    ${forecastData.poisson_top_scores.map(scoreData => `
                                        <div class="exact-score-item">
                                            <div class="exact-score-match">${scoreData.score || 'N/A'}</div>
                                            <div class="exact-score-probability">${parseFloat(scoreData.probability || 0).toFixed(1)}%</div>
                                        </div>
                                    `).join('')}
                                </div>
                            ` : `
                                <div style="text-align: center; margin: 40px 0;">
                                    <i class="fas fa-bullseye" style="font-size: 48px; color: var(--card-accent); margin-bottom: 15px;"></i>
                                    <div style="font-weight: bold; margin-bottom: 10px;">Scores exacts non disponibles</div>
                                    <div style="font-size: 14px; opacity: 0.8;">Les prédictions de scores exacts ne sont pas disponibles pour ce match.</div>
                                </div>
                            `}
                            
                            <div class="forecast-date">${formattedDate}</div>
                        </div>
                        
                        <!-- Navigation indicators -->
                        <div class="face-indicator">
                            <div class="face-dot active"></div>
                            <div class="face-dot"></div>
                            <div class="face-dot"></div>
                            <div class="face-dot"></div>
                        </div>
                        
                        <div class="swipe-instruction">Glissez ou tapez</div>
                    </div>
                `;
            }
            
            return forecastElement;
        }
        
        function showForecastsSection() {
            hideSearchBar();
            
            document.querySelectorAll('.nav-item').forEach(item => {
                if (item.getAttribute('data-section') === 'forecasts') {
                    item.classList.add('active');
                } else {
                    item.classList.remove('active');
                }
            });
            
            document.getElementById('header-menu-button').style.display = 'block';
            document.getElementById('header-back-button').style.display = 'none';
            
            currentSection = 'forecasts';
            
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            
            document.getElementById('forecasts-section').classList.add('active');
            
            document.getElementById('header-title').textContent = 'Simples';
            
            document.getElementById('header-action').innerHTML = `
                <div class="search-button" id="search-button">
                    <i class="fas fa-search"></i>
                </div>
                <div class="events-button" id="events-button">
                    <i class="fas fa-bell"></i>
                    <div class="notification-dot" id="events-notification-dot"></div>
                </div>
            `;
            
            if (hasNewEvents) {
                document.getElementById('events-notification-dot').classList.add('active');
            }
            
            document.getElementById('search-button').addEventListener('click', toggleSearchBar);
            document.getElementById('events-button').addEventListener('click', function() {
                showEventsSection();
                updateLastViewedEventTimestamp();
                hideEventNotificationDot();
            });

            document.getElementById('bottom-nav').style.display = 'flex';
            document.querySelector('.content').classList.remove('no-bottom-nav');
            
            loadForecastsData('simple');
        }
        
        function showProfileSection() {
            hideSearchBar();
            
            document.querySelectorAll('.nav-item').forEach(item => {
                if (item.getAttribute('data-section') === 'profile') {
                    item.classList.add('active');
                } else {
                    item.classList.remove('active');
                }
            });
            
            document.getElementById('header-menu-button').style.display = 'block';
            document.getElementById('header-back-button').style.display = 'none';
            
            currentSection = 'profile';
            
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            
            document.getElementById('profile-section').classList.add('active');
            
            document.getElementById('header-title').textContent = 'Profil';
            
            document.getElementById('header-action').innerHTML = `
                <div class="events-button" id="events-button">
                    <i class="fas fa-bell"></i>
                    <div class="notification-dot" id="events-notification-dot"></div>
                </div>
            `;
            
            if (hasNewEvents) {
                document.getElementById('events-notification-dot').classList.add('active');
            }
            
            document.getElementById('events-button').addEventListener('click', function() {
                showEventsSection();
                updateLastViewedEventTimestamp();
                hideEventNotificationDot();
            });

            document.getElementById('bottom-nav').style.display = 'flex';
            document.querySelector('.content').classList.remove('no-bottom-nav');
            
            if (isAdmin) {
                const adminAction = document.createElement('div');
                adminAction.className = 'search-button';
                adminAction.id = 'admin-notif-button';
                adminAction.innerHTML = '<i class="fas fa-plus"></i>';
                adminAction.style.marginRight = '15px';
                adminAction.addEventListener('click', showAdminNotificationDialog);
                
                document.getElementById('header-action').insertBefore(adminAction, document.getElementById('events-button'));
            }
        }
        
        function showEventsSection() {
            hideSearchBar();
            
            currentSection = 'events';
            
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            
            document.getElementById('events-section').classList.add('active');
            
            document.getElementById('header-title').textContent = 'Événements';
            
            document.getElementById('header-menu-button').style.display = 'none';
            document.getElementById('header-back-button').style.display = 'block';
            
            document.getElementById('header-action').innerHTML = `
                <div class="search-button" id="search-button">
                    <i class="fas fa-search"></i>
                </div>
            `;
            
            document.getElementById('search-button').addEventListener('click', toggleSearchBar);
            
            document.getElementById('header-back-button').addEventListener('click', function() {
                if (document.querySelectorAll('.nav-item.active')[0]?.getAttribute('data-section') === 'forecasts') {
                    showForecastsSection();
                } else if (document.querySelectorAll('.nav-item.active')[0]?.getAttribute('data-section') === 'ai-forecasts') {
                    showAIForecastsSection();
                } else {
                    showProfileSection();
                }
            });

            document.getElementById('bottom-nav').style.display = 'none';
            document.querySelector('.content').classList.add('no-bottom-nav');
            
            if (isAdmin) {
                const adminAction = document.createElement('div');
                adminAction.className = 'search-button';
                adminAction.id = 'admin-notif-button';
                adminAction.innerHTML = '<i class="fas fa-plus"></i>';
                adminAction.style.marginRight = '15px';
                adminAction.addEventListener('click', showAdminNotificationDialog);
                
                document.getElementById('header-action').insertBefore(adminAction, document.getElementById('search-button'));
            }
            
            loadEvents();
            
            history.pushState({ page: 'events' }, '');
        }
        
        async function loadEvents() {
            if (isLoadingEvents) return;
            isLoadingEvents = true;
            
            const eventsList = document.getElementById('events-list');
            
            try {
                const eventsQuery = query(
                    collection(db, "Events"),
                    orderBy("timestamp", "desc"),
                    limit(50)
                );
                
                const eventsSnapshot = await getDocs(eventsQuery);
                
                eventsList.innerHTML = '';
                
                if (eventsSnapshot.empty) {
                    eventsList.innerHTML = `
                        <div class="empty-state">
                            <i class="fas fa-bell"></i>
                            <div class="empty-state-title">Aucun événement</div>
                            <div class="empty-state-text">Les événements apparaîtront ici</div>
                        </div>
                    `;
                    isLoadingEvents = false;
                    return;
                }
                
                const eventElements = [];
                
                eventsSnapshot.docs.forEach(doc => {
                    const eventData = doc.data();
                    const eventElement = createEventElement(doc.id, eventData);
                    eventElements.push(eventElement);
                });
                
                eventElements.forEach(element => {
                    eventsList.appendChild(element);
                });
                
                addDebugLog(`${eventsSnapshot.size} événements chargés`, 'success');
                
            } catch (error) {
                handleFirestoreError(error, 'chargement des événements');
                eventsList.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-exclamation-circle"></i>
                        <div class="empty-state-title">Erreur de chargement</div>
                        <div class="empty-state-text">Impossible de charger les événements</div>
                    </div>
                `;
            }
            
            isLoadingEvents = false;
        }
        
        function createEventElement(eventId, eventData) {
            const eventElement = document.createElement('div');
            eventElement.className = 'admin-notification';
            
            let iconClass = 'fas fa-info-circle';
            if (eventData.type === 'alert') {
                iconClass = 'fas fa-exclamation-triangle';
            } else if (eventData.type === 'update') {
                iconClass = 'fas fa-sync-alt';
            }
            
            let timestamp = '';
            if (eventData.timestamp) {
                const eventDate = eventData.timestamp.toDate ? eventData.timestamp.toDate() : new Date(eventData.timestamp);
                timestamp = eventDate.toLocaleDateString('fr-FR', {
                    day: 'numeric',
                    month: 'short',
                    hour: '2-digit',
                    minute: '2-digit'
                });
            }
            
            eventElement.innerHTML = `
                <div class="admin-notification-header">
                    <div class="admin-notification-title">
                        <i class="${iconClass}"></i>
                        ${eventData.title || 'Notification'}
                    </div>
                </div>
                <div class="admin-notification-content">${eventData.content || ''}</div>
                <div class="admin-notification-footer">
                    ${timestamp}
                    ${eventData.senderName ? ' • ' + eventData.senderName : ''}
                </div>
                ${isAdmin ? `
                    <div class="event-close-btn" onclick="deleteEvent('${eventId}')">
                        <i class="fas fa-times"></i>
                    </div>
                ` : ''}
            `;
            
            return eventElement;
        }
        
        window.deleteEvent = async function(eventId) {
            if (!isAdmin) return;
            
            try {
                await deleteDoc(doc(db, "Events", eventId));
                addDebugLog(`Événement ${eventId} supprimé`, 'success');
                loadEvents();
                showNotification("Événement supprimé", "success");
            } catch (error) {
                handleFirestoreError(error, 'suppression de l\'événement');
                showNotification("Erreur lors de la suppression", "error");
            }
        };
        
        function showAdminNotificationDialog() {
            if (!isAdmin) return;
            
            document.getElementById('admin-notif-dialog').classList.add('active');
            document.getElementById('notif-title').value = '';
            document.getElementById('notif-content').value = '';
            document.getElementById('notif-type').value = 'info';
            
            history.pushState({ page: 'admin-notification' }, '');
        }
        
        function hideAdminNotificationDialog() {
            document.getElementById('admin-notif-dialog').classList.remove('active');
        }
        
        async function sendAdminNotification() {
            if (!isAdmin) return;
            
            const title = document.getElementById('notif-title').value.trim();
            const content = document.getElementById('notif-content').value.trim();
            const type = document.getElementById('notif-type').value;
            
            document.querySelectorAll('.field-error').forEach(error => error.style.display = 'none');
            
            let hasError = false;
            
            if (!title) {
                document.getElementById('notif-title-error').style.display = 'block';
                hasError = true;
            }
            
            if (!content) {
                document.getElementById('notif-content-error').style.display = 'block';
                hasError = true;
            }
            
            if (hasError) return;
            
            const button = document.getElementById('send-notification-btn');
            button.classList.add('loading');
            
            try {
                const eventData = {
                    title: title,
                    content: content,
                    type: type,
                    timestamp: serverTimestamp(),
                    senderId: currentUser.uid,
                    senderEmail: currentUser.email,
                    senderName: currentUserData?.displayName || 'Admin'
                };
                
                await addDoc(collection(db, "Events"), eventData);
                
                addDebugLog('Notification admin envoyée avec succès', 'success');
                showNotification("Notification envoyée", "success");
                hideAdminNotificationDialog();
                
                if (currentSection === 'events') {
                    loadEvents();
                }
                
                showEventNotificationDot();
                
            } catch (error) {
                handleFirestoreError(error, 'envoi de la notification');
                showNotification("Erreur lors de l'envoi", "error");
            }
            
            button.classList.remove('loading');
        }
        
        function showLogoutConfirmation() {
            document.getElementById('logout-confirmation').classList.add('active');
            document.getElementById('overlay').classList.add('active');
            history.pushState({ page: 'logout-confirmation' }, '');
        }
        
        function hideLogoutConfirmation() {
            document.getElementById('logout-confirmation').classList.remove('active');
            document.getElementById('overlay').classList.remove('active');
        }
        
        async function logoutUser() {
            try {
                await signOut(auth);
                addDebugLog('Utilisateur déconnecté avec succès', 'success');
                hideLogoutConfirmation();
                showNotification("Déconnecté avec succès", "success");
                
                isLoggedIn = false;
                currentUser = null;
                currentUserData = null;
                isAdmin = false;
                
                showAuthScreen();
                
            } catch (error) {
                addDebugLog(`Erreur déconnexion: ${error.message}`, 'error');
                showNotification("Erreur lors de la déconnexion", "error");
            }
        }
        
        function showDeleteAccountConfirmation() {
            document.getElementById('delete-account-confirmation').classList.add('active');
            document.getElementById('overlay').classList.add('active');
            history.pushState({ page: 'delete-account-confirmation' }, '');
        }
        
        function hideDeleteAccountConfirmation() {
            document.getElementById('delete-account-confirmation').classList.remove('active');
            document.getElementById('overlay').classList.remove('active');
        }
        
        async function deleteAccount() {
            if (!currentUser) return;
            
            try {
                const userDocRef = doc(db, "Users", currentUser.uid);
                await deleteDoc(userDocRef);
                
                await deleteUser(currentUser);
                
                addDebugLog('Compte supprimé avec succès', 'success');
                hideDeleteAccountConfirmation();
                showNotification("Compte supprimé", "success");
                
                isLoggedIn = false;
                currentUser = null;
                currentUserData = null;
                isAdmin = false;
                
                showAuthScreen();
                
            } catch (error) {
                addDebugLog(`Erreur suppression compte: ${error.message}`, 'error');
                showNotification("Erreur lors de la suppression", "error");
            }
        }
        
        function showProfileEditDialog() {
            document.getElementById('profile-edit-dialog').classList.add('active');
            
            if (currentUserData?.displayName) {
                document.getElementById('edit-display-name').value = currentUserData.displayName;
            }
            
            if (currentUserData?.photoURL) {
                document.getElementById('profile-image-preview').innerHTML = `<img src="${currentUserData.photoURL}" alt="Profile">`;
            } else {
                document.getElementById('profile-image-preview').innerHTML = '<i class="fas fa-user"></i>';
            }
            
            profileNameChanged = false;
            profileImageFile = null;
            
            document.getElementById('save-display-name-btn').disabled = true;
            document.getElementById('save-profile-image-btn').disabled = true;
            
            history.pushState({ page: 'profile-edit' }, '');
        }
        
        function hideProfileEditDialog() {
            document.getElementById('profile-edit-dialog').classList.remove('active');
        }
        
        function handleProfileImageSelect(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            if (file.size > 5 * 1024 * 1024) {
                showNotification("L'image ne doit pas dépasser 5 MB", "error");
                return;
            }
            
            if (!file.type.startsWith('image/')) {
                showNotification("Veuillez sélectionner une image valide", "error");
                return;
            }
            
            profileImageFile = file;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                document.getElementById('profile-image-preview').innerHTML = `<img src="${e.target.result}" alt="Profile">`;
                document.getElementById('save-profile-image-btn').disabled = false;
            };
            reader.readAsDataURL(file);
        }
        
        async function updateDisplayName() {
            const newDisplayName = document.getElementById('edit-display-name').value.trim();
            
            if (!newDisplayName) {
                document.getElementById('edit-display-name-error').style.display = 'block';
                return;
            }
            
            if (!profileNameChanged) return;
            
            const button = document.getElementById('save-display-name-btn');
            button.classList.add('loading');
            
            try {
                const userDocRef = doc(db, "Users", currentUser.uid);
                await updateDoc(userDocRef, {
                    displayName: newDisplayName,
                    updatedAt: serverTimestamp()
                });
                
                currentUserData.displayName = newDisplayName;
                document.getElementById('profile-name-text').textContent = newDisplayName;
                
                profileNameChanged = false;
                button.disabled = true;
                
                addDebugLog('Nom d\'utilisateur mis à jour', 'success');
                showNotification("Nom mis à jour", "success");
                
            } catch (error) {
                handleFirestoreError(error, 'mise à jour du nom');
                showNotification("Erreur lors de la mise à jour", "error");
            }
            
            button.classList.remove('loading');
        }
        
        async function updateProfileImage() {
            if (!profileImageFile) return;
            
            const button = document.getElementById('save-profile-image-btn');
            button.classList.add('loading');
            
            try {
                const userDocRef = doc(db, "Users", currentUser.uid);
                await updateDoc(userDocRef, {
                    updatedAt: serverTimestamp()
                });
                
                profileImageFile = null;
                button.disabled = true;
                
                addDebugLog('Photo de profil mise à jour', 'success');
                showNotification("Photo mise à jour", "success");
                
            } catch (error) {
                handleFirestoreError(error, 'mise à jour de la photo');
                showNotification("Erreur lors de la mise à jour", "error");
            }
            
            button.classList.remove('loading');
        }
        
        function updateAdminStatus() {
            updateBadges();
        }
        
        function showEventNotificationDot() {
            hasNewEvents = true;
            const dots = document.querySelectorAll('#events-notification-dot');
            dots.forEach(dot => {
                if (dot) dot.classList.add('active');
            });
        }
        
        function hideEventNotificationDot() {
            hasNewEvents = false;
            const dots = document.querySelectorAll('#events-notification-dot');
            dots.forEach(dot => {
                if (dot) dot.classList.remove('active');
            });
        }
        
        function updateLastViewedEventTimestamp() {
            lastViewedEventTimestamp = new Date();
            localStorage.setItem('parisAllianceLastViewedEvent', lastViewedEventTimestamp.toISOString());
        }
        
        function checkForNewEvents() {
            const lastViewed = localStorage.getItem('parisAllianceLastViewedEvent');
            if (!lastViewed) {
                showEventNotificationDot();
                return;
            }
            
            lastViewedEventTimestamp = new Date(lastViewed);
            
            if (eventsUnsubscribe) eventsUnsubscribe();
            
            try {
                const eventsQuery = query(
                    collection(db, "Events"),
                    where("timestamp", ">", Timestamp.fromDate(lastViewedEventTimestamp)),
                    orderBy("timestamp", "desc")
                );
                
                eventsUnsubscribe = onSnapshot(eventsQuery, (snapshot) => {
                    if (!snapshot.empty) {
                        showEventNotificationDot();
                        addDebugLog(`${snapshot.size} nouveaux événements détectés`, 'info');
                    }
                }, (error) => {
                    handleFirestoreError(error, 'écoute des nouveaux événements');
                });
                
            } catch (error) {
                handleFirestoreError(error, 'configuration de l\'écoute des événements');
            }
        }
        
        function setupAuth() {
            const loginBtn = document.getElementById('loginBtn');
            const registerBtn = document.getElementById('registerBtn');
            const loginTab = document.getElementById('login-tab');
            const registerTab = document.getElementById('register-tab');
            const gotoRegister = document.getElementById('goto-register');
            const gotoLogin = document.getElementById('goto-login');
            
            loginBtn.addEventListener('click', loginUser);
            registerBtn.addEventListener('click', registerUser);
            
            loginTab.addEventListener('click', () => switchAuthTab('login'));
            registerTab.addEventListener('click', () => switchAuthTab('login'));
            gotoRegister.addEventListener('click', (e) => {
                e.preventDefault();
                switchAuthTab('register');
            });
            gotoLogin.addEventListener('click', (e) => {
                e.preventDefault();
                switchAuthTab('login');
            });
            
            onAuthStateChanged(auth, async (user) => {
                if (user) {
                    currentUser = user;
                    isLoggedIn = true;
                    
                    try {
                        await initializeAdminCollection();
                        await checkAdminStatus();
                        await loadUserData();
                        showMainApp();
                        checkForNewEvents();
                        
                        addDebugLog(`Utilisateur connecté: ${user.email}`, 'success');
                        
                    } catch (error) {
                        addDebugLog(`Erreur initialisation: ${error.message}`, 'error');
                        showNotification("Erreur lors de l'initialisation", "error");
                    }
                } else {
                    isLoggedIn = false;
                    currentUser = null;
                    currentUserData = null;
                    isAdmin = false;
                    showAuthScreen();
                }
                
                hideLoading();
            });
        }
        
        function switchAuthTab(tab) {
            const loginForm = document.getElementById('login-form');
            const registerForm = document.getElementById('register-form');
            const loginTab = document.getElementById('login-tab');
            const registerTab = document.getElementById('register-tab');
            
            if (tab === 'register') {
                loginForm.classList.remove('active');
                registerForm.classList.add('active');
                loginTab.classList.remove('active');
                registerTab.classList.add('active');
            } else {
                registerForm.classList.remove('active');
                loginForm.classList.add('active');
                registerTab.classList.remove('active');
                loginTab.classList.add('active');
            }
            
            clearAuthErrors();
        }
        
        function clearAuthErrors() {
            document.querySelectorAll('.form-error').forEach(error => {
                error.style.display = 'none';
            });
            document.querySelectorAll('.log-message').forEach(log => {
                log.style.display = 'none';
            });
        }
        
        async function loginUser() {
            const email = document.getElementById('login-email').value.trim();
            const password = document.getElementById('login-password').value;
            const button = document.getElementById('loginBtn');
            const logElement = document.getElementById('login-log');
            
            clearAuthErrors();
            
            let hasError = false;
            
            if (!email || !email.includes('@')) {
                document.getElementById('login-email-error').style.display = 'block';
                hasError = true;
            }
            
            if (!password) {
                document.getElementById('login-password-error').style.display = 'block';
                hasError = true;
            }
            
            if (hasError) return;
            
            button.classList.add('loading');
            
            try {
                await signInWithEmailAndPassword(auth, email, password);
                
                addDebugLog(`Connexion réussie pour ${email}`, 'success');
                logElement.textContent = 'Connexion réussie !';
                logElement.className = 'log-message success';
                logElement.style.display = 'block';
                
            } catch (error) {
                addDebugLog(`Erreur connexion: ${error.message}`, 'error');
                
                let errorMessage = 'Erreur de connexion';
                if (error.code === 'auth/user-not-found') {
                    errorMessage = 'Aucun compte trouvé avec cet email';
                } else if (error.code === 'auth/wrong-password') {
                    errorMessage = 'Mot de passe incorrect';
                } else if (error.code === 'auth/invalid-email') {
                    errorMessage = 'Adresse email invalide';
                } else if (error.code === 'auth/too-many-requests') {
                    errorMessage = 'Trop de tentatives. Réessayez plus tard';
                }
                
                logElement.textContent = errorMessage;
                logElement.className = 'log-message error';
                logElement.style.display = 'block';
            }
            
            button.classList.remove('loading');
        }
        
        async function registerUser() {
            const email = document.getElementById('register-email').value.trim();
            const password = document.getElementById('register-password').value;
            const confirmPassword = document.getElementById('register-confirm-password').value;
            const button = document.getElementById('registerBtn');
            const logElement = document.getElementById('register-log');
            
            clearAuthErrors();
            
            let hasError = false;
            
            if (!email || !email.includes('@')) {
                document.getElementById('register-email-error').style.display = 'block';
                hasError = true;
            }
            
            if (password.length < 6) {
                document.getElementById('register-password-error').style.display = 'block';
                hasError = true;
            }
            
            if (password !== confirmPassword) {
                document.getElementById('register-confirm-password-error').style.display = 'block';
                hasError = true;
            }
            
            if (hasError) return;
            
            button.classList.add('loading');
            
            try {
                const userCredential = await createUserWithEmailAndPassword(auth, email, password);
                const user = userCredential.user;
                
                const userData = {
                    email: user.email,
                    displayName: user.displayName || 'Utilisateur',
                    createdAt: serverTimestamp(),
                    updatedAt: serverTimestamp(),
                    uid: user.uid
                };
                
                await setDoc(doc(db, "Users", user.uid), userData);
                
                addDebugLog(`Inscription réussie pour ${email}`, 'success');
                logElement.textContent = 'Compte créé avec succès !';
                logElement.className = 'log-message success';
                logElement.style.display = 'block';
                
            } catch (error) {
                addDebugLog(`Erreur inscription: ${error.message}`, 'error');
                
                let errorMessage = 'Erreur lors de la création du compte';
                if (error.code === 'auth/email-already-in-use') {
                    errorMessage = 'Un compte existe déjà avec cet email';
                } else if (error.code === 'auth/invalid-email') {
                    errorMessage = 'Adresse email invalide';
                } else if (error.code === 'auth/weak-password') {
                    errorMessage = 'Le mot de passe est trop faible';
                }
                
                logElement.textContent = errorMessage;
                logElement.className = 'log-message error';
                logElement.style.display = 'block';
            }
            
            button.classList.remove('loading');
        }
        
        async function loadUserData() {
            if (!currentUser) return;
            
            try {
                const userDoc = await getDoc(doc(db, "Users", currentUser.uid));
                
                if (userDoc.exists()) {
                    currentUserData = userDoc.data();
                } else {
                    const userData = {
                        email: currentUser.email,
                        displayName: currentUser.displayName || 'Utilisateur',
                        createdAt: serverTimestamp(),
                        updatedAt: serverTimestamp(),
                        uid: currentUser.uid
                    };
                    
                    await setDoc(doc(db, "Users", currentUser.uid), userData);
                    currentUserData = userData;
                }
                
                updateProfileDisplay();
                addDebugLog('Données utilisateur chargées', 'success');
                
            } catch (error) {
                handleFirestoreError(error, 'chargement des données utilisateur');
            }
        }
        
        function updateProfileDisplay() {
            if (!currentUserData) return;
            
            const profileNameText = document.getElementById('profile-name-text');
            const profileEmail = document.getElementById('profile-email');
            
            if (profileNameText) {
                profileNameText.textContent = currentUserData.displayName || 'Utilisateur';
            }
            
            if (profileEmail) {
                profileEmail.textContent = currentUser.email;
            }
            
            updateBadges();
        }
        
        function showAuthScreen() {
            document.getElementById('auth-screen').style.display = 'flex';
            document.getElementById('loading').style.display = 'none';
            document.getElementById('verify-animation').style.display = 'none';
            hideMainApp();
        }
        
        function showMainApp() {
            document.getElementById('auth-screen').style.display = 'none';
            document.getElementById('loading').style.display = 'none';
            document.getElementById('verify-animation').style.display = 'none';
            
            document.querySelector('.header').style.display = 'flex';
            document.querySelector('.content').style.display = 'block';
            document.querySelector('.bottom-nav').style.display = 'flex';
            
            showForecastsSection();
        }
        
        function hideMainApp() {
            document.querySelector('.header').style.display = 'none';
            document.querySelector('.content').style.display = 'none';
            document.querySelector('.bottom-nav').style.display = 'none';
        }
        
        function showLoading() {
            document.getElementById('loading').style.display = 'flex';
        }
        
        function hideLoading() {
            document.getElementById('loading').style.display = 'none';
        }
        
        function showVerifyAnimation() {
            document.getElementById('verify-animation').style.display = 'flex';
        }
        
        function hideVerifyAnimation() {
            document.getElementById('verify-animation').style.display = 'none';
        }
        
        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            showLoading();
            setupDarkMode();
            setupTheme();
            setupTransitions();
            setupCardStyles();
            setupConnectionMonitoring();
            setupUIEvents();
            setupAuth();
            
            addDebugLog('Application Pari Alliance initialisée', 'success');
            
            setTimeout(() => {
                if (!isLoggedIn) {
                    hideLoading();
                }
            }, 3000);
        });
    </script>
</body>
</html>
